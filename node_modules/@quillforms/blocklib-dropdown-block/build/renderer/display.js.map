{"version":3,"names":["_rendererCore","require","_utils","_react","_reactDom","_data","_tinycolor","_interopRequireDefault","_classnames","_lodash","_expandIcon","_closeIcon","_choiceItem","styles","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ENTER_CODE","ESC_CODE","ARROW_UP_CODE","ARROW_DOWN_CODE","timer","timer2","timer3","DropdownDisplay","props","id","attributes","setIsValid","setIsAnswered","setValidationErr","val","setVal","next","showErrMsg","isActive","isTouchScreen","setFooterDisplay","inputRef","isPreview","isReviewing","choices","required","cx","useCx","theme","useBlockTheme","themeId","showDropdown","setShowDropdown","useState","searchKeyword","setSearchKeyword","selectedChoiceIndex","setSelectedChoiceIndex","clicked","setClicked","showCloseIcon","setShowCloseIcon","inputValue","setInputValue","showFixedDropdownInDom","setShowFixedDropdownInDom","showFDrop","setShowFDrop","wrapperRef","useRef","choicesWrappeerRef","messages","useMessages","answersColor","tinyColor","$choices","useMemo","cloneDeep","map","choice","index","label","filter","toLowerCase","includes","checkFieldValidation","handleClickOutside","e","current","contains","target","useEffect","document","addEventListener","querySelector","classList","add","remove","removeEventListener","setTimeout","clearTimeout","changeHandler","value","selectedChoice","find","checkInView","container","element","cTop","scrollTop","cBottom","clientHeight","eTop","offsetTop","eBottom","handleChoiceKeyDown","keyCode","block","length","newChoiceIndex","choiceEl","getElementById","stopPropagation","clickHandler","arguments","undefined","selectedIndex","findIndex","c","_element","createElement","ref","style","position","autoComplete","className","css","setAlpha","toString","placeholder","onChange","onClick","blur","onFocus","onBlur","onKeyDown","focus","transform","visible","DropdownChoices","backgroundColor","onWheel","blockId","choiceIndex","hovered","role","errorsBgColor","errorsFontColor","Fragment","createPortal","show","hide","FixedDropdown","focusable","viewBox","d","autoFocus","_default","exports"],"sources":["@quillforms/blocklib-dropdown-block/src/renderer/display.js"],"sourcesContent":["/* eslint-disable no-nested-ternary */\r\n/**\r\n * QuillForms Dependencies\r\n */\r\nimport { useMessages, useBlockTheme } from '@quillforms/renderer-core';\r\nimport { useCx, css } from '@quillforms/utils';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport {\r\n\tuseState,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseMemo\r\n} from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport tinyColor from 'tinycolor2';\r\nimport classnames from 'classnames';\r\nimport { cloneDeep } from 'lodash';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport DropdownIcon from './expand-icon';\r\nimport CloseIcon from './close-icon';\r\nimport ChoiceItem from './choice-item';\r\nimport * as styles from './styles';\r\n\r\nconst ENTER_CODE = 13;\r\nconst ESC_CODE = 27;\r\nconst ARROW_UP_CODE = 38;\r\nconst ARROW_DOWN_CODE = 40;\r\n\r\nlet timer;\r\nlet timer2;\r\nlet timer3;\r\nconst DropdownDisplay = (props) => {\r\n\tconst {\r\n\t\tid,\r\n\t\tattributes,\r\n\t\tsetIsValid,\r\n\t\tsetIsAnswered,\r\n\t\tsetValidationErr,\r\n\t\tval,\r\n\t\tsetVal,\r\n\t\tnext,\r\n\t\tshowErrMsg,\r\n\t\tisActive,\r\n\t\tisTouchScreen,\r\n\t\tsetFooterDisplay,\r\n\t\tinputRef,\r\n\t\tisPreview,\r\n\t\tisReviewing,\r\n\t} = props;\r\n\tconst { choices, required } = attributes;\r\n\tconst cx = useCx();\r\n\tconst theme = useBlockTheme(attributes.themeId);\r\n\tconst [showDropdown, setShowDropdown] = useState(false);\r\n\tconst [searchKeyword, setSearchKeyword] = useState('');\r\n\tconst [selectedChoiceIndex, setSelectedChoiceIndex] = useState(-1);\r\n\tconst [clicked, setClicked] = useState(false);\r\n\tconst [showCloseIcon, setShowCloseIcon] = useState(false);\r\n\tconst [inputValue, setInputValue] = useState('');\r\n\tconst [showFixedDropdownInDom, setShowFixedDropdownInDom] =\r\n\t\tuseState(false);\r\n\tconst [showFDrop, setShowFDrop] = useState(false);\r\n\tconst wrapperRef = useRef();\r\n\tconst choicesWrappeerRef = useRef();\r\n\tconst messages = useMessages();\r\n\tconst answersColor = tinyColor(theme.answersColor);\r\n\tconst $choices = useMemo(() => {\r\n\t\treturn cloneDeep(choices)\r\n\t\t\t.map((choice, index) => {\r\n\t\t\t\tif (!choice.label) choice.label = 'Choice ' + (index + 1);\r\n\t\t\t\treturn choice;\r\n\t\t\t})\r\n\t\t\t.filter((choice) =>\r\n\t\t\t\tchoice.label\r\n\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t.includes(\r\n\t\t\t\t\t\tval && isTouchScreen ? '' : searchKeyword.toLowerCase()\r\n\t\t\t\t\t)\r\n\t\t\t);\r\n\t}, [choices, searchKeyword]);\r\n\r\n\tconst checkFieldValidation = () => {\r\n\t\tif (required === true && (!val || val === '')) {\r\n\t\t\tsetIsValid(false);\r\n\t\t\tsetValidationErr(\r\n\t\t\t\tmessages['label.errorAlert.selectionRequired']\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tsetIsValid(true);\r\n\t\t\tsetValidationErr(null);\r\n\t\t}\r\n\t};\r\n\r\n\t// Handle click outside the countries dropdown\r\n\tconst handleClickOutside = (e) => {\r\n\t\tif (wrapperRef.current && !wrapperRef.current.contains(e.target)) {\r\n\t\t\tsetShowDropdown(false);\r\n\t\t\tsetSelectedChoiceIndex(-1);\r\n\t\t}\r\n\t};\r\n\r\n\t// Attaching the previous event with UseEffect hook\r\n\tuseEffect(() => {\r\n\t\tif (showDropdown) {\r\n\t\t\t// Bind the event listener\r\n\t\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\t\tif (\r\n\t\t\t\tdocument.querySelector(\r\n\t\t\t\t\t`#block-${id} .renderer-core-field-footer`\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tdocument\r\n\t\t\t\t\t.querySelector(\r\n\t\t\t\t\t\t`#block-${id} .renderer-core-field-footer`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.classList.add('is-hidden');\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\tdocument.querySelector(\r\n\t\t\t\t`#block-${id} .renderer-core-field-footer`\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\tdocument\r\n\t\t\t\t.querySelector(`#block-${id} .renderer-core-field-footer`)\r\n\t\t\t\t.classList.remove('is-hidden');\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\t// Unbind the event listener on clean up\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t}, [showDropdown]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// if change in attributes and is in preview mode, check validation\r\n\t\t// Note, that this effect will also be called on mount, that's why we check if isReviewing = false\r\n\t\t// because we want to display errors coming from server.\r\n\t\tif (isPreview || !isReviewing) checkFieldValidation(val);\r\n\t}, [val, attributes]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showFDrop) {\r\n\t\t\tsetShowFixedDropdownInDom(showFDrop);\r\n\t\t\tsetFooterDisplay(false);\r\n\t\t} else {\r\n\t\t\ttimer3 = setTimeout(() => {\r\n\t\t\t\tsetShowFixedDropdownInDom(showFDrop);\r\n\t\t\t}, 500);\r\n\t\t}\r\n\r\n\t\treturn () => clearTimeout(timer3);\r\n\t}, [showFDrop]);\r\n\r\n\tconst changeHandler = (e) => {\r\n\t\t// show close icon of there is any string\r\n\t\tsetShowCloseIcon(e.target.value !== '');\r\n\t\tsetInputValue(e.target.value);\r\n\t\tif (!isTouchScreen) setShowDropdown(true);\r\n\t\tif (val) {\r\n\t\t\tsetVal(null);\r\n\t\t\tsetSearchKeyword('');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetSearchKeyword(e.target.value);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isActive) {\r\n\t\t\t//clearTimeout( timer );\r\n\t\t\tif (timer2) clearTimeout(timer2);\r\n\t\t}\r\n\t}, [isActive]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (val) {\r\n\t\t\tconst selectedChoice = $choices.find(\r\n\t\t\t\t(choice) => choice.value === val\r\n\t\t\t);\r\n\t\t\tsetSearchKeyword(selectedChoice ? selectedChoice.label : '');\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\t// clearTimeout( timer );\r\n\t\t\ttimer2 && clearTimeout(timer2);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tfunction checkInView(container, element) {\r\n\t\t//Get container properties\r\n\t\tconst cTop = container.scrollTop;\r\n\t\tconst cBottom = cTop + container.clientHeight;\r\n\r\n\t\t//Get element properties\r\n\t\tconst eTop = element.offsetTop;\r\n\t\tconst eBottom = eTop + element.clientHeight;\r\n\r\n\t\t//Check if in view\r\n\t\treturn eTop >= cTop + 10 && eBottom <= cBottom - 50;\r\n\t}\r\n\r\n\tconst handleChoiceKeyDown = (e) => {\r\n\t\tif (isTouchScreen) return;\r\n\t\tif (e.keyCode === ESC_CODE) {\r\n\t\t\tsetShowDropdown(false);\r\n\t\t\tsetShowCloseIcon(inputValue !== '');\r\n\t\t\tsetSelectedChoiceIndex(-1);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (e.keyCode === ARROW_UP_CODE || e.keyCode === ARROW_DOWN_CODE) {\r\n\t\t\tconst block = document.querySelector(\r\n\t\t\t\t`#block-${id}  .qf-block-dropdown-display__choices`\r\n\t\t\t);\r\n\t\t\tif (\r\n\t\t\t\t!block ||\r\n\t\t\t\t(selectedChoiceIndex <= 0 && e.keyCode === ARROW_UP_CODE) ||\r\n\t\t\t\t(selectedChoiceIndex === $choices.length - 1 &&\r\n\t\t\t\t\te.keyCode === ARROW_DOWN_CODE)\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetShowDropdown(true);\r\n\t\t\tconst newChoiceIndex =\r\n\t\t\t\te.keyCode === ARROW_UP_CODE\r\n\t\t\t\t\t? selectedChoiceIndex - 1\r\n\t\t\t\t\t: selectedChoiceIndex + 1;\r\n\t\t\tsetSelectedChoiceIndex(newChoiceIndex);\r\n\t\t\tconst choiceEl = document.getElementById(\r\n\t\t\t\t`block-${id}-option-${newChoiceIndex}`\r\n\t\t\t);\r\n\t\t\tif (!checkInView(block, choiceEl)) {\r\n\t\t\t\tblock.scrollTop = choiceEl.offsetTop - 30;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (e.keyCode === ENTER_CODE) {\r\n\t\t\te.stopPropagation();\r\n\t\t\tif (selectedChoiceIndex === -1) {\r\n\t\t\t\tsetShowDropdown(false);\r\n\t\t\t\tsetSelectedChoiceIndex(-1);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetClicked(true);\r\n\t\t\t// selectedChoiceIndex > 4 &&\r\n\t\t\t// \tdocument\r\n\t\t\t// \t\t.querySelector( '.qf-block-dropdown-display__choices' )\r\n\t\t\t// \t\t.scrollTo( 0, ( selectedChoiceIndex - 3 ) * 49 );\r\n\t\t}\r\n\t};\r\n\r\n\tconst clickHandler = (choice = $choices[selectedChoiceIndex]) => {\r\n\t\tconst selectedIndex = $choices.findIndex(\r\n\t\t\t(c) => c.value === choice.value\r\n\t\t);\r\n\t\tif (selectedIndex !== selectedChoiceIndex)\r\n\t\t\tsetSelectedChoiceIndex(selectedIndex);\r\n\t\tsetClicked(false);\r\n\t\tsetShowCloseIcon(false);\r\n\t\tshowErrMsg(false);\r\n\t\tclearTimeout(timer);\r\n\t\tif (timer2) clearTimeout(timer2);\r\n\t\tif (val && val === choice.value) {\r\n\t\t\tsetVal(null);\r\n\t\t\tsetIsAnswered(false);\r\n\t\t\tsetSearchKeyword('');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetIsAnswered(true);\r\n\t\tsetVal(choice.value);\r\n\t\ttimer = setTimeout(\r\n\t\t\t() => {\r\n\t\t\t\tsetSearchKeyword(choice.label);\r\n\t\t\t\tsetShowDropdown(false);\r\n\t\t\t\tsetSelectedChoiceIndex(-1);\r\n\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\tsetShowFDrop(false);\r\n\t\t\t\t\tsetFooterDisplay(true);\r\n\t\t\t\t\t// timer2 for showing the input after choosing value\r\n\t\t\t\t\ttimer2 = setTimeout(() => {\r\n\t\t\t\t\t\tnext();\r\n\t\t\t\t\t}, 750);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnext();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tisTouchScreen ? 500 : 700\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div ref={wrapperRef} style={{ position: 'relative' }}>\r\n\t\t\t<input\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\tref={inputRef}\r\n\t\t\t\tclassName={cx(\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\t& {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\t\tfont-size: 30px;\r\n\t\t\t\t\t\t\tpadding-bottom: 8px;\r\n\t\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\t\ttransition: box-shadow 0.1s ease-out 0s;\r\n\t\t\t\t\t\t\tbox-shadow: ${answersColor\r\n\t\t\t\t\t\t\t.setAlpha(0.3)\r\n\t\t\t\t\t\t\t.toString()}\r\n\t\t\t\t\t\t\t\t0px 1px;\r\n\t\t\t\t\t\t\t@media ( max-width: 600px ) {\r\n\t\t\t\t\t\t\t\tfont-size: 24px;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t@media ( max-width: 480px ) {\r\n\t\t\t\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\t\tbox-shadow: ${answersColor\r\n\t\t\t\t\t\t\t.setAlpha(1)\r\n\t\t\t\t\t\t\t.toString()}\r\n\t\t\t\t\t\t\t\t0px 2px;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t`\r\n\t\t\t\t)}\r\n\t\t\t\tid={'dropdown-' + id}\r\n\t\t\t\tplaceholder={messages['block.dropdown.placeholder']}\r\n\t\t\t\tonChange={changeHandler}\r\n\t\t\t\tvalue={\r\n\t\t\t\t\tval && isTouchScreen\r\n\t\t\t\t\t\t? searchKeyword\r\n\t\t\t\t\t\t: !isTouchScreen\r\n\t\t\t\t\t\t\t? searchKeyword\r\n\t\t\t\t\t\t\t: ''\r\n\t\t\t\t}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\t\tsetShowFDrop(true);\r\n\t\t\t\t\t\tinputRef.current.blur();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetShowDropdown(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tonFocus={() => {\r\n\t\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\t\tsetFooterDisplay(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tonBlur={() => {\r\n\t\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\t\tsetFooterDisplay(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tonKeyDown={handleChoiceKeyDown}\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t/>\r\n\t\t\t{(val && val.length > 0) ||\r\n\t\t\t\t(showCloseIcon && !isTouchScreen) ? (\r\n\t\t\t\t<CloseIcon\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t\t\ttimer2 && clearTimeout(timer2);\r\n\t\t\t\t\t\t\tsetSearchKeyword('');\r\n\t\t\t\t\t\t\tsetIsAnswered(false);\r\n\t\t\t\t\t\t\tsetVal(undefined);\r\n\t\t\t\t\t\t\tsetShowCloseIcon(false);\r\n\t\t\t\t\t\t\tif (!isTouchScreen) {\r\n\t\t\t\t\t\t\tinputRef.current.focus();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<DropdownIcon\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\ttransform: `${showDropdown ? 'rotate(180deg)' : 'rotate(0deg)'\r\n\t\t\t\t\t\t\t\t}`,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tshowDropdown && setSelectedChoiceIndex(-1);\r\n\t\t\t\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\t\t\t\tsetShowFDrop(!showFDrop);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetShowDropdown(!showDropdown);\r\n\t\t\t\t\t\t\tinputRef.current.focus();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonKeyDown={(e) => {\r\n\t\t\t\t\t\t\tif (e.keyCode === ENTER_CODE) {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\tshowDropdown && setSelectedChoiceIndex(-1);\r\n\t\t\t\t\t\t\t\tif (isTouchScreen) {\r\n\t\t\t\t\t\t\t\t\tsetShowFDrop(!showFDrop);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetShowDropdown(!showDropdown);\r\n\t\t\t\t\t\t\t\tinputRef.current.focus();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{showDropdown && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={cx(\r\n\t\t\t\t\t\t'qf-block-dropdown-display__choices',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvisible: showDropdown,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tstyles.DropdownChoices,\r\n\t\t\t\t\t\tcss`\r\n\t\t\t\t\t\t\tbackground: ${theme.backgroundColor};\r\n\t\t\t\t\t\t\tpadding: 15px;\r\n\t\t\t\t\t\t\tborder: 1px dashed ${theme.answersColor};\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t)}\r\n\t\t\t\t\tref={choicesWrappeerRef}\r\n\t\t\t\t\tonWheel={(e) => {\r\n\t\t\t\t\t\tif (showDropdown) {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{$choices?.length > 0 ? (\r\n\t\t\t\t\t\t$choices.map((choice, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<ChoiceItem\r\n\t\t\t\t\t\t\t\t\tblockId={id}\r\n\t\t\t\t\t\t\t\t\tchoiceIndex={index}\r\n\t\t\t\t\t\t\t\t\thovered={index === selectedChoiceIndex}\r\n\t\t\t\t\t\t\t\t\tclicked={\r\n\t\t\t\t\t\t\t\t\t\tindex === selectedChoiceIndex && clicked\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\trole=\"presentation\"\r\n\t\t\t\t\t\t\t\t\tkey={`block-dropdown-${id}-choice-${choice.value}`}\r\n\t\t\t\t\t\t\t\t\tclickHandler={() =>\r\n\t\t\t\t\t\t\t\t\t\tclickHandler(choice)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tchoice={choice}\r\n\t\t\t\t\t\t\t\t\tval={val}\r\n\t\t\t\t\t\t\t\t\tshowDropdown={showDropdown}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName={cx(css`\r\n\t\t\t\t\t\t\t\tbackground: ${theme.errorsBgColor};\r\n\t\t\t\t\t\t\t\tcolor: ${theme.errorsFontColor};\r\n\t\t\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\t` )}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{messages['block.dropdown.noSuggestions']}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{showFixedDropdownInDom && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{createPortal(\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={cx(\r\n\t\t\t\t\t\t\t\t'fixed-dropdown',\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tshow: showFDrop,\r\n\t\t\t\t\t\t\t\t\thide: !showFDrop,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tstyles.FixedDropdown(theme)\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\tonWheel={(e) => e.stopPropagation()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName=\"fixed-dropdown-content\"\r\n\t\t\t\t\t\t\t\tonWheel={(e) => {\r\n\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\r\n\t\t\t\t\t\t\t\t\t\tcss`\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowFDrop(false);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"back-icon\"\r\n\t\t\t\t\t\t\t\t\t\tfocusable=\"false\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\trole=\"presentation\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z\"></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tautoFocus={false}\r\n\t\t\t\t\t\t\t\t\t\tclassName={cx(\r\n\t\t\t\t\t\t\t\t\t\t\tcss`\r\n\t\t\t\t\t\t\t\t\t\t\t\t& {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding-bottom: 8px;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin-bottom: 10px;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransition: box-shadow 0.1s\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tease-out 0s;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbox-shadow: ${answersColor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.setAlpha(0.3)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.toString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0px 1px;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbox-shadow: ${answersColor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.setAlpha(1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.toString()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0px 2px;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.answersColor};\r\n\t\t\t\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={\r\n\t\t\t\t\t\t\t\t\t\t\tmessages[\r\n\t\t\t\t\t\t\t\t\t\t\t'block.dropdown.placeholder'\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonChange={changeHandler}\r\n\t\t\t\t\t\t\t\t\t\tvalue={searchKeyword}\r\n\t\t\t\t\t\t\t\t\t\tonFocus={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetFooterDisplay(false);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonBlur={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetFooterDisplay(true);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleChoiceKeyDown}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"qf-block-dropdown-display__choices visible fixed-choices\"\r\n\t\t\t\t\t\t\t\t\tref={choicesWrappeerRef}\r\n\t\t\t\t\t\t\t\t\tonWheel={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tif (showFixedDropdownInDom) {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{$choices?.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t$choices.map((choice, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ChoiceItem\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thovered={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedChoiceIndex\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchoiceIndex={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tblockId={id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclicked={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedChoiceIndex &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclicked\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trole=\"presentation\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`block-dropdown-${id}-choice-${choice.value}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler(choice)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchoice={choice}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval={val}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowDropdown={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowDropdown\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={cx(css`\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: ${theme.errorsBgColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${theme.errorsFontColor};\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\t\t\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\t\t\t\t\t` )}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tmessages[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'block.dropdown.noSuggestions'\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>,\r\n\t\t\t\t\t\tdocument.querySelector('.renderer-core-form-flow')\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default DropdownDisplay;\r\n"],"mappings":"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"}