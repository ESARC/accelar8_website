{"version":3,"names":["_rendererCore","require","_react","_tinycolor","_interopRequireDefault","_emotion","_classnames","NumberOutput","props","id","attributes","setIsValid","setIsAnswered","setValidationErr","showNextBtn","blockWithError","val","setVal","showErrMsg","inputRef","isTouchScreen","setFooterDisplay","isPreview","isReviewing","setMax","max","setMin","min","required","placeholder","messages","useMessages","theme","useBlockTheme","themeId","answersColor","tinyColor","checkfieldValidation","value","useEffect","changeHandler","e","preventDefault","target","isNaN","newVal","parseInt","specialProps","type","_element","createElement","_extends2","default","ref","className","classnames","css","setAlpha","toString","onChange","onFocus","onWheel","blur","onBlur","autoComplete","_default","exports"],"sources":["@quillforms/blocklib-number-block/src/renderer/display.js"],"sourcesContent":["/* eslint-disable no-nested-ternary */\r\n/**\r\n * QuillForms Depndencies\r\n */\r\nimport { useMessages, useBlockTheme } from '@quillforms/renderer-core';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { useState, useEffect } from 'react';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport tinyColor from 'tinycolor2';\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\n\r\nconst NumberOutput = ( props ) => {\r\n\tconst {\r\n\t\tid,\r\n\t\tattributes,\r\n\t\tsetIsValid,\r\n\t\tsetIsAnswered,\r\n\t\tsetValidationErr,\r\n\t\tshowNextBtn,\r\n\t\tblockWithError,\r\n\t\tval,\r\n\t\tsetVal,\r\n\t\tshowErrMsg,\r\n\t\tinputRef,\r\n\t\tisTouchScreen,\r\n\t\tsetFooterDisplay,\r\n\t\tisPreview,\r\n\t\tisReviewing,\r\n\t} = props;\r\n\tconst { setMax, max, setMin, min, required, placeholder } = attributes;\r\n\tconst messages = useMessages();\r\n\tconst theme = useBlockTheme( attributes.themeId );\r\n\tconst answersColor = tinyColor( theme.answersColor );\r\n\r\n\tconst checkfieldValidation = ( value ) => {\r\n\t\tif ( required === true && value !== 0 && ( ! value || value === '' ) ) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.required' ] );\r\n\t\t} else if ( setMax && max > 0 && value > max ) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.maxNum' ] );\r\n\t\t} else if ( setMin && min >= 0 && value < min ) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.minNum' ] );\r\n\t\t} else {\r\n\t\t\tsetIsValid( true );\r\n\t\t\tsetValidationErr( null );\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( isPreview || ! isReviewing ) checkfieldValidation( val );\r\n\t}, [ attributes ] );\r\n\r\n\tconst changeHandler = ( e ) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst value = e.target.value;\r\n\t\tif ( isNaN( value ) ) {\r\n\t\t\tblockWithError( 'Numbers only!' );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( value !== 0 && ! value ) {\r\n\t\t\tsetVal( '' );\r\n\t\t\tcheckfieldValidation( '' );\r\n\t\t\tsetIsAnswered( false );\r\n\t\t} else {\r\n\t\t\tconst newVal = value == 0 ? 0 : parseInt( value );\r\n\t\t\tsetVal( newVal );\r\n\t\t\tshowErrMsg( false );\r\n\t\t\tcheckfieldValidation( newVal );\r\n\t\t\tsetIsAnswered( true );\r\n\t\t}\r\n\t};\r\n\r\n\tlet specialProps = {};\r\n\tif ( isTouchScreen ) {\r\n\t\tspecialProps = {\r\n\t\t\ttype: 'number',\r\n\t\t};\r\n\t}\r\n\treturn (\r\n\t\t<input\r\n\t\t\t{ ...specialProps }\r\n\t\t\tref={ inputRef }\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\tcss`\r\n\t\t\t\t\t& {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\tpadding-bottom: 8px;\r\n\t\t\t\t\t\tborder-radius: 0 !important;\r\n\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\tbackground-color: transparent !important;\r\n\t\t\t\t\t\ttransition: box-shadow 0.1s ease-out 0s;\r\n\t\t\t\t\t\tbox-shadow: ${ answersColor.setAlpha( 0.3 ).toString() }\r\n\t\t\t\t\t\t\t0px 1px !important;\r\n\r\n\t\t\t\t\t\t-moz-appearance: textfield;\r\n\t\t\t\t\t\t&::-webkit-outer-spin-button,\r\n\t\t\t\t\t\t&::-webkit-inner-spin-button {\r\n\t\t\t\t\t\t\t-webkit-appearance: none;\r\n\t\t\t\t\t\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\tbox-shadow: ${ answersColor.setAlpha( 1 ).toString() }\r\n\t\t\t\t\t\t\t0px 2px !important;\r\n\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\toutline: none !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t`\r\n\t\t\t) }\r\n\t\t\tid={ 'number-' + id }\r\n\t\t\tplaceholder={\r\n\t\t\t\tplaceholder === false\r\n\t\t\t\t\t? messages[ 'block.number.placeholder' ]\r\n\t\t\t\t\t: placeholder\r\n\t\t\t}\r\n\t\t\tonChange={ changeHandler }\r\n\t\t\tvalue={ val || val === 0 ? val : '' }\r\n\t\t\tonFocus={ () => {\r\n\t\t\t\tif ( isTouchScreen ) {\r\n\t\t\t\t\tsetFooterDisplay( false );\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\tonWheel={ ( e ) => e.target.blur() }\r\n\t\t\tonBlur={ () => {\r\n\t\t\t\tif ( isTouchScreen ) {\r\n\t\t\t\t\tsetFooterDisplay( true );\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\tautoComplete=\"off\"\r\n\t\t/>\r\n\t);\r\n};\r\nexport default NumberOutput;\r\n"],"mappings":"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"}