{"version":3,"names":["_data","require","_defaultMergeTag","_interopRequireDefault","FieldMergeTag","_ref","modifier","fieldMergeTagValue","useSelect","select","fieldVal","getFieldAnswerVal","blockTypes","getBlockTypes","walkPath","getWalkPath","allBlocks","forEach","block","innerBlocks","innerBlock","push","find","a","id","blockType","name","mergeTag","_element","createElement","fieldId","val","attributes","default","Fragment","_default","exports"],"sources":["@quillforms/renderer-core/src/components/merge-tag/field.tsx"],"sourcesContent":["/* eslint-disable @wordpress/no-unused-vars-before-return */\r\n/* eslint-disable no-nested-ternary */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport DefaultMergeTag from './default-merge-tag';\r\nimport { FormBlocks } from '@quillforms/types/src';\r\ninterface Props {\r\n\tmodifier: string;\r\n}\r\nconst FieldMergeTag: React.FC< Props > = ( { modifier } ) => {\r\n\tconst { fieldMergeTagValue } = useSelect( ( select ) => {\r\n\t\tconst fieldVal = select( 'quillForms/renderer-core' ).getFieldAnswerVal(\r\n\t\t\tmodifier\r\n\t\t);\r\n\t\tconst blockTypes = select( 'quillForms/blocks' ).getBlockTypes();\r\n\t\tconst walkPath = select( 'quillForms/renderer-core' ).getWalkPath();\r\n\t\tconst allBlocks = [] as FormBlocks;\r\n\t\twalkPath.forEach( ( block ) => {\r\n\t\t\tif ( block?.innerBlocks ) {\r\n\t\t\t\tblock.innerBlocks.forEach( ( innerBlock ) => {\r\n\t\t\t\t\tallBlocks.push( innerBlock );\r\n\t\t\t\t} );\r\n\t\t\t} else {\r\n\t\t\t\tallBlocks.push( block );\r\n\t\t\t}\r\n\t\t} );\r\n\t\tconst block = allBlocks.find( ( a ) => a.id === modifier );\r\n\t\tif ( ! block )\r\n\t\t\treturn {\r\n\t\t\t\tfieldMergeTagValue: null,\r\n\t\t\t};\r\n\t\tconst blockType = blockTypes[ block.name ];\r\n\t\treturn {\r\n\t\t\tfieldMergeTagValue: blockType ? (\r\n\t\t\t\tblockType?.mergeTag && fieldVal ? (\r\n\t\t\t\t\t// @ts-expect-error\r\n\t\t\t\t\t<blockType.mergeTag\r\n\t\t\t\t\t\tfieldId={ modifier }\r\n\t\t\t\t\t\tval={ fieldVal }\r\n\t\t\t\t\t\tattributes={ block.attributes }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<DefaultMergeTag val={ fieldVal } />\r\n\t\t\t\t)\r\n\t\t\t) : null,\r\n\t\t};\r\n\t}, [] );\r\n\r\n\treturn <>{ fieldMergeTagValue }</>;\r\n};\r\n\r\nexport default FieldMergeTag;\r\n"],"mappings":";;;;;;;;AAEA,IAAAA,KAAA,GAAAC,OAAA;AAKA,IAAAC,gBAAA,GAAAC,sBAAA,CAAAF,OAAA;AAPA;AACA;;AAGA;AACA;AACA;;AAMA,MAAMG,aAAgC,GAAGC,IAAA,IAAoB;EAAA,IAAlB;IAAEC;EAAS,CAAC,GAAAD,IAAA;EACtD,MAAM;IAAEE;EAAmB,CAAC,GAAG,IAAAC,eAAS,EAAIC,MAAM,IAAM;IACvD,MAAMC,QAAQ,GAAGD,MAAM,CAAE,0BAA0B,CAAE,CAACE,iBAAiB,CACtEL,QAAQ,CACR;IACD,MAAMM,UAAU,GAAGH,MAAM,CAAE,mBAAmB,CAAE,CAACI,aAAa,EAAE;IAChE,MAAMC,QAAQ,GAAGL,MAAM,CAAE,0BAA0B,CAAE,CAACM,WAAW,EAAE;IACnE,MAAMC,SAAS,GAAG,EAAgB;IAClCF,QAAQ,CAACG,OAAO,CAAIC,KAAK,IAAM;MAC9B,IAAKA,KAAK,EAAEC,WAAW,EAAG;QACzBD,KAAK,CAACC,WAAW,CAACF,OAAO,CAAIG,UAAU,IAAM;UAC5CJ,SAAS,CAACK,IAAI,CAAED,UAAU,CAAE;QAC7B,CAAC,CAAE;MACJ,CAAC,MAAM;QACNJ,SAAS,CAACK,IAAI,CAAEH,KAAK,CAAE;MACxB;IACD,CAAC,CAAE;IACH,MAAMA,KAAK,GAAGF,SAAS,CAACM,IAAI,CAAIC,CAAC,IAAMA,CAAC,CAACC,EAAE,KAAKlB,QAAQ,CAAE;IAC1D,IAAK,CAAEY,KAAK,EACX,OAAO;MACNX,kBAAkB,EAAE;IACrB,CAAC;IACF,MAAMkB,SAAS,GAAGb,UAAU,CAAEM,KAAK,CAACQ,IAAI,CAAE;IAC1C,OAAO;MACNnB,kBAAkB,EAAEkB,SAAS,GAC5BA,SAAS,EAAEE,QAAQ,IAAIjB,QAAQ;MAC9B;MACA,IAAAkB,QAAA,CAAAC,aAAA,EAACJ,SAAS,CAACE,QAAQ;QAClBG,OAAO,EAAGxB,QAAU;QACpByB,GAAG,EAAGrB,QAAU;QAChBsB,UAAU,EAAGd,KAAK,CAACc;MAAY,EAC9B,GAEF,IAAAJ,QAAA,CAAAC,aAAA,EAAC3B,gBAAA,CAAA+B,OAAe;QAACF,GAAG,EAAGrB;MAAU,EACjC,GACE;IACL,CAAC;EACF,CAAC,EAAE,EAAE,CAAE;EAEP,OAAO,IAAAkB,QAAA,CAAAC,aAAA,EAAAD,QAAA,CAAAM,QAAA,QAAI3B,kBAAkB,CAAK;AACnC,CAAC;AAAC,IAAA4B,QAAA,GAEa/B,aAAa;AAAAgC,OAAA,CAAAH,OAAA,GAAAE,QAAA"}