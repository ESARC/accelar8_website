{"version":3,"names":["_element","require","_data","_hooks","_classnames","_interopRequireDefault","_reactSwipeable","_lethargy","_fieldRender","_hooks2","lastScrollDate","lethargy","Lethargy","FieldsWrapper","_ref","applyLogic","isActive","beforeGoingNext","useFormContext","blocks","useBlocks","blockTypes","useBlockTypes","logic","useLogic","hiddenFields","useHiddenFields","settings","useFormSettings","ref","useRef","swiper","useSelect","select","getSwiperState","walkPath","currentBlockId","nextBlockId","prevBlockId","lastActiveBlockId","canSwipeNext","canSwipePrev","isAnimating","isCurrentBlockSafeToSwipe","answers","getAnswers","currentBlockIndex","findIndex","block","id","currentBlockName","name","currentBlockType","lastActiveBlockIndex","isTouchScreen","window","navigator","maxTouchPoints","msMaxTouchPoints","getFieldsToRender","fieldIds","filteredBlocks","filter","isPending","forEach","push","fieldsToRender","fields","setSwiper","goNext","goPrev","goToBlock","setIsCurrentBlockSafeToSwipe","setIsFieldValid","setIsFieldPending","setFieldValidationErr","useDispatch","goNextReally","setIsPending","val","isCurrentBlockValid","supports","innerBlocks","hasValidFields","editable","isValidField","useEffect","isFirstField","length","isLastField","handlers","useSwipeable","onSwiping","e","swipingHandler","preventDefaultTouchmoveEvent","trackMouse","trackTouch","delta","touch","arguments","undefined","disableWheelSwiping","deltaY","animationDirection","deltaX","lethargyCheck","check","now","Date","getTime","timeDelay","dir","timer","setTimeout","clearTimeout","doAction","createElement","onWheel","className","classNames","active","map","field","index","default","key","shouldBeRendered","includes","next","_default","exports"],"sources":["@quillforms/renderer-core/src/components/fields-wrapper/index.tsx"],"sourcesContent":["/* eslint-disable no-nested-ternary */\r\n/**\r\n * Wordpress Dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useEffect, useRef } from '@wordpress/element';\r\nimport { doAction } from '@wordpress/hooks';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport classNames from 'classnames';\r\nimport { useSwipeable, SwipeEventData } from 'react-swipeable';\r\nimport { Lethargy } from 'lethargy';\r\nimport type React from 'react';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport FieldRender from '../field-render';\r\nimport {\r\n\tuseBlocks,\r\n\tuseBlockTypes,\r\n\tuseFormSettings,\r\n\tuseLogic,\r\n\tuseHiddenFields,\r\n\tuseFormContext,\r\n} from '../../hooks';\r\n\r\nlet lastScrollDate = 0;\r\nconst lethargy = new Lethargy();\r\n\r\ninterface Props {\r\n\tapplyLogic: boolean;\r\n\tisActive: boolean;\r\n}\r\n\r\nconst FieldsWrapper: React.FC< Props > = ( { applyLogic, isActive } ) => {\r\n\tconst { beforeGoingNext } = useFormContext();\r\n\tconst blocks = useBlocks();\r\n\tconst blockTypes = useBlockTypes();\r\n\tconst logic = useLogic();\r\n\tconst hiddenFields = useHiddenFields();\r\n\tconst settings = useFormSettings();\r\n\tconst ref = useRef< HTMLDivElement | null >( null );\r\n\tconst { swiper } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tswiper: select( 'quillForms/renderer-core' ).getSwiperState(),\r\n\t\t};\r\n\t} );\r\n\r\n\tconst {\r\n\t\twalkPath,\r\n\t\tcurrentBlockId,\r\n\t\tnextBlockId,\r\n\t\tprevBlockId,\r\n\t\tlastActiveBlockId,\r\n\t\tcanSwipeNext,\r\n\t\tcanSwipePrev,\r\n\t\tisAnimating,\r\n\t\tisCurrentBlockSafeToSwipe,\r\n\t} = swiper;\r\n\r\n\tconst { answers } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tanswers: select( 'quillForms/renderer-core' ).getAnswers(),\r\n\t\t};\r\n\t} );\r\n\tconst currentBlockIndex = walkPath.findIndex(\r\n\t\t( block ) => block.id === currentBlockId\r\n\t);\r\n\r\n\tconst currentBlockName = walkPath[ currentBlockIndex ]?.name;\r\n\r\n\tconst currentBlockType = blockTypes?.[ currentBlockName ];\r\n\r\n\tconst lastActiveBlockIndex = walkPath.findIndex(\r\n\t\t( block ) => block.id === lastActiveBlockId\r\n\t);\r\n\r\n\tconst isTouchScreen =\r\n\t\t( typeof window !== 'undefined' && 'ontouchstart' in window ) ||\r\n\t\t( typeof navigator !== 'undefined' && navigator.maxTouchPoints > 0 ) || // @ts-expect-error\r\n\t\t( typeof navigator !== 'undefined' && navigator.msMaxTouchPoints > 0 );\r\n\r\n\tconst getFieldsToRender = (): string[] => {\r\n\t\tconst fieldIds: string[] = [];\r\n\t\tconst filteredBlocks = walkPath.filter(\r\n\t\t\t( block ) =>\r\n\t\t\t\tanswers[ block.id ]?.isPending ||\r\n\t\t\t\tblock.id === currentBlockId ||\r\n\t\t\t\t( ! isTouchScreen && block.id === nextBlockId ) ||\r\n\t\t\t\t( ! isTouchScreen && block.id === prevBlockId ) ||\r\n\t\t\t\t( ! isTouchScreen && block.id === lastActiveBlockId )\r\n\t\t);\r\n\t\tfilteredBlocks.forEach( ( block ) => {\r\n\t\t\tif (\r\n\t\t\t\tblock.name !== 'welcome-screen' &&\r\n\t\t\t\tblock.name !== 'thankyou-screen'\r\n\t\t\t) {\r\n\t\t\t\tfieldIds.push( block.id );\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn fieldIds;\r\n\t};\r\n\r\n\tconst fieldsToRender = getFieldsToRender();\r\n\tconst fields = walkPath.filter(\r\n\t\t( block ) =>\r\n\t\t\tblock.name !== 'welcome-screen' && block.name !== 'thankyou-screen'\r\n\t);\r\n\r\n\tconst {\r\n\t\tsetSwiper,\r\n\t\tgoNext,\r\n\t\tgoPrev,\r\n\t\tgoToBlock,\r\n\t\tsetIsCurrentBlockSafeToSwipe,\r\n\t\tsetIsFieldValid,\r\n\t\tsetIsFieldPending,\r\n\t\tsetFieldValidationErr,\r\n\t} = useDispatch( 'quillForms/renderer-core' );\r\n\r\n\tconst goNextReally = async () => {\r\n\t\tif ( answers[ currentBlockIndex ]?.isPending ) return;\r\n\t\tif ( beforeGoingNext && currentBlockId ) {\r\n\t\t\tawait beforeGoingNext( {\r\n\t\t\t\tanswers,\r\n\t\t\t\tcurrentBlockId,\r\n\t\t\t\tsetIsFieldValid,\r\n\t\t\t\tsetFieldValidationErr,\r\n\t\t\t\tsetIsCurrentBlockSafeToSwipe,\r\n\t\t\t\tgoToBlock,\r\n\t\t\t\tgoNext,\r\n\t\t\t\tsetIsPending: ( val ) =>\r\n\t\t\t\t\tsetIsFieldPending( currentBlockId, val ),\r\n\t\t\t} );\r\n\t\t} else {\r\n\t\t\tgoNext();\r\n\t\t}\r\n\t};\r\n\r\n\tconst { isCurrentBlockValid } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tisCurrentBlockValid: currentBlockType?.supports?.innerBlocks\r\n\t\t\t\t? select( 'quillForms/renderer-core' )?.hasValidFields(\r\n\t\t\t\t\t\t// @ts-expect-error\r\n\t\t\t\t\t\tcurrentBlockId\r\n\t\t\t\t  )\r\n\t\t\t\t: currentBlockType?.supports?.editable\r\n\t\t\t\t? select( 'quillForms/renderer-core' )?.isValidField(\r\n\t\t\t\t\t\t// @ts-expect-error\r\n\t\t\t\t\t\tcurrentBlockId\r\n\t\t\t\t  )\r\n\t\t\t\t: true,\r\n\t\t};\r\n\t} );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( isCurrentBlockSafeToSwipe ) setIsCurrentBlockSafeToSwipe( true );\r\n\t}, [ isCurrentBlockValid ] );\r\n\tconst isFirstField =\r\n\t\twalkPath?.length > 0 && walkPath[ 0 ].id === currentBlockId;\r\n\r\n\tconst isLastField =\r\n\t\twalkPath?.length &&\r\n\t\tcurrentBlockId === walkPath[ walkPath.length - 1 ].id;\r\n\r\n\tconst handlers = useSwipeable( {\r\n\t\tonSwiping: ( e ) => {\r\n\t\t\tswipingHandler( e, true );\r\n\t\t},\r\n\t\tpreventDefaultTouchmoveEvent: false,\r\n\t\ttrackMouse: false,\r\n\t\ttrackTouch: true,\r\n\t\tdelta: 70,\r\n\t} );\r\n\r\n\t// Mouse Wheel Handler\r\n\tconst swipingHandler = (\r\n\t\te: React.WheelEvent | SwipeEventData,\r\n\t\ttouch = false\r\n\t) => {\r\n\t\tif ( settings?.disableWheelSwiping ) return;\r\n\t\tlet delta = e.deltaY;\r\n\t\tif ( settings?.animationDirection === 'horizontal' ) {\r\n\t\t\tdelta = e.deltaX;\r\n\t\t}\r\n\t\tif ( swiper.isAnimating ) return;\r\n\t\tconst lethargyCheck = lethargy.check( e );\r\n\t\tconst now = new Date().getTime();\r\n\t\tlet timeDelay = 900;\r\n\t\tif ( touch ) timeDelay = 500;\r\n\t\tif (\r\n\t\t\tlethargyCheck === false ||\r\n\t\t\tisAnimating ||\r\n\t\t\t( lastScrollDate && now - lastScrollDate < timeDelay )\r\n\t\t)\r\n\t\t\treturn;\r\n\t\tif (\r\n\t\t\tcanSwipePrev &&\r\n\t\t\t( ( delta < -50 && ! touch ) ||\r\n\t\t\t\t( touch &&\r\n\t\t\t\t\tdelta > 50 &&\r\n\t\t\t\t\t( e as SwipeEventData ).dir === 'Down' ) ) &&\r\n\t\t\t! isFirstField\r\n\t\t) {\r\n\t\t\t// Scroll up\r\n\t\t\tlastScrollDate = new Date().getTime();\r\n\t\t\tgoPrev();\r\n\t\t} else if (\r\n\t\t\tcanSwipeNext &&\r\n\t\t\t( ( delta < -50 &&\r\n\t\t\t\ttouch &&\r\n\t\t\t\t( e as SwipeEventData ).dir === 'Up' ) ||\r\n\t\t\t\t( ! touch && delta > 50 ) ) &&\r\n\t\t\t! isLastField\r\n\t\t) {\r\n\t\t\tlastScrollDate = new Date().getTime();\r\n\t\t\t// Scroll down\r\n\t\t\tif ( isCurrentBlockValid ) {\r\n\t\t\t\tgoNextReally();\r\n\t\t\t} else {\r\n\t\t\t\tsetIsCurrentBlockSafeToSwipe( false );\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect( (): void | ( () => void ) => {\r\n\t\tif ( isAnimating ) {\r\n\t\t\tconst timer = setTimeout( () => {\r\n\t\t\t\tsetSwiper( {\r\n\t\t\t\t\tisAnimating: false,\r\n\t\t\t\t} );\r\n\t\t\t}, 600 );\r\n\t\t\treturn () => clearTimeout( timer );\r\n\t\t}\r\n\t}, [ swiper ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( applyLogic && isActive ) {\r\n\t\t\tdoAction(\r\n\t\t\t\t'QuillForms.RendererCore.LogicApply',\r\n\t\t\t\tblocks,\r\n\t\t\t\tblockTypes,\r\n\t\t\t\tlogic,\r\n\t\t\t\thiddenFields\r\n\t\t\t);\r\n\t\t}\r\n\t}, [ answers, currentBlockId ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( applyLogic && isActive ) {\r\n\t\t\tsetSwiper( {\r\n\t\t\t\tcurrentBlockId: blocks[ 0 ].id,\r\n\t\t\t\tprevBlockId: undefined,\r\n\t\t\t\tcanSwipePrev: false,\r\n\t\t\t\tlastActiveBlockId: undefined,\r\n\t\t\t} );\r\n\t\t\tdoAction(\r\n\t\t\t\t'QuillForms.RendererCore.LogicApply',\r\n\t\t\t\tblocks,\r\n\t\t\t\tblockTypes,\r\n\t\t\t\tlogic,\r\n\t\t\t\thiddenFields\r\n\t\t\t);\r\n\t\t}\r\n\t\tif ( ! applyLogic ) {\r\n\t\t\tdoAction( 'QuillForms.RendererCore.LogicTurnOff' );\r\n\t\t}\r\n\t}, [ applyLogic ] );\r\n\r\n\t// const isThereNextField =\r\n\t// \tfields.filter( ( field ) => field.id === nextBlockId ).length === 0;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tonWheel={ swipingHandler }\r\n\t\t\tclassName={ classNames( 'renderer-core-fields-wrapper', {\r\n\t\t\t\tactive: isActive,\r\n\t\t\t\t'is-moving-up':\r\n\t\t\t\t\tisAnimating && currentBlockIndex < lastActiveBlockIndex,\r\n\t\t\t\t'is-moving-down':\r\n\t\t\t\t\tisAnimating && currentBlockIndex > lastActiveBlockIndex,\r\n\t\t\t} ) }\r\n\t\t\tref={ ref }\r\n\t\t\taria-hidden={ isActive ? false : true }\r\n\t\t>\r\n\t\t\t<div { ...handlers }>\r\n\t\t\t\t{ fields.map( ( field, index ) => {\r\n\t\t\t\t\tconst isActive = currentBlockId === field.id;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<FieldRender\r\n\t\t\t\t\t\t\tkey={ `${ field.id }` }\r\n\t\t\t\t\t\t\tid={ field.id }\r\n\t\t\t\t\t\t\tshouldBeRendered={ fieldsToRender.includes(\r\n\t\t\t\t\t\t\t\tfield.id\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tisActive={ isActive }\r\n\t\t\t\t\t\t\tisCurrentBlockSafeToSwipe={\r\n\t\t\t\t\t\t\t\tisActive ? isCurrentBlockSafeToSwipe : true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tisLastField={\r\n\t\t\t\t\t\t\t\t// isThereNextField &&\r\n\t\t\t\t\t\t\t\tindex === fields.length - 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnext={ () => {\r\n\t\t\t\t\t\t\t\tif ( isCurrentBlockValid ) {\r\n\t\t\t\t\t\t\t\t\tgoNextReally();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetIsCurrentBlockSafeToSwipe( false );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default FieldsWrapper;\r\n"],"mappings":"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"}