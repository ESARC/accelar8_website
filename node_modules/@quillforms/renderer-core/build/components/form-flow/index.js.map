{"version":3,"names":["_element","require","_config","_interopRequireDefault","_utils","_data","_emotion","_classnames","_welcomeScreensWrapper","_thankyouScreensWrapper","_fieldsWrapper","_formFooter","_useGeneralTheme","_useBlocks","_paymentModal","_useCurrentTheme","_lodash","_hooks","FormFlow","_ref","_useFormSettings$show","applyLogic","blocks","useBlocks","formObj","customFonts","useFormContext","generalTheme","useGeneralTheme","currentTheme","useCurrentTheme","fonts","configApi","getFonts","showLettersOnAnswers","useFormSettings","font","questionsLabelFont","questionsDescriptionFont","fontFamilies","push","fontTypes","fontUrls","fontFace","forEach","fontFamily","fontIndex","fontType","fontLowerString","replace","toLowerCase","customFont","find","title","size","properties","variations","variation","fontStyle","style","fontWeight","weight","src","map","type","files","undefined","filter","urlLine","join","useEffect","head","document","link","createElement","rel","fontUrl","href","existingLinkEl","querySelector","appendChild","setIsFocused","useDispatch","ref","useRef","isWelcomeScreenActive","isThankyouScreenActive","paymentData","useSelect","select","store","getPaymentData","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","keydownHandler","e","key","preventDefault","window","backgroundImageCSS","backgroundImage","parseFloat","backgroundImageFocalPoint","x","y","className","classnames","css","customCSS","tabIndex","onMouseDown","Global","styles","backgroundColor","fontSize","lg","fontLineHeight","sm","questionsColor","questionsLabelFontSize","questionsLabelLineHeight","questionsDescriptionFontSize","questionsDescriptionLineHeight","textInputAnswers","onClick","logo","alt","length","Fragment","default","isActive","data","_default","exports"],"sources":["@quillforms/renderer-core/src/components/form-flow/index.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\r\n/* eslint-disable jsx-a11y/no-static-element-interactions */\r\n/* eslint-disable no-nested-ternary */\r\n/**\r\n * Quill Forms Dependencies\r\n */\r\nimport configApi from '@quillforms/config';\r\nimport { Global } from \"@quillforms/utils\";\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { Fragment, useEffect, useRef } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport WelcomeScreensWrapper from '../welcome-screens-wrapper';\r\nimport ThankyouScreensWrapper from '../thankyou-screens-wrapper';\r\nimport FieldsWrapper from '../fields-wrapper';\r\nimport FormFooter from '../form-footer';\r\nimport useGeneralTheme from '../../hooks/use-general-theme';\r\nimport useBlocks from '../../hooks/use-blocks';\r\nimport PaymentModal from '../payment-modal';\r\nimport useCurrentTheme from '../../hooks/use-current-theme';\r\nimport { forEach, size } from 'lodash';\r\nimport { useFormContext, useFormSettings } from '../../hooks';\r\n\r\ninterface Props {\r\n\tapplyLogic: boolean;\r\n}\r\nconst FormFlow: React.FC<Props> = ({ applyLogic }) => {\r\n\tconst blocks = useBlocks();\r\n\tconst { formObj, customFonts } = useFormContext();\r\n\tconst generalTheme = useGeneralTheme();\r\n\tconst currentTheme = useCurrentTheme();\r\n\tconst fonts = configApi.getFonts();\r\n\tconst showLettersOnAnswers =\r\n\t\tuseFormSettings()?.showLettersOnAnswers ?? true;\r\n\r\n\tconst { font, questionsLabelFont, questionsDescriptionFont } = currentTheme;\r\n\r\n\tconst fontFamilies = [font];\r\n\tif (questionsLabelFont !== 'inherit') {\r\n\t\tfontFamilies.push(questionsLabelFont);\r\n\t}\r\n\tif (questionsDescriptionFont !== 'inherit') {\r\n\t\tfontFamilies.push(questionsDescriptionFont);\r\n\t}\r\n\tconst fontTypes = [\r\n\t\tfonts[font],\r\n\t\tfonts[questionsLabelFont],\r\n\t\tfonts[questionsDescriptionFont],\r\n\t];\r\n\tconst fontUrls: string[] = [];\r\n\tconst fontFace = [] as any[];\r\n\tforEach(fontFamilies, (fontFamily, fontIndex) => {\r\n\t\tconst fontType = fontTypes[fontIndex];\r\n\t\tif (fontType === 'googlefonts' || fontType === 'earlyaccess') {\r\n\t\t\tswitch (fontType) {\r\n\t\t\t\tcase 'googlefonts':\r\n\t\t\t\t\tfontUrls.push(\r\n\t\t\t\t\t\t'https://fonts.googleapis.com/css?family=' +\r\n\t\t\t\t\t\tfontFamily +\r\n\t\t\t\t\t\t':100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'earlyaccess':\r\n\t\t\t\t\tconst fontLowerString = fontFamily\r\n\t\t\t\t\t\t.replace(/\\s+/g, '')\r\n\t\t\t\t\t\t.toLowerCase();\r\n\t\t\t\t\tfontUrls.push(\r\n\t\t\t\t\t\t'https://fonts.googleapis.com/earlyaccess/' +\r\n\t\t\t\t\t\tfontLowerString +\r\n\t\t\t\t\t\t'.css'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst customFont = customFonts?.find(\r\n\t\t\t\t(font) => font.title === fontFamily\r\n\t\t\t);\r\n\t\t\tif (customFont && size(customFont?.properties?.variations) > 0) {\r\n\t\t\t\tforEach(customFont?.properties?.variations, (variation) => {\r\n\t\t\t\t\tfontFace.push({\r\n\t\t\t\t\t\t'@font-face': {\r\n\t\t\t\t\t\t\tfontFamily,\r\n\t\t\t\t\t\t\tfontStyle: variation.style,\r\n\t\t\t\t\t\t\tfontWeight: variation.weight,\r\n\t\t\t\t\t\t\tsrc: `${['woff2', 'woff', 'ttf'].map((type) => {\r\n\t\t\t\t\t\t\t\tif (variation?.files?.[type]) {\r\n\t\t\t\t\t\t\t\t\treturn `url('${variation.files[type]}') format('${type}')`\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t\t\t\t}).filter(urlLine => typeof urlLine !== 'undefined').join(',')\r\n\t\t\t\t\t\t\t\t}`\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst head = document.head;\r\n\t\tconst link = document.createElement('link');\r\n\r\n\t\tlink.type = 'text/css';\r\n\t\tlink.rel = 'stylesheet';\r\n\t\tif (size(fontUrls) > 0) {\r\n\t\t\tforEach(fontUrls, (fontUrl) => {\r\n\t\t\t\tlink.href = fontUrl;\r\n\t\t\t\tconst existingLinkEl = document.querySelector(\r\n\t\t\t\t\t`link[href='${link.href}']`\r\n\t\t\t\t);\r\n\t\t\t\tif (!existingLinkEl) head.appendChild(link);\r\n\t\t\t});\r\n\t\t}\r\n\t}, [font, questionsLabelFont, questionsDescriptionFont]);\r\n\r\n\tconst { setIsFocused } = useDispatch('quillForms/renderer-core');\r\n\tconst ref = useRef<any>(null);\r\n\tconst { isWelcomeScreenActive, isThankyouScreenActive, paymentData } =\r\n\t\tuseSelect((select) => {\r\n\t\t\tconst store = select('quillForms/renderer-core');\r\n\t\t\treturn {\r\n\t\t\t\tisThankyouScreenActive: store.isThankyouScreenActive(),\r\n\t\t\t\tisWelcomeScreenActive: store.isWelcomeScreenActive(),\r\n\t\t\t\tpaymentData: store.getPaymentData(),\r\n\t\t\t};\r\n\t\t});\r\n\r\n\tuseEffect(() => {\r\n\t\t/**\r\n\t\t * Alert if clicked on outside of element\r\n\t\t *\r\n\t\t * @param  event\r\n\t\t */\r\n\t\tfunction handleClickOutside(event) {\r\n\t\t\tif (ref.current && !ref?.current?.contains(event.target)) {\r\n\t\t\t\tsetIsFocused(false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Bind the event listener\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\t// Unbind the event listener on clean up\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t}, [ref]);\r\n\r\n\tconst keydownHandler = (e) => {\r\n\t\t// Prevent any keyboard event by default in case of any tab event in general.\r\n\t\tif (e.key === 'Tab') {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('keydown', keydownHandler);\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('keydown', keydownHandler);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tlet backgroundImageCSS = '';\r\n\tif (generalTheme.backgroundImage && generalTheme.backgroundImage) {\r\n\t\tbackgroundImageCSS = `background-image: url('${generalTheme.backgroundImage\r\n\t\t\t}');\r\n\t\t\tbackground-size: cover;\r\n\t\t\tbackground-position: ${\r\n\t\t\t// @ts-expect-error\r\n\t\t\tparseFloat(generalTheme.backgroundImageFocalPoint?.x) * 100\r\n\t\t\t}%\r\n\t\t\t${\r\n\t\t\t// @ts-expect-error\r\n\t\t\tparseFloat(generalTheme.backgroundImageFocalPoint?.y) * 100\r\n\t\t\t}%;\r\n\r\n\t\t\tbackground-repeat: no-repeat;\r\n\t\t`;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={ref}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tcss`\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t-webkit-font-smoothing: antialiased;\r\n\t\t\t\t\t${backgroundImageCSS}\r\n\t\t\t\t\t${formObj?.customCSS}\r\n\t\t\t\t`,\r\n\t\t\t\t'renderer-core-form-flow__wrapper'\r\n\t\t\t)}\r\n\t\t\ttabIndex={0}\r\n\t\t\tonMouseDown={() => setIsFocused(true)}\r\n\t\t>\r\n\t\t\t<Global\r\n\t\t\t\tstyles={[...fontFace]}\r\n\t\t\t/>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t'renderer-core-form-flow',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\tbackground: ${generalTheme.backgroundColor};\r\n\t\t\t\t\t\t@media ( min-width: 768px ) {\r\n\t\t\t\t\t\t\tfont-size: ${generalTheme.fontSize.lg};\r\n\t\t\t\t\t\t\tline-height: ${generalTheme.fontLineHeight.lg};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t@media ( max-width: 767px ) {\r\n\t\t\t\t\t\t\tfont-size: ${generalTheme.fontSize.sm};\r\n\t\t\t\t\t\t\tline-height: ${generalTheme.fontLineHeight.sm};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfont-family: ${generalTheme.font};\r\n\t\t\t\t\t\t.renderer-components-block-label {\r\n\t\t\t\t\t\t\tcolor: ${generalTheme.questionsColor};\r\n\t\t\t\t\t\t\tfont-family: ${generalTheme.questionsLabelFont};\r\n\t\t\t\t\t\t\t@media ( min-width: 768 ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsLabelFontSize.lg};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsLabelLineHeight.lg};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t@media ( max-width: 767px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsLabelFontSize.sm};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsLabelLineHeight.sm};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.renderer-components-block-description {\r\n\t\t\t\t\t\t\tfont-family: ${generalTheme.questionsDescriptionFont};\r\n\r\n\t\t\t\t\t\t\t@media ( min-width: 768px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsDescriptionFontSize.lg};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsDescriptionLineHeight.lg};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t@media ( max-width: 767px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsDescriptionFontSize.sm};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsDescriptionLineHeight.sm};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\ttextarea {\r\n\t\t\t\t\t\t\t@media ( min-width: 768px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme.textInputAnswers\r\n\t\t\t\t\t\t\t.lg};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme.textInputAnswers\r\n\t\t\t\t\t\t\t.lg};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t@media ( max-width: 767px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme.textInputAnswers\r\n\t\t\t\t\t\t\t.sm};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme.textInputAnswers\r\n\t\t\t\t\t\t\t.sm};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t${!showLettersOnAnswers &&\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t.pictureChoice__optionKey, .multipleChoice__optionKey {\r\n\t\t\t\t\t\t\t\tdisplay: none !important;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t` }\r\n\t\t\t\t\t`\r\n\t\t\t\t)}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetIsFocused(true);\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{generalTheme?.logo?.src && (\r\n\t\t\t\t\t<div className=\"renderer-core-form-brand-logo\">\r\n\t\t\t\t\t\t<img src={generalTheme.logo.src} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{blocks.length > 0 && (\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t{isWelcomeScreenActive && <WelcomeScreensWrapper />}\r\n\t\t\t\t\t\t{!paymentData && (\r\n\t\t\t\t\t\t\t<FieldsWrapper\r\n\t\t\t\t\t\t\t\tisActive={\r\n\t\t\t\t\t\t\t\t\t!isWelcomeScreenActive &&\r\n\t\t\t\t\t\t\t\t\t!isThankyouScreenActive\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tapplyLogic={applyLogic}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{isThankyouScreenActive && <ThankyouScreensWrapper />}\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t)}\r\n\t\t\t\t{!paymentData && <FormFooter />}\r\n\t\t\t\t{!!paymentData && <PaymentModal data={paymentData} />}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default FormFlow;\r\n"],"mappings":"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"}