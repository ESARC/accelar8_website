{"version":3,"names":["_data","require","_classnames","_interopRequireDefault","_emotion","_hooks","_downIcon","_upIcon","FieldNavigation","_ref","shouldFooterBeDisplayed","goNext","goPrev","setIsCurrentBlockSafeToSwipe","setIsFieldValid","setIsFieldPending","setFieldValidationErr","goToBlock","useDispatch","beforeGoingNext","useFormContext","theme","useCurrentTheme","settings","useFormSettings","currentBlockId","walkPath","blockTypes","useSelect","select","getCurrentBlockId","getWalkPath","getBlockTypes","currentBlockIndex","findIndex","block","id","currentBlockName","name","currentBlockType","isCurrentBlockValid","answers","getAnswers","supports","innerBlocks","hasValidFields","editable","isValidField","goNextReally","isPending","setIsPending","val","_element","createElement","className","classnames","hidden","rotate","animationDirection","css","buttonsBgColor","onClick","default","length","_default","exports"],"sources":["@quillforms/renderer-core/src/components/field-navigation/index.tsx"],"sourcesContent":["/**\r\n * WordPress Dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport classnames from 'classnames';\r\nimport { css } from 'emotion';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport { useCurrentTheme, useFormContext, useFormSettings } from '../../hooks';\r\nimport DownIcon from './down-icon';\r\nimport UpIcon from './up-icon';\r\n\r\nconst FieldNavigation = ( { shouldFooterBeDisplayed } ) => {\r\n\tconst {\r\n\t\tgoNext,\r\n\t\tgoPrev,\r\n\t\tsetIsCurrentBlockSafeToSwipe,\r\n\t\tsetIsFieldValid,\r\n\t\tsetIsFieldPending,\r\n\t\tsetFieldValidationErr,\r\n\t\tgoToBlock,\r\n\t} = useDispatch( 'quillForms/renderer-core' );\r\n\tconst { beforeGoingNext } = useFormContext();\r\n\tconst theme = useCurrentTheme();\r\n\tconst settings = useFormSettings();\r\n\tconst { currentBlockId, walkPath, blockTypes } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tcurrentBlockId: select(\r\n\t\t\t\t'quillForms/renderer-core'\r\n\t\t\t).getCurrentBlockId(),\r\n\t\t\twalkPath: select( 'quillForms/renderer-core' ).getWalkPath(),\r\n\t\t\tblockTypes: select( 'quillForms/blocks' ).getBlockTypes(),\r\n\t\t};\r\n\t} );\r\n\tif ( ! currentBlockId ) return null;\r\n\tconst currentBlockIndex = walkPath.findIndex(\r\n\t\t( block ) => block.id === currentBlockId\r\n\t);\r\n\r\n\tconst currentBlockName = walkPath[ currentBlockIndex ]?.name;\r\n\r\n\tconst currentBlockType = blockTypes?.[ currentBlockName ];\r\n\r\n\tconst { isCurrentBlockValid, answers } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tanswers: select( 'quillForms/renderer-core' ).getAnswers(),\r\n\t\t\tisCurrentBlockValid: currentBlockType?.supports?.innerBlocks\r\n\t\t\t\t? select( 'quillForms/renderer-core' )?.hasValidFields(\r\n\t\t\t\t\t\tcurrentBlockId\r\n\t\t\t\t  )\r\n\t\t\t\t: currentBlockType?.supports?.editable\r\n\t\t\t\t? select( 'quillForms/renderer-core' )?.isValidField(\r\n\t\t\t\t\t\tcurrentBlockId\r\n\t\t\t\t  )\r\n\t\t\t\t: true,\r\n\t\t};\r\n\t} );\r\n\r\n\tconst goNextReally = async () => {\r\n\t\tif ( answers[ currentBlockIndex ]?.isPending ) return;\r\n\t\tif ( beforeGoingNext && currentBlockId ) {\r\n\t\t\tawait beforeGoingNext( {\r\n\t\t\t\tanswers,\r\n\t\t\t\tcurrentBlockId,\r\n\t\t\t\tsetIsFieldValid,\r\n\t\t\t\tsetFieldValidationErr,\r\n\t\t\t\tsetIsCurrentBlockSafeToSwipe,\r\n\t\t\t\tgoToBlock,\r\n\t\t\t\tgoNext,\r\n\t\t\t\tsetIsPending: ( val ) =>\r\n\t\t\t\t\tsetIsFieldPending( currentBlockId, val ),\r\n\t\t\t} );\r\n\t\t} else {\r\n\t\t\tgoNext();\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={ classnames( 'renderer-core-field-navigation', {\r\n\t\t\t\thidden: ! shouldFooterBeDisplayed,\r\n\t\t\t} ) }\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'renderer-core-field-navigation__up-icon',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trotate: settings?.animationDirection === 'horizontal',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tbackground: ${ theme.buttonsBgColor };\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tgoPrev();\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t<UpIcon />\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'renderer-core-field-navigation__down-icon',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trotate: settings?.animationDirection === 'horizontal',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tbackground: ${ theme.buttonsBgColor };\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\twalkPath[ walkPath.length - 1 ].id !== currentBlockId\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tif ( isCurrentBlockValid ) {\r\n\t\t\t\t\t\t\tgoNextReally();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetIsCurrentBlockSafeToSwipe( false );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t<DownIcon />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default FieldNavigation;\r\n"],"mappings":"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"}