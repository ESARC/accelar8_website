{"version":3,"names":["useSelect","useDispatch","classnames","css","useCurrentTheme","useFormContext","useFormSettings","DownIcon","UpIcon","FieldNavigation","_ref","shouldFooterBeDisplayed","goNext","goPrev","setIsCurrentBlockSafeToSwipe","setIsFieldValid","setIsFieldPending","setFieldValidationErr","goToBlock","beforeGoingNext","theme","settings","currentBlockId","walkPath","blockTypes","select","getCurrentBlockId","getWalkPath","getBlockTypes","currentBlockIndex","findIndex","block","id","currentBlockName","name","currentBlockType","isCurrentBlockValid","answers","getAnswers","supports","innerBlocks","hasValidFields","editable","isValidField","goNextReally","isPending","setIsPending","val","createElement","className","hidden","rotate","animationDirection","buttonsBgColor","onClick","length"],"sources":["@quillforms/renderer-core/src/components/field-navigation/index.tsx"],"sourcesContent":["/**\r\n * WordPress Dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport classnames from 'classnames';\r\nimport { css } from 'emotion';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport { useCurrentTheme, useFormContext, useFormSettings } from '../../hooks';\r\nimport DownIcon from './down-icon';\r\nimport UpIcon from './up-icon';\r\n\r\nconst FieldNavigation = ( { shouldFooterBeDisplayed } ) => {\r\n\tconst {\r\n\t\tgoNext,\r\n\t\tgoPrev,\r\n\t\tsetIsCurrentBlockSafeToSwipe,\r\n\t\tsetIsFieldValid,\r\n\t\tsetIsFieldPending,\r\n\t\tsetFieldValidationErr,\r\n\t\tgoToBlock,\r\n\t} = useDispatch( 'quillForms/renderer-core' );\r\n\tconst { beforeGoingNext } = useFormContext();\r\n\tconst theme = useCurrentTheme();\r\n\tconst settings = useFormSettings();\r\n\tconst { currentBlockId, walkPath, blockTypes } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tcurrentBlockId: select(\r\n\t\t\t\t'quillForms/renderer-core'\r\n\t\t\t).getCurrentBlockId(),\r\n\t\t\twalkPath: select( 'quillForms/renderer-core' ).getWalkPath(),\r\n\t\t\tblockTypes: select( 'quillForms/blocks' ).getBlockTypes(),\r\n\t\t};\r\n\t} );\r\n\tif ( ! currentBlockId ) return null;\r\n\tconst currentBlockIndex = walkPath.findIndex(\r\n\t\t( block ) => block.id === currentBlockId\r\n\t);\r\n\r\n\tconst currentBlockName = walkPath[ currentBlockIndex ]?.name;\r\n\r\n\tconst currentBlockType = blockTypes?.[ currentBlockName ];\r\n\r\n\tconst { isCurrentBlockValid, answers } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\tanswers: select( 'quillForms/renderer-core' ).getAnswers(),\r\n\t\t\tisCurrentBlockValid: currentBlockType?.supports?.innerBlocks\r\n\t\t\t\t? select( 'quillForms/renderer-core' )?.hasValidFields(\r\n\t\t\t\t\t\tcurrentBlockId\r\n\t\t\t\t  )\r\n\t\t\t\t: currentBlockType?.supports?.editable\r\n\t\t\t\t? select( 'quillForms/renderer-core' )?.isValidField(\r\n\t\t\t\t\t\tcurrentBlockId\r\n\t\t\t\t  )\r\n\t\t\t\t: true,\r\n\t\t};\r\n\t} );\r\n\r\n\tconst goNextReally = async () => {\r\n\t\tif ( answers[ currentBlockIndex ]?.isPending ) return;\r\n\t\tif ( beforeGoingNext && currentBlockId ) {\r\n\t\t\tawait beforeGoingNext( {\r\n\t\t\t\tanswers,\r\n\t\t\t\tcurrentBlockId,\r\n\t\t\t\tsetIsFieldValid,\r\n\t\t\t\tsetFieldValidationErr,\r\n\t\t\t\tsetIsCurrentBlockSafeToSwipe,\r\n\t\t\t\tgoToBlock,\r\n\t\t\t\tgoNext,\r\n\t\t\t\tsetIsPending: ( val ) =>\r\n\t\t\t\t\tsetIsFieldPending( currentBlockId, val ),\r\n\t\t\t} );\r\n\t\t} else {\r\n\t\t\tgoNext();\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={ classnames( 'renderer-core-field-navigation', {\r\n\t\t\t\thidden: ! shouldFooterBeDisplayed,\r\n\t\t\t} ) }\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'renderer-core-field-navigation__up-icon',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trotate: settings?.animationDirection === 'horizontal',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tbackground: ${ theme.buttonsBgColor };\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tgoPrev();\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t<UpIcon />\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'renderer-core-field-navigation__down-icon',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trotate: settings?.animationDirection === 'horizontal',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tbackground: ${ theme.buttonsBgColor };\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\twalkPath[ walkPath.length - 1 ].id !== currentBlockId\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tif ( isCurrentBlockValid ) {\r\n\t\t\t\t\t\t\tgoNextReally();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetIsCurrentBlockSafeToSwipe( false );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t<DownIcon />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default FieldNavigation;\r\n"],"mappings":"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"}