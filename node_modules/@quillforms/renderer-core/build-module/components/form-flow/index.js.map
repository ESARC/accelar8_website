{"version":3,"names":["configApi","Global","Fragment","useEffect","useRef","useSelect","useDispatch","css","classnames","WelcomeScreensWrapper","ThankyouScreensWrapper","FieldsWrapper","FormFooter","useGeneralTheme","useBlocks","PaymentModal","useCurrentTheme","forEach","size","useFormContext","useFormSettings","FormFlow","_ref","_useFormSettings$show","applyLogic","blocks","formObj","customFonts","generalTheme","currentTheme","fonts","getFonts","showLettersOnAnswers","font","questionsLabelFont","questionsDescriptionFont","fontFamilies","push","fontTypes","fontUrls","fontFace","fontFamily","fontIndex","fontType","fontLowerString","replace","toLowerCase","customFont","find","title","properties","variations","variation","fontStyle","style","fontWeight","weight","src","map","type","files","undefined","filter","urlLine","join","head","document","link","createElement","rel","fontUrl","href","existingLinkEl","querySelector","appendChild","setIsFocused","ref","isWelcomeScreenActive","isThankyouScreenActive","paymentData","select","store","getPaymentData","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","keydownHandler","e","key","preventDefault","window","backgroundImageCSS","backgroundImage","parseFloat","backgroundImageFocalPoint","x","y","className","customCSS","tabIndex","onMouseDown","styles","backgroundColor","fontSize","lg","fontLineHeight","sm","questionsColor","questionsLabelFontSize","questionsLabelLineHeight","questionsDescriptionFontSize","questionsDescriptionLineHeight","textInputAnswers","onClick","logo","alt","length","isActive","data"],"sources":["@quillforms/renderer-core/src/components/form-flow/index.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\r\n/* eslint-disable jsx-a11y/no-static-element-interactions */\r\n/* eslint-disable no-nested-ternary */\r\n/**\r\n * Quill Forms Dependencies\r\n */\r\nimport configApi from '@quillforms/config';\r\nimport { Global } from \"@quillforms/utils\";\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { Fragment, useEffect, useRef } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport WelcomeScreensWrapper from '../welcome-screens-wrapper';\r\nimport ThankyouScreensWrapper from '../thankyou-screens-wrapper';\r\nimport FieldsWrapper from '../fields-wrapper';\r\nimport FormFooter from '../form-footer';\r\nimport useGeneralTheme from '../../hooks/use-general-theme';\r\nimport useBlocks from '../../hooks/use-blocks';\r\nimport PaymentModal from '../payment-modal';\r\nimport useCurrentTheme from '../../hooks/use-current-theme';\r\nimport { forEach, size } from 'lodash';\r\nimport { useFormContext, useFormSettings } from '../../hooks';\r\n\r\ninterface Props {\r\n\tapplyLogic: boolean;\r\n}\r\nconst FormFlow: React.FC<Props> = ({ applyLogic }) => {\r\n\tconst blocks = useBlocks();\r\n\tconst { formObj, customFonts } = useFormContext();\r\n\tconst generalTheme = useGeneralTheme();\r\n\tconst currentTheme = useCurrentTheme();\r\n\tconst fonts = configApi.getFonts();\r\n\tconst showLettersOnAnswers =\r\n\t\tuseFormSettings()?.showLettersOnAnswers ?? true;\r\n\r\n\tconst { font, questionsLabelFont, questionsDescriptionFont } = currentTheme;\r\n\r\n\tconst fontFamilies = [font];\r\n\tif (questionsLabelFont !== 'inherit') {\r\n\t\tfontFamilies.push(questionsLabelFont);\r\n\t}\r\n\tif (questionsDescriptionFont !== 'inherit') {\r\n\t\tfontFamilies.push(questionsDescriptionFont);\r\n\t}\r\n\tconst fontTypes = [\r\n\t\tfonts[font],\r\n\t\tfonts[questionsLabelFont],\r\n\t\tfonts[questionsDescriptionFont],\r\n\t];\r\n\tconst fontUrls: string[] = [];\r\n\tconst fontFace = [] as any[];\r\n\tforEach(fontFamilies, (fontFamily, fontIndex) => {\r\n\t\tconst fontType = fontTypes[fontIndex];\r\n\t\tif (fontType === 'googlefonts' || fontType === 'earlyaccess') {\r\n\t\t\tswitch (fontType) {\r\n\t\t\t\tcase 'googlefonts':\r\n\t\t\t\t\tfontUrls.push(\r\n\t\t\t\t\t\t'https://fonts.googleapis.com/css?family=' +\r\n\t\t\t\t\t\tfontFamily +\r\n\t\t\t\t\t\t':100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'earlyaccess':\r\n\t\t\t\t\tconst fontLowerString = fontFamily\r\n\t\t\t\t\t\t.replace(/\\s+/g, '')\r\n\t\t\t\t\t\t.toLowerCase();\r\n\t\t\t\t\tfontUrls.push(\r\n\t\t\t\t\t\t'https://fonts.googleapis.com/earlyaccess/' +\r\n\t\t\t\t\t\tfontLowerString +\r\n\t\t\t\t\t\t'.css'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst customFont = customFonts?.find(\r\n\t\t\t\t(font) => font.title === fontFamily\r\n\t\t\t);\r\n\t\t\tif (customFont && size(customFont?.properties?.variations) > 0) {\r\n\t\t\t\tforEach(customFont?.properties?.variations, (variation) => {\r\n\t\t\t\t\tfontFace.push({\r\n\t\t\t\t\t\t'@font-face': {\r\n\t\t\t\t\t\t\tfontFamily,\r\n\t\t\t\t\t\t\tfontStyle: variation.style,\r\n\t\t\t\t\t\t\tfontWeight: variation.weight,\r\n\t\t\t\t\t\t\tsrc: `${['woff2', 'woff', 'ttf'].map((type) => {\r\n\t\t\t\t\t\t\t\tif (variation?.files?.[type]) {\r\n\t\t\t\t\t\t\t\t\treturn `url('${variation.files[type]}') format('${type}')`\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t\t\t\t}).filter(urlLine => typeof urlLine !== 'undefined').join(',')\r\n\t\t\t\t\t\t\t\t}`\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst head = document.head;\r\n\t\tconst link = document.createElement('link');\r\n\r\n\t\tlink.type = 'text/css';\r\n\t\tlink.rel = 'stylesheet';\r\n\t\tif (size(fontUrls) > 0) {\r\n\t\t\tforEach(fontUrls, (fontUrl) => {\r\n\t\t\t\tlink.href = fontUrl;\r\n\t\t\t\tconst existingLinkEl = document.querySelector(\r\n\t\t\t\t\t`link[href='${link.href}']`\r\n\t\t\t\t);\r\n\t\t\t\tif (!existingLinkEl) head.appendChild(link);\r\n\t\t\t});\r\n\t\t}\r\n\t}, [font, questionsLabelFont, questionsDescriptionFont]);\r\n\r\n\tconst { setIsFocused } = useDispatch('quillForms/renderer-core');\r\n\tconst ref = useRef<any>(null);\r\n\tconst { isWelcomeScreenActive, isThankyouScreenActive, paymentData } =\r\n\t\tuseSelect((select) => {\r\n\t\t\tconst store = select('quillForms/renderer-core');\r\n\t\t\treturn {\r\n\t\t\t\tisThankyouScreenActive: store.isThankyouScreenActive(),\r\n\t\t\t\tisWelcomeScreenActive: store.isWelcomeScreenActive(),\r\n\t\t\t\tpaymentData: store.getPaymentData(),\r\n\t\t\t};\r\n\t\t});\r\n\r\n\tuseEffect(() => {\r\n\t\t/**\r\n\t\t * Alert if clicked on outside of element\r\n\t\t *\r\n\t\t * @param  event\r\n\t\t */\r\n\t\tfunction handleClickOutside(event) {\r\n\t\t\tif (ref.current && !ref?.current?.contains(event.target)) {\r\n\t\t\t\tsetIsFocused(false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Bind the event listener\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\t// Unbind the event listener on clean up\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t}, [ref]);\r\n\r\n\tconst keydownHandler = (e) => {\r\n\t\t// Prevent any keyboard event by default in case of any tab event in general.\r\n\t\tif (e.key === 'Tab') {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('keydown', keydownHandler);\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('keydown', keydownHandler);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tlet backgroundImageCSS = '';\r\n\tif (generalTheme.backgroundImage && generalTheme.backgroundImage) {\r\n\t\tbackgroundImageCSS = `background-image: url('${generalTheme.backgroundImage\r\n\t\t\t}');\r\n\t\t\tbackground-size: cover;\r\n\t\t\tbackground-position: ${\r\n\t\t\t// @ts-expect-error\r\n\t\t\tparseFloat(generalTheme.backgroundImageFocalPoint?.x) * 100\r\n\t\t\t}%\r\n\t\t\t${\r\n\t\t\t// @ts-expect-error\r\n\t\t\tparseFloat(generalTheme.backgroundImageFocalPoint?.y) * 100\r\n\t\t\t}%;\r\n\r\n\t\t\tbackground-repeat: no-repeat;\r\n\t\t`;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={ref}\r\n\t\t\tclassName={classnames(\r\n\t\t\t\tcss`\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t-webkit-font-smoothing: antialiased;\r\n\t\t\t\t\t${backgroundImageCSS}\r\n\t\t\t\t\t${formObj?.customCSS}\r\n\t\t\t\t`,\r\n\t\t\t\t'renderer-core-form-flow__wrapper'\r\n\t\t\t)}\r\n\t\t\ttabIndex={0}\r\n\t\t\tonMouseDown={() => setIsFocused(true)}\r\n\t\t>\r\n\t\t\t<Global\r\n\t\t\t\tstyles={[...fontFace]}\r\n\t\t\t/>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName={classnames(\r\n\t\t\t\t\t'renderer-core-form-flow',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\tbackground: ${generalTheme.backgroundColor};\r\n\t\t\t\t\t\t@media ( min-width: 768px ) {\r\n\t\t\t\t\t\t\tfont-size: ${generalTheme.fontSize.lg};\r\n\t\t\t\t\t\t\tline-height: ${generalTheme.fontLineHeight.lg};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t@media ( max-width: 767px ) {\r\n\t\t\t\t\t\t\tfont-size: ${generalTheme.fontSize.sm};\r\n\t\t\t\t\t\t\tline-height: ${generalTheme.fontLineHeight.sm};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfont-family: ${generalTheme.font};\r\n\t\t\t\t\t\t.renderer-components-block-label {\r\n\t\t\t\t\t\t\tcolor: ${generalTheme.questionsColor};\r\n\t\t\t\t\t\t\tfont-family: ${generalTheme.questionsLabelFont};\r\n\t\t\t\t\t\t\t@media ( min-width: 768 ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsLabelFontSize.lg};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsLabelLineHeight.lg};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t@media ( max-width: 767px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsLabelFontSize.sm};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsLabelLineHeight.sm};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.renderer-components-block-description {\r\n\t\t\t\t\t\t\tfont-family: ${generalTheme.questionsDescriptionFont};\r\n\r\n\t\t\t\t\t\t\t@media ( min-width: 768px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsDescriptionFontSize.lg};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsDescriptionLineHeight.lg};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t@media ( max-width: 767px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsDescriptionFontSize.sm};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme\r\n\t\t\t\t\t\t\t.questionsDescriptionLineHeight.sm};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinput,\r\n\t\t\t\t\t\ttextarea {\r\n\t\t\t\t\t\t\t@media ( min-width: 768px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme.textInputAnswers\r\n\t\t\t\t\t\t\t.lg};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme.textInputAnswers\r\n\t\t\t\t\t\t\t.lg};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t@media ( max-width: 767px ) {\r\n\t\t\t\t\t\t\t\tfont-size: ${generalTheme.textInputAnswers\r\n\t\t\t\t\t\t\t.sm};\r\n\t\t\t\t\t\t\t\tline-height: ${generalTheme.textInputAnswers\r\n\t\t\t\t\t\t\t.sm};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t${!showLettersOnAnswers &&\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t.pictureChoice__optionKey, .multipleChoice__optionKey {\r\n\t\t\t\t\t\t\t\tdisplay: none !important;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t` }\r\n\t\t\t\t\t`\r\n\t\t\t\t)}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetIsFocused(true);\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{generalTheme?.logo?.src && (\r\n\t\t\t\t\t<div className=\"renderer-core-form-brand-logo\">\r\n\t\t\t\t\t\t<img src={generalTheme.logo.src} alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{blocks.length > 0 && (\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t{isWelcomeScreenActive && <WelcomeScreensWrapper />}\r\n\t\t\t\t\t\t{!paymentData && (\r\n\t\t\t\t\t\t\t<FieldsWrapper\r\n\t\t\t\t\t\t\t\tisActive={\r\n\t\t\t\t\t\t\t\t\t!isWelcomeScreenActive &&\r\n\t\t\t\t\t\t\t\t\t!isThankyouScreenActive\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tapplyLogic={applyLogic}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{isThankyouScreenActive && <ThankyouScreensWrapper />}\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t)}\r\n\t\t\t\t{!paymentData && <FormFooter />}\r\n\t\t\t\t{!!paymentData && <PaymentModal data={paymentData} />}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default FormFlow;\r\n"],"mappings":"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"}