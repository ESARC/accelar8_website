{"version":3,"names":["getPaymentGatewayModules","RadioControl","useState","useDispatch","useGeneralTheme","css","size","Methods","_ref","_urlParams$get","_data$payments$labels","data","setPaymentData","completeForm","generalTheme","gateways","methodsKeys","Object","keys","payments","methods","options","map","key","gateway","method","split","label","customer","text","value","urlParams","URLSearchParams","window","location","search","defaultMethod","get","includes","_urlParams$get2","selected","setSelected","CustomerRender","render","createElement","className","Fragment","questionsColor","labels","select_payment_method","id","onChange","slug","onComplete"],"sources":["@quillforms/renderer-core/src/components/payment-modal/methods/index.tsx"],"sourcesContent":["/**\r\n * QuillForms Dependencies\r\n */\r\nimport { getPaymentGatewayModules } from '@quillforms/payment-gateways';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport RadioControl from './radio-control';\r\nimport { useState } from '@wordpress/element';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport useGeneralTheme from '../../../hooks/use-general-theme';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport { css } from 'emotion';\r\nimport { size } from 'lodash';\r\n\r\ninterface Props {\r\n\tdata: any;\r\n}\r\n\r\nconst Methods: React.FC< Props > = ( { data } ) => {\r\n\tconst { setPaymentData, completeForm } = useDispatch(\r\n\t\t'quillForms/renderer-core'\r\n\t);\r\n\tconst generalTheme = useGeneralTheme();\r\n\r\n\tconst gateways = getPaymentGatewayModules();\r\n\tconst methodsKeys = Object.keys( data.payments.methods );\r\n\r\n\tconst options = methodsKeys.map( ( key ) => {\r\n\t\tconst [ gateway, method ] = key.split( ':' );\r\n\t\treturn {\r\n\t\t\tlabel: gateways[ gateway ].methods[ method ].customer.label.text,\r\n\t\t\tvalue: key,\r\n\t\t};\r\n\t} );\r\n\r\n\tconst urlParams = new URLSearchParams( window.location.search );\r\n\tlet defaultMethod = methodsKeys[ 0 ];\r\n\tif (\r\n\t\turlParams.get( 'step' ) === 'payment' &&\r\n\t\tmethodsKeys.includes( urlParams.get( 'method' ) ?? '' )\r\n\t) {\r\n\t\tdefaultMethod = urlParams.get( 'method' ) ?? '';\r\n\t}\r\n\r\n\tconst [ selected, setSelected ] = useState( defaultMethod );\r\n\tconst [ gateway, method ] = selected.split( ':' );\r\n\r\n\tconst CustomerRender =\r\n\t\tgateways[ gateway ].methods[ method ].customer.render;\r\n\r\n\treturn (\r\n\t\t<div className=\"renderer-core-payment-modal-methods\">\r\n\t\t\t<>\r\n\t\t\t\t{ size( methodsKeys ) > 1 && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\t\t\tcolor: ${ generalTheme.questionsColor };\r\n\t\t\t\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\t\t\t` }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ data.payments.labels?.select_payment_method ??\r\n\t\t\t\t\t\t\t\t'Select a payment method' }\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<div className=\"renderer-components-radio-control__options-group\">\r\n\t\t\t\t\t\t\t<RadioControl\r\n\t\t\t\t\t\t\t\tid=\"payment-methods\"\r\n\t\t\t\t\t\t\t\tselected={ selected }\r\n\t\t\t\t\t\t\t\toptions={ options }\r\n\t\t\t\t\t\t\t\tonChange={ setSelected }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) }\r\n\t\t\t</>\r\n\t\t\t<CustomerRender\r\n\t\t\t\tslug={ selected }\r\n\t\t\t\tdata={ data }\r\n\t\t\t\tonComplete={ () => {\r\n\t\t\t\t\tcompleteForm();\r\n\t\t\t\t\tsetPaymentData( null );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Methods;\r\n"],"mappings":"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"}