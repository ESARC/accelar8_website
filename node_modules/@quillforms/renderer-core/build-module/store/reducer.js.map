{"version":3,"names":["combineReducers","forEach","some","size","GO_NEXT","GO_PREV","COMPLETE_FORM","SET_SWIPER_STATE","GO_TO_BLOCK","SET_SUBMISSION_ERR","SET_FIELD_ANSWER","INSERT_EMPTY_FIELD_ANSWER","SET_IS_FIELD_VALID","SET_IS_FIELD_ANSWERED","SET_IS_FIELD_PENDING","SET_FIELD_PENDING_MSG","SET_FIELD_VALIDATION_ERR","RESET_ANSWERS","SET_IS_REVIEWING","SET_IS_SUBMITTING","SET_PAYMENT_DATA","SET_IS_FOCUSED","SET_FOOTER_DISPLAY","SET_IS_CURRENT_BLOCK_SAFE_TO_SWIPE","initialState","walkPath","welcomeScreens","thankyouScreens","currentBlockId","undefined","nextBlockId","lastActiveBlockId","prevBlockId","canSwipeNext","canSwipePrev","isCurrentBlockSafeToSwipe","isAnimating","isThankyouScreenActive","isWelcomeScreenActive","isReviewing","swiper","state","arguments","length","action","type","newSwiperState","swiperState","validBlocksStructure","blockCat","newBlockCat","Array","isArray","item","id","attributes","hasOwnProperty","name","block","newWalkPath","newWelcomeScreens","newThanksScreens","checkCorrectIds","prop","allBlocks","correctBooleans","newCurrentBlockId","isFirstField","isLastField","screen","isThereNextField","filter","isReallyLastField","currentFieldIndex","findIndex","field","$newCurrentBlockId","newCurrentFieldIndex","$field","val","forceUpdateState","isTheBlockWelcomeScreenBlock","isTheBlockThankyouScreenBlock","fieldIndex","groupBlocks","parentId","groupBlock","innerBlocks","childIndex","childBlock","find","isFocused","footerDisplay","submit","isSubmitting","submissionErr","paymentData","data","answers","blockName","value","isValid","isAnswered","isPending","pendingMsg","validationErr","RendererCoreReducer"],"sources":["@quillforms/renderer-core/src/store/reducer.ts"],"sourcesContent":["/* eslint-disable no-nested-ternary */\r\n/**\r\n * QuillForms Dependencies\r\n */\r\nimport { FormBlock } from '@quillforms/types';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { combineReducers } from '@wordpress/data';\r\nimport { forEach, some, size } from 'lodash';\r\n\r\n/**\r\n * External dependencies\r\n */\r\nimport type { Reducer } from 'redux';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport {\r\n\tGO_NEXT,\r\n\tGO_PREV,\r\n\tCOMPLETE_FORM,\r\n\tSET_SWIPER_STATE,\r\n\tGO_TO_BLOCK,\r\n\tSET_SUBMISSION_ERR,\r\n\tSET_FIELD_ANSWER,\r\n\tINSERT_EMPTY_FIELD_ANSWER,\r\n\tSET_IS_FIELD_VALID,\r\n\tSET_IS_FIELD_ANSWERED,\r\n\tSET_IS_FIELD_PENDING,\r\n\tSET_FIELD_PENDING_MSG,\r\n\tSET_FIELD_VALIDATION_ERR,\r\n\tRESET_ANSWERS,\r\n\tSET_IS_REVIEWING,\r\n\tSET_IS_SUBMITTING,\r\n\tSET_PAYMENT_DATA,\r\n\tSET_IS_FOCUSED,\r\n\tSET_FOOTER_DISPLAY,\r\n\tSET_IS_CURRENT_BLOCK_SAFE_TO_SWIPE,\r\n} from './constants';\r\nimport type {\r\n\tSwiperState,\r\n\tSwiperActionTypes,\r\n\tRendererAnswersActionTypes,\r\n\tRendererAnswersState,\r\n\tScreen,\r\n\tSubmissionState,\r\n\tSubmitActionTypes,\r\n} from './types';\r\n\r\nconst initialState: SwiperState = {\r\n\twalkPath: [],\r\n\twelcomeScreens: [],\r\n\tthankyouScreens: [],\r\n\tcurrentBlockId: undefined,\r\n\tnextBlockId: undefined,\r\n\tlastActiveBlockId: undefined,\r\n\tprevBlockId: undefined,\r\n\tcanSwipeNext: false,\r\n\tcanSwipePrev: false,\r\n\tisCurrentBlockSafeToSwipe: true,\r\n\tisAnimating: true,\r\n\tisThankyouScreenActive: false,\r\n\tisWelcomeScreenActive: false,\r\n\tisReviewing: false,\r\n};\r\n\r\nconst swiper: Reducer< SwiperState, SwiperActionTypes > = (\r\n\tstate = initialState,\r\n\taction\r\n) => {\r\n\tconst {\r\n\t\twalkPath,\r\n\t\tisAnimating,\r\n\t\tcurrentBlockId,\r\n\t\tnextBlockId,\r\n\t\tprevBlockId,\r\n\t\tthankyouScreens,\r\n\t} = state;\r\n\tswitch ( action.type ) {\r\n\t\tcase SET_SWIPER_STATE: {\r\n\t\t\tconst newSwiperState = action.swiperState;\r\n\t\t\tlet validBlocksStructure = true;\r\n\t\t\tforEach(\r\n\t\t\t\t[ 'walkPath', 'welcomeScreens', 'thankyouScreens' ],\r\n\t\t\t\t( blockCat ) => {\r\n\t\t\t\t\tif ( newSwiperState[ blockCat ] ) {\r\n\t\t\t\t\t\tconst newBlockCat = newSwiperState[ blockCat ];\r\n\t\t\t\t\t\tif ( ! Array.isArray( newBlockCat ) ) {\r\n\t\t\t\t\t\t\tvalidBlocksStructure = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// check if  structure isn't correct\r\n\t\t\t\t\t\tif ( newBlockCat.length > 0 ) {\r\n\t\t\t\t\t\t\tforEach( newBlockCat, ( item ) => {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\ttypeof item === 'object' &&\r\n\t\t\t\t\t\t\t\t\titem != null &&\r\n\t\t\t\t\t\t\t\t\titem.id &&\r\n\t\t\t\t\t\t\t\t\ttypeof item.id === 'string'\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tsize( item.attributes ) > 0 &&\r\n\t\t\t\t\t\t\t\t\t\ttypeof item.attributes !== 'object'\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\tvalidBlocksStructure = false;\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif ( blockCat === 'walkPath' ) {\r\n\t\t\t\t\t\t\t\t\t\t// Check if the block has a name or it is a thank you screen or default thank you screen\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t( ! item.hasOwnProperty( 'name' ) ||\r\n\t\t\t\t\t\t\t\t\t\t\t\ttypeof item.name !==\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'string' ) &&\r\n\t\t\t\t\t\t\t\t\t\t\t! some(\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewSwiperState.thankyouScreens,\r\n\t\t\t\t\t\t\t\t\t\t\t\t( block ) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tblock.id === item.id\r\n\t\t\t\t\t\t\t\t\t\t\t) &&\r\n\t\t\t\t\t\t\t\t\t\t\titem.id !==\r\n\t\t\t\t\t\t\t\t\t\t\t\t'default_thankyou_screen'\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalidBlocksStructure = false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvalidBlocksStructure = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tif ( ! validBlocksStructure ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\r\n\t\t\tconst newWalkPath = newSwiperState.walkPath\r\n\t\t\t\t? newSwiperState.walkPath\r\n\t\t\t\t: walkPath;\r\n\r\n\t\t\tconst newWelcomeScreens = newSwiperState.welcomeScreens\r\n\t\t\t\t? newSwiperState.welcomeScreens\r\n\t\t\t\t: state.welcomeScreens;\r\n\r\n\t\t\tconst newThanksScreens = newSwiperState.thankyouScreens\r\n\t\t\t\t? newSwiperState.thankyouScreens\r\n\t\t\t\t: state.thankyouScreens;\r\n\t\t\t// If  new current block id or new next block id or new prev block id or last active block id aren't\r\n\t\t\t// in the new walkPath\r\n\t\t\tlet checkCorrectIds = true;\r\n\t\t\t[\r\n\t\t\t\t'currentBlockId',\r\n\t\t\t\t'nextBlockId',\r\n\t\t\t\t'prevBlockId',\r\n\t\t\t\t'lastActiveBlockId',\r\n\t\t\t].forEach( ( prop ) => {\r\n\t\t\t\tconst allBlocks: ( Screen | FormBlock )[] = [\r\n\t\t\t\t\t...newWalkPath,\r\n\t\t\t\t\t...newWelcomeScreens,\r\n\t\t\t\t\t...newThanksScreens,\r\n\t\t\t\t];\r\n\t\t\t\tif (\r\n\t\t\t\t\tnewSwiperState[ prop ] &&\r\n\t\t\t\t\t! some(\r\n\t\t\t\t\t\tallBlocks,\r\n\t\t\t\t\t\t( block ) =>\r\n\t\t\t\t\t\t\tblock.id === newSwiperState[ prop ] ||\r\n\t\t\t\t\t\t\tnewSwiperState[ prop ] === 'default_thankyou_screen'\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\tcheckCorrectIds = false;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\tif ( ! checkCorrectIds ) return state;\r\n\r\n\t\t\tlet correctBooleans = true;\r\n\r\n\t\t\t// if typeof  new boolean props isn't boolean.\r\n\t\t\t[\r\n\t\t\t\t'isAnimating',\r\n\t\t\t\t'canSwipeNext',\r\n\t\t\t\t'canSwipePrev',\r\n\t\t\t\t'isThankyouScreenActive',\r\n\t\t\t\t'isWelcomeScreenActive',\r\n\t\t\t].forEach( ( prop ) => {\r\n\t\t\t\tif (\r\n\t\t\t\t\tnewSwiperState[ prop ] &&\r\n\t\t\t\t\ttypeof newSwiperState[ prop ] !== 'boolean'\r\n\t\t\t\t) {\r\n\t\t\t\t\tcorrectBooleans = false;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\tif ( ! correctBooleans ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\r\n\t\t\tconst newCurrentBlockId = newSwiperState.currentBlockId\r\n\t\t\t\t? newSwiperState.currentBlockId\r\n\t\t\t\t: currentBlockId;\r\n\t\t\tconst isFirstField =\r\n\t\t\t\tnewWalkPath?.length > 0 &&\r\n\t\t\t\tnewWalkPath[ 0 ].id == newCurrentBlockId;\r\n\r\n\t\t\tconst isLastField =\r\n\t\t\t\tnewWalkPath?.length > 0 &&\r\n\t\t\t\tnewWalkPath[ newWalkPath.length - 1 ].id == newCurrentBlockId;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...newSwiperState,\r\n\t\t\t\tcanSwipeNext:\r\n\t\t\t\t\tnewSwiperState.canSwipeNext === undefined\r\n\t\t\t\t\t\t? state.canSwipeNext\r\n\t\t\t\t\t\t: newSwiperState.canSwipeNext === true && isLastField\r\n\t\t\t\t\t\t? false\r\n\t\t\t\t\t\t: newSwiperState.canSwipeNext,\r\n\t\t\t\tcanSwipePrev:\r\n\t\t\t\t\tnewSwiperState.canSwipePrev === undefined\r\n\t\t\t\t\t\t? state.canSwipePrev\r\n\t\t\t\t\t\t: newSwiperState.canSwipePrev === true && isFirstField\r\n\t\t\t\t\t\t? false\r\n\t\t\t\t\t\t: newSwiperState.canSwipePrev,\r\n\t\t\t\tisWelcomeScreenActive:\r\n\t\t\t\t\tnewWelcomeScreens.length &&\r\n\t\t\t\t\tsome(\r\n\t\t\t\t\t\tnewWelcomeScreens,\r\n\t\t\t\t\t\t( screen ) => screen.id === newCurrentBlockId\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t: false,\r\n\t\t\t\tisThankyouScreenActive:\r\n\t\t\t\t\tsome(\r\n\t\t\t\t\t\tnewThanksScreens,\r\n\t\t\t\t\t\t( screen ) => screen.id === newCurrentBlockId\r\n\t\t\t\t\t) || 'default_thankyou_screen' === newCurrentBlockId\r\n\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t: false,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase GO_NEXT: {\r\n\t\t\tif ( isAnimating ) return state;\r\n\t\t\tconst isThereNextField =\r\n\t\t\t\twalkPath.filter(\r\n\t\t\t\t\t( block ) =>\r\n\t\t\t\t\t\tblock.name !== 'welcome-screen' &&\r\n\t\t\t\t\t\tblock.name !== 'thankyou-screen' &&\r\n\t\t\t\t\t\tblock.id === nextBlockId\r\n\t\t\t\t).length > 0;\r\n\t\t\tconst isReallyLastField =\r\n\t\t\t\twalkPath?.length > 0 &&\r\n\t\t\t\twalkPath[ walkPath.length - 1 ].id === currentBlockId &&\r\n\t\t\t\t! isThereNextField;\r\n\t\t\tif ( isReallyLastField ) return state;\r\n\t\t\tconst currentFieldIndex = walkPath.findIndex(\r\n\t\t\t\t( field ) => field.id === currentBlockId\r\n\t\t\t);\r\n\t\t\tlet $newCurrentBlockId = nextBlockId;\r\n\t\t\t// To check if the new current block is within the path, if it isn't, navigate to submission screen.\r\n\t\t\t// This should apply only when the next block is before the current block.\r\n\t\t\tconst newCurrentFieldIndex = walkPath.findIndex(\r\n\t\t\t\t( $field ) => $field.id === $newCurrentBlockId\r\n\t\t\t);\r\n\r\n\t\t\tif (\r\n\t\t\t\tnewCurrentFieldIndex === -1 ||\r\n\t\t\t\tnewCurrentFieldIndex === currentFieldIndex\r\n\t\t\t) {\r\n\t\t\t\t$newCurrentBlockId = undefined;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcanSwipeNext: ! $newCurrentBlockId ? false : true,\r\n\t\t\t\tcanSwipePrev: true,\r\n\t\t\t\tcurrentBlockId: $newCurrentBlockId,\r\n\t\t\t\tprevBlockId: $newCurrentBlockId\r\n\t\t\t\t\t? walkPath[ newCurrentFieldIndex - 1 ]\r\n\t\t\t\t\t\t? walkPath[ newCurrentFieldIndex - 1 ].id\r\n\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t: walkPath[ walkPath.length - 1 ].id,\r\n\t\t\t\tlastActiveBlockId: currentBlockId,\r\n\t\t\t\tnextBlockId:\r\n\t\t\t\t\tnewCurrentFieldIndex !== -1\r\n\t\t\t\t\t\t? walkPath[ newCurrentFieldIndex + 1 ]\r\n\t\t\t\t\t\t\t? walkPath[ newCurrentFieldIndex + 1 ].id\r\n\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t: nextBlockId,\r\n\t\t\t\tisAnimating: true,\r\n\t\t\t\tisThankyouScreenActive: false,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase GO_PREV: {\r\n\t\t\tconst isFirstField =\r\n\t\t\t\twalkPath?.length > 0 && walkPath[ 0 ].id === currentBlockId;\r\n\r\n\t\t\tif ( isAnimating || isFirstField ) return state;\r\n\t\t\tconst currentFieldIndex = walkPath.findIndex(\r\n\t\t\t\t( field ) => field.id === currentBlockId\r\n\t\t\t);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcanSwipePrev: walkPath[ currentFieldIndex - 2 ] ? true : false,\r\n\t\t\t\tcanSwipeNext: true,\r\n\t\t\t\tcurrentBlockId: prevBlockId,\r\n\t\t\t\tlastActiveBlockId: currentBlockId,\r\n\t\t\t\tnextBlockId: currentBlockId,\r\n\t\t\t\tprevBlockId: walkPath[ currentFieldIndex - 2 ]?.id\r\n\t\t\t\t\t? walkPath[ currentFieldIndex - 2 ].id\r\n\t\t\t\t\t: undefined,\r\n\t\t\t\tisAnimating: true,\r\n\t\t\t\tisThankyouScreenActive: false,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase SET_IS_CURRENT_BLOCK_SAFE_TO_SWIPE: {\r\n\t\t\tconst { val } = action;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisCurrentBlockSafeToSwipe: val,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase GO_TO_BLOCK: {\r\n\t\t\tlet { id, forceUpdateState } = action;\r\n\t\t\tif ( currentBlockId === id && ! forceUpdateState ) return state;\r\n\t\t\tconst isTheBlockWelcomeScreenBlock = state.welcomeScreens.some(\r\n\t\t\t\t( screen ) => screen.id === id\r\n\t\t\t);\r\n\t\t\tconst isTheBlockThankyouScreenBlock = state.thankyouScreens.some(\r\n\t\t\t\t( screen ) => screen.id === id\r\n\t\t\t);\r\n\r\n\t\t\tif (\r\n\t\t\t\tisTheBlockThankyouScreenBlock ||\r\n\t\t\t\tisTheBlockWelcomeScreenBlock\r\n\t\t\t) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcurrentBlockId: id,\r\n\t\t\t\t\tisAnimating: true,\r\n\t\t\t\t\tcanSwipeNext: false,\r\n\t\t\t\t\tcanSwipePrev: false,\r\n\t\t\t\t\tnextBlockId: undefined,\r\n\t\t\t\t\tprevBlockId: undefined,\r\n\t\t\t\t\tlastActiveBlockId: currentBlockId,\r\n\t\t\t\t\tisWelcomeScreenActive: isTheBlockWelcomeScreenBlock,\r\n\t\t\t\t\tisThankyouScreenActive: isTheBlockThankyouScreenBlock,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tlet fieldIndex = state.walkPath.findIndex(\r\n\t\t\t\t( field ) => field.id === id\r\n\t\t\t);\r\n\r\n\t\t\t// If invalid parent block, try to search for inner blocks.\r\n\t\t\tif (\r\n\t\t\t\tfieldIndex === -1 &&\r\n\t\t\t\t! isTheBlockWelcomeScreenBlock &&\r\n\t\t\t\t! isTheBlockThankyouScreenBlock\r\n\t\t\t) {\r\n\t\t\t\tconst groupBlocks = state.walkPath.filter(\r\n\t\t\t\t\t( field ) => field.name === 'group'\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet parentId;\r\n\t\t\t\tforEach( groupBlocks, ( groupBlock ) => {\r\n\t\t\t\t\tif ( groupBlock.innerBlocks ) {\r\n\t\t\t\t\t\tconst childIndex = groupBlock.innerBlocks.findIndex(\r\n\t\t\t\t\t\t\t( childBlock ) => childBlock.id === id\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tif ( childIndex !== -1 ) {\r\n\t\t\t\t\t\t\tparentId = groupBlock.id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tif ( ! parentId ) {\r\n\t\t\t\t\treturn state;\r\n\t\t\t\t}\r\n\t\t\t\tid = parentId;\r\n\t\t\t\tfieldIndex = state.walkPath.findIndex(\r\n\t\t\t\t\t( field ) => field.id === id\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrentBlockId: id,\r\n\t\t\t\tisAnimating: true,\r\n\t\t\t\tcanSwipeNext: walkPath[ fieldIndex + 1 ] ? true : false,\r\n\t\t\t\tcanSwipePrev: walkPath[ fieldIndex - 1 ] ? true : false,\r\n\t\t\t\tnextBlockId: walkPath[ fieldIndex + 1 ]\r\n\t\t\t\t\t? walkPath[ fieldIndex + 1 ].id\r\n\t\t\t\t\t: undefined,\r\n\t\t\t\tprevBlockId: walkPath[ fieldIndex - 1 ]\r\n\t\t\t\t\t? walkPath[ fieldIndex - 1 ].id\r\n\t\t\t\t\t: undefined,\r\n\t\t\t\tlastActiveBlockId: currentBlockId,\r\n\t\t\t\tisWelcomeScreenActive: false,\r\n\t\t\t\tisThankyouScreenActive: false,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase COMPLETE_FORM: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcanSwipeNext: false,\r\n\t\t\t\tcanSwipePrev: false,\r\n\t\t\t\tisThankyouScreenActive: true,\r\n\t\t\t\tcurrentBlockId: nextBlockId && state.thankyouScreens.find(screen => screen.id === nextBlockId)\r\n\t\t\t\t\t? nextBlockId\r\n\t\t\t\t\t: thankyouScreens[ 0 ]?.id\r\n\t\t\t\t\t? thankyouScreens[ 0 ].id\r\n\t\t\t\t\t: 'default_thankyou_screen',\r\n\t\t\t\tprevBlockId: undefined,\r\n\t\t\t\tnextBlockId: undefined,\r\n\t\t\t\tlastActiveBlockId: undefined,\r\n\t\t\t\tisReviewing: false,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn state;\r\n};\r\n\r\nconst isFocused: Reducer = ( state = false, action ) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase SET_IS_FOCUSED: {\r\n\t\t\tif ( typeof action.val !== 'boolean' ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\r\n\t\t\treturn action.val;\r\n\t\t}\r\n\t}\r\n\r\n\treturn state;\r\n};\r\n\r\nconst footerDisplay: Reducer = ( state = true, action ) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase SET_FOOTER_DISPLAY: {\r\n\t\t\tif ( typeof action.val !== 'boolean' ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\r\n\t\t\treturn action.val;\r\n\t\t}\r\n\t}\r\n\r\n\treturn state;\r\n};\r\n\r\nconst submit: Reducer< SubmissionState, SubmitActionTypes > = (\r\n\tstate = {\r\n\t\tisSubmitting: false,\r\n\t\tisReviewing: false,\r\n\t\tsubmissionErr: '',\r\n\t\tpaymentData: null,\r\n\t},\r\n\taction\r\n) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase COMPLETE_FORM: {\r\n\t\t\treturn {\r\n\t\t\t\tisSubmitting: false,\r\n\t\t\t\tisReviewing: false,\r\n\t\t\t\tsubmissionErr: '',\r\n\t\t\t\tpaymentData: null,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase SET_IS_REVIEWING: {\r\n\t\t\tconst { val } = action;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisReviewing: val,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase SET_IS_SUBMITTING: {\r\n\t\t\tconst { val } = action;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisSubmitting: val,\r\n\t\t\t\tsubmissionErr: '',\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase SET_SUBMISSION_ERR: {\r\n\t\t\t// Make sure this action is called while the form is submitting already, otherwhise, do nothing.\r\n\t\t\tif ( ! state.isSubmitting ) return state;\r\n\t\t\tconst { val } = action;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisSubmitting: false,\r\n\t\t\t\tsubmissionErr: val,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase SET_PAYMENT_DATA: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpaymentData: action.data,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\treturn state;\r\n};\r\n\r\nconst answers: Reducer< RendererAnswersState, RendererAnswersActionTypes > = (\r\n\tstate = {},\r\n\taction\r\n) => {\r\n\tswitch ( action.type ) {\r\n\t\t// Insert Empty Field Answer\r\n\t\tcase INSERT_EMPTY_FIELD_ANSWER: {\r\n\t\t\tconst { id, blockName } = action;\r\n\t\t\tconst answers = { ...state };\r\n\r\n\t\t\tif ( ! answers[ id ] ) {\r\n\t\t\t\tanswers[ id ] = {\r\n\t\t\t\t\tvalue: undefined,\r\n\t\t\t\t\tisValid: true,\r\n\t\t\t\t\tisAnswered: false,\r\n\t\t\t\t\tisPending: false,\r\n\t\t\t\t\tpendingMsg: undefined,\r\n\t\t\t\t\tvalidationErr: undefined,\r\n\t\t\t\t\tblockName,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn answers;\r\n\t\t}\r\n\r\n\t\t// SET FIELD ANSWER\r\n\t\tcase SET_FIELD_ANSWER: {\r\n\t\t\tconst { id, val } = action;\r\n\t\t\t// If the field id is incorrect or the value passed is the same value, return same state.\r\n\t\t\tif ( val === state[ id ]?.value ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ id ]: {\r\n\t\t\t\t\t...state[ id ],\r\n\t\t\t\t\tvalue: val,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase RESET_ANSWERS: {\r\n\t\t\treturn {};\r\n\t\t}\r\n\r\n\t\t// SET IS FIELD VALID\r\n\t\tcase SET_IS_FIELD_VALID: {\r\n\t\t\tconst { id, val } = action;\r\n\t\t\t// If the field id is incorrect or the value passed is the same value, return same state.\r\n\t\t\tif ( ! state[ id ] || val === state[ id ].isValid ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ id ]: {\r\n\t\t\t\t\t...state[ id ],\r\n\t\t\t\t\tisValid: val,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// SET IS FIELD ANSWERED\r\n\t\tcase SET_IS_FIELD_ANSWERED: {\r\n\t\t\tconst { id, val } = action;\r\n\t\t\t// If the field id is incorrect or the value passed is the same value, return same state.\r\n\t\t\tif ( ! state[ id ] || val === state[ id ].isAnswered ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ id ]: {\r\n\t\t\t\t\t...state[ id ],\r\n\t\t\t\t\tisAnswered: val,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// SET IS FIELD PENDING\r\n\t\tcase SET_IS_FIELD_PENDING: {\r\n\t\t\tconst { id, val } = action;\r\n\t\t\t// If the field id is incorrect or the value passed is the same value, return same state.\r\n\t\t\tif ( ! state[ id ] || val === state[ id ].isPending ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ id ]: {\r\n\t\t\t\t\t...state[ id ],\r\n\t\t\t\t\tisPending: val,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// SET FIELD PENDING MSG\r\n\t\tcase SET_FIELD_PENDING_MSG: {\r\n\t\t\tconst { id, val } = action;\r\n\t\t\t// If the field id is incorrect or the value passed is the same value, return same state.\r\n\t\t\tif ( ! state[ id ] || val === state[ id ].pendingMsg ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ id ]: {\r\n\t\t\t\t\t...state[ id ],\r\n\t\t\t\t\tpendingMsg: val,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// SET FIELD VALIDATION ERR\r\n\t\tcase SET_FIELD_VALIDATION_ERR: {\r\n\t\t\tconst { id, val } = action;\r\n\t\t\t// If the field id is incorrect or the value passed is the same value, return same state.\r\n\t\t\tif ( ! state[ id ] || val === state[ id ].validationErr ) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t[ id ]: {\r\n\t\t\t\t\t...state[ id ],\r\n\t\t\t\t\tvalidationErr: val,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn state;\r\n};\r\n\r\n// @ts-ignore\r\nconst RendererCoreReducer: Reducer<\r\n\t{\r\n\t\tanswers: RendererAnswersState;\r\n\t\tfooterDisplay: boolean;\r\n\t\tisFocused: boolean;\r\n\t\tsubmit: SubmissionState;\r\n\t\tswiper: SwiperState;\r\n\t},\r\n\tany\r\n> = combineReducers( {\r\n\tanswers,\r\n\tfooterDisplay,\r\n\tisFocused,\r\n\tsubmit,\r\n\tswiper,\r\n} );\r\nexport type State = ReturnType< typeof RendererCoreReducer >;\r\n\r\nexport default RendererCoreReducer;\r\n"],"mappings":"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"}