{"version":3,"names":["Transforms","Editor","Range","Button","LinkIcon","Link","_ref","editor","insertLink","url","selection","wrapLink","isLinkActive","link","nodes","match","n","type","unwrapLink","unwrapNodes","isCollapsed","children","text","insertNodes","wrapNodes","split","collapse","edge","createElement","active","onMouseDown","event","preventDefault","window","prompt"],"sources":["@quillforms/admin-components/src/rich-text/components/link/index.tsx"],"sourcesContent":["/**\r\n * External Dependencies\r\n */\r\nimport { Transforms, Editor, Range } from 'slate';\r\nimport { CustomNode } from '../../types';\r\n\r\n/**\r\n * Inernal Dependencies\r\n */\r\nimport Button from '../button';\r\nimport LinkIcon from './link-icon';\r\n\r\ninterface Props {\r\n\teditor: Editor;\r\n}\r\nconst Link: React.FC< Props > = ( { editor } ) => {\r\n\tconst insertLink = ( url: string ) => {\r\n\t\tif ( editor.selection ) {\r\n\t\t\twrapLink( url );\r\n\t\t}\r\n\t};\r\n\tconst isLinkActive = () => {\r\n\t\tconst [ link ] = Editor.nodes( editor, {\r\n\t\t\tmatch: ( n: CustomNode ) => n.type === 'link',\r\n\t\t} );\r\n\t\treturn !! link;\r\n\t};\r\n\r\n\tconst unwrapLink = () => {\r\n\t\tTransforms.unwrapNodes( editor, {\r\n\t\t\tmatch: ( n: CustomNode ) => n.type === 'link',\r\n\t\t} );\r\n\t};\r\n\r\n\tconst wrapLink = ( url ) => {\r\n\t\tif ( isLinkActive() ) {\r\n\t\t\tunwrapLink();\r\n\t\t}\r\n\r\n\t\tconst { selection } = editor;\r\n\t\tconst isCollapsed = selection && Range.isCollapsed( selection );\r\n\t\tconst link = {\r\n\t\t\ttype: 'link',\r\n\t\t\turl,\r\n\t\t\tchildren: isCollapsed ? [ { text: url } ] : [],\r\n\t\t};\r\n\r\n\t\tif ( isCollapsed ) {\r\n\t\t\tTransforms.insertNodes( editor, link );\r\n\t\t} else {\r\n\t\t\tTransforms.wrapNodes( editor, link, { split: true } );\r\n\t\t\tTransforms.collapse( editor, { edge: 'end' } );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tactive={ isLinkActive() }\r\n\t\t\tonMouseDown={ ( event ) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif ( isLinkActive() ) {\r\n\t\t\t\t\tunwrapLink();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// eslint-disable-next-line no-alert\r\n\t\t\t\tconst url = window.prompt( 'Enter the URL of the link:' );\r\n\t\t\t\tif ( ! url ) return;\r\n\t\t\t\tinsertLink( url );\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t<LinkIcon />\r\n\t\t</Button>\r\n\t);\r\n};\r\nexport default Link;\r\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,UAAU,EAAEC,MAAM,EAAEC,KAAK,QAAQ,OAAO;AAGjD;AACA;AACA;AACA,OAAOC,MAAM,MAAM,WAAW;AAC9B,OAAOC,QAAQ,MAAM,aAAa;AAKlC,MAAMC,IAAuB,GAAGC,IAAA,IAAkB;EAAA,IAAhB;IAAEC;EAAO,CAAC,GAAAD,IAAA;EAC3C,MAAME,UAAU,GAAKC,GAAW,IAAM;IACrC,IAAKF,MAAM,CAACG,SAAS,EAAG;MACvBC,QAAQ,CAAEF,GAAG,CAAE;IAChB;EACD,CAAC;EACD,MAAMG,YAAY,GAAGA,CAAA,KAAM;IAC1B,MAAM,CAAEC,IAAI,CAAE,GAAGZ,MAAM,CAACa,KAAK,CAAEP,MAAM,EAAE;MACtCQ,KAAK,EAAIC,CAAa,IAAMA,CAAC,CAACC,IAAI,KAAK;IACxC,CAAC,CAAE;IACH,OAAO,CAAC,CAAEJ,IAAI;EACf,CAAC;EAED,MAAMK,UAAU,GAAGA,CAAA,KAAM;IACxBlB,UAAU,CAACmB,WAAW,CAAEZ,MAAM,EAAE;MAC/BQ,KAAK,EAAIC,CAAa,IAAMA,CAAC,CAACC,IAAI,KAAK;IACxC,CAAC,CAAE;EACJ,CAAC;EAED,MAAMN,QAAQ,GAAKF,GAAG,IAAM;IAC3B,IAAKG,YAAY,EAAE,EAAG;MACrBM,UAAU,EAAE;IACb;IAEA,MAAM;MAAER;IAAU,CAAC,GAAGH,MAAM;IAC5B,MAAMa,WAAW,GAAGV,SAAS,IAAIR,KAAK,CAACkB,WAAW,CAAEV,SAAS,CAAE;IAC/D,MAAMG,IAAI,GAAG;MACZI,IAAI,EAAE,MAAM;MACZR,GAAG;MACHY,QAAQ,EAAED,WAAW,GAAG,CAAE;QAAEE,IAAI,EAAEb;MAAI,CAAC,CAAE,GAAG;IAC7C,CAAC;IAED,IAAKW,WAAW,EAAG;MAClBpB,UAAU,CAACuB,WAAW,CAAEhB,MAAM,EAAEM,IAAI,CAAE;IACvC,CAAC,MAAM;MACNb,UAAU,CAACwB,SAAS,CAAEjB,MAAM,EAAEM,IAAI,EAAE;QAAEY,KAAK,EAAE;MAAK,CAAC,CAAE;MACrDzB,UAAU,CAAC0B,QAAQ,CAAEnB,MAAM,EAAE;QAAEoB,IAAI,EAAE;MAAM,CAAC,CAAE;IAC/C;EACD,CAAC;EAED,OACCC,aAAA,CAACzB,MAAM;IACN0B,MAAM,EAAGjB,YAAY,EAAI;IACzBkB,WAAW,EAAKC,KAAK,IAAM;MAC1BA,KAAK,CAACC,cAAc,EAAE;MACtB,IAAKpB,YAAY,EAAE,EAAG;QACrBM,UAAU,EAAE;QACZ;MACD;MACA;MACA,MAAMT,GAAG,GAAGwB,MAAM,CAACC,MAAM,CAAE,4BAA4B,CAAE;MACzD,IAAK,CAAEzB,GAAG,EAAG;MACbD,UAAU,CAAEC,GAAG,CAAE;IAClB;EAAG,GAEHmB,aAAA,CAACxB,QAAQ,OAAG,CACJ;AAEX,CAAC;AACD,eAAeC,IAAI"}