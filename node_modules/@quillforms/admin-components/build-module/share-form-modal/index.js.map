{"version":3,"names":["useEffect","useState","useSelect","apiFetch","addQueryArgs","buildQueryString","Modal","css","classnames","LinkPlaceholder","ShareFormModal","_ref","formId","closeModal","isFetching","setIsFetching","permalink","setPermalink","hiddenFields","select","_select$getHiddenFiel","getHiddenFields","path","_fields","then","res","link","length","query","hash","field","includes","name","Object","keys","createElement","className","title","onRequestClose","href","target","rel"],"sources":["@quillforms/admin-components/src/share-form-modal/index.tsx"],"sourcesContent":["/**\r\n * WordPress Dependencies\r\n */\r\nimport { useEffect, useState } from 'react';\r\nimport { useSelect } from '@wordpress/data';\r\nimport apiFetch from '@wordpress/api-fetch';\r\nimport { addQueryArgs, buildQueryString } from '@wordpress/url';\r\nimport { Modal } from '@wordpress/components';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\n\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport LinkPlaceholder from './link-placeholder';\r\n\r\ninterface Props {\r\n\tformId: number;\r\n\tcloseModal: () => void;\r\n}\r\nconst ShareFormModal: React.FC< Props > = ( { formId, closeModal } ) => {\r\n\tconst [ isFetching, setIsFetching ] = useState( true );\r\n\tconst [ permalink, setPermalink ] = useState( '' );\r\n\tconst { hiddenFields } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\thiddenFields:\r\n\t\t\t\tselect(\r\n\t\t\t\t\t'quillForms/hidden-fields-editor'\r\n\t\t\t\t\t//@ts-expect-error\r\n\t\t\t\t)?.getHiddenFields() ?? [],\r\n\t\t};\r\n\t} );\r\n\r\n\t// Invalidate resolution for entity record on unmount\r\n\tuseEffect( () => {\r\n\t\tapiFetch( {\r\n\t\t\tpath: addQueryArgs( `/wp/v2/quill_forms/${ formId }`, {\r\n\t\t\t\t_fields: [ 'link' ],\r\n\t\t\t} ),\r\n\t\t} ).then( ( res ) => {\r\n\t\t\tsetIsFetching( false );\r\n\t\t\t//@ts-expect-error\r\n\t\t\tsetPermalink( res.link );\r\n\t\t} );\r\n\t}, [] );\r\n\r\n\tlet link = permalink;\r\n\tif ( hiddenFields.length > 0 ) {\r\n\t\tconst query = {};\r\n\t\tconst hash = {};\r\n\t\tfor ( const field of hiddenFields ) {\r\n\t\t\tif (\r\n\t\t\t\t[\r\n\t\t\t\t\t'utm_source',\r\n\t\t\t\t\t'utm_medium',\r\n\t\t\t\t\t'utm_campaign',\r\n\t\t\t\t\t'utm_term',\r\n\t\t\t\t\t'utm_content',\r\n\t\t\t\t].includes( field.name )\r\n\t\t\t) {\r\n\t\t\t\tquery[ field.name ] = 'xxxxx';\r\n\t\t\t} else {\r\n\t\t\t\thash[ field.name ] = 'xxxxx';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ( Object.keys( query ).length ) {\r\n\t\t\tlink += '?' + buildQueryString( query );\r\n\t\t}\r\n\t\tif ( Object.keys( hash ).length ) {\r\n\t\t\tlink += '#' + buildQueryString( hash );\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\tcss`\r\n\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\tmin-width: 420px !important;\r\n\t\t\t\t\tmax-width: 470px !important;\r\n\t\t\t\t\tborder-radius: 10px;\r\n\t\t\t\t\tz-index: 1111111;\r\n\t\t\t\t`\r\n\t\t\t) }\r\n\t\t\ttitle=\"Share form\"\r\n\t\t\tonRequestClose={ closeModal }\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'admin-components-share-form-modal__link',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\tmargin-bottom: 6px;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t` }\r\n\t\t\t\t>\r\n\t\t\t\t\tLink\r\n\t\t\t\t</div>\r\n\t\t\t\t{ isFetching ? (\r\n\t\t\t\t\t<LinkPlaceholder />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\tpadding: 8px;\r\n\t\t\t\t\t\t\tbackground: #eeeeee;\r\n\t\t\t\t\t\t` }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<a href={ link } target=\"_blank\" rel=\"noreferrer\">\r\n\t\t\t\t\t\t\t{ link }\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'admin-components-share-form-modal__shortcode',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\tmargin-bottom: 6px;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t` }\r\n\t\t\t\t>\r\n\t\t\t\t\tShortcode\r\n\t\t\t\t</div>\r\n\t\t\t\t{ isFetching ? (\r\n\t\t\t\t\t<LinkPlaceholder />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\tpadding: 8px;\r\n\t\t\t\t\t\t\tbackground: #eeeeee;\r\n\t\t\t\t\t\t` }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ `[quillforms id=\"${ formId }\" width=\"100%\"]` }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'admin-components-share-form-modal__embed',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\tmargin-bottom: 6px;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t` }\r\n\t\t\t\t>\r\n\t\t\t\t\tEmbed\r\n\t\t\t\t</div>\r\n\t\t\t\t{ isFetching ? (\r\n\t\t\t\t\t<LinkPlaceholder />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\tpadding: 8px;\r\n\t\t\t\t\t\t\tbackground: #eeeeee;\r\n\t\t\t\t\t\t` }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ `<iframe src=\"${ link }\" width=\"100%\" height=\"600\" style=\"border:0;\"></iframe>` }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default ShareFormModal;\r\n"],"mappings":"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"}