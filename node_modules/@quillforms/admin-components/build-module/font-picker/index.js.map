{"version":3,"names":["useState","useRef","useEffect","search","chevronDown","Icon","FixedSizeList","List","pick","classNames","FontItem","FontPicker","_ref","fonts","selectedFont","setFont","showList","setShowList","searchKeyword","setSearchKeyword","filteredFonts","Object","keys","filter","key","toLowerCase","includes","selectedFontIndex","findIndex","fontKey","filteredFontsKeys","wrapperRef","searchRef","listRef","handleClickOutside","e","target","current","contains","document","addEventListener","removeEventListener","focus","scrollToItem","createElement","className","role","hidden","onClick","icon","ref","type","value","onChange","width","overscanCount","height","length","itemCount","itemSize","_ref2","index","style","setTimeout","font","fontType"],"sources":["@quillforms/admin-components/src/font-picker/index.tsx"],"sourcesContent":["/**\r\n * WordPress Dependencies\r\n */\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { search, chevronDown } from '@wordpress/icons';\r\nimport { Icon } from '@wordpress/components';\r\n/**\r\n * External Dependencies\r\n */\r\nimport { FixedSizeList as List } from 'react-window';\r\nimport { pick } from 'lodash';\r\nimport classNames from 'classnames';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport FontItem from './font-item';\r\n\r\ninterface Props {\r\n\tfonts: Record<string, string>;\r\n\tselectedFont: string;\r\n\tsetFont: (font: string) => void;\r\n}\r\nconst FontPicker: React.FC<Props> = ({ fonts, selectedFont, setFont }) => {\r\n\tconst [showList, setShowList] = useState<boolean>(false);\r\n\tconst [searchKeyword, setSearchKeyword] = useState<string>('');\r\n\tconst filteredFonts = pick(\r\n\t\tfonts,\r\n\t\tObject.keys(fonts).filter((key) =>\r\n\t\t\tkey.toLowerCase().includes(searchKeyword.toLowerCase())\r\n\t\t)\r\n\t);\r\n\tconst selectedFontIndex = Object.keys(fonts).findIndex(\r\n\t\t(fontKey) => fontKey === selectedFont\r\n\t);\r\n\tconst filteredFontsKeys = Object.keys(filteredFonts);\r\n\tconst wrapperRef = useRef<HTMLDivElement | null>(null);\r\n\tconst searchRef = useRef<HTMLInputElement | null>(null);\r\n\tconst listRef = useRef<List | null>(null);\r\n\r\n\tconst handleClickOutside = (e: MouseEvent) => {\r\n\t\tif (\r\n\t\t\te.target &&\r\n\t\t\twrapperRef.current &&\r\n\t\t\t!wrapperRef.current.contains(e.target as Node)\r\n\t\t) {\r\n\t\t\tsetShowList(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Attaching the previous event with UseEffect hook\r\n\tuseEffect(() => {\r\n\t\t// Bind the event listener\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\t// Unbind the event listener on clean up\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showList) {\r\n\t\t\tsearchRef?.current?.focus();\r\n\t\t\tsetSearchKeyword('');\r\n\t\t\tif (selectedFontIndex > -1)\r\n\t\t\t\tlistRef?.current?.scrollToItem(selectedFontIndex, 'center');\r\n\t\t} else {\r\n\t\t\tsetSearchKeyword('');\r\n\t\t}\r\n\t}, [showList]);\r\n\r\n\treturn (\r\n\t\t<div className=\"admin-components-font-picker\">\r\n\t\t\t<div\r\n\t\t\t\trole=\"presentation\"\r\n\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t'admin-components-font-picker__select',\r\n\t\t\t\t\t{ hidden: showList }\r\n\t\t\t\t)}\r\n\t\t\t\tonClick={() => setShowList(true)}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"admin-components-font-picker__selected-font\">\r\n\t\t\t\t\t{selectedFont}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Icon icon={chevronDown} />\r\n\t\t\t</div>\r\n\t\t\t{showList && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"admin-components-font-picker__fonts-search-wrapper\"\r\n\t\t\t\t\tref={wrapperRef}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"admin-components-font-picker__search\">\r\n\t\t\t\t\t\t<Icon icon={search} />\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tref={searchRef}\r\n\t\t\t\t\t\t\tclassName=\"admin-components-font-picker__input\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tvalue={searchKeyword}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetSearchKeyword(e.target.value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<List\r\n\t\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\t\tref={listRef}\r\n\t\t\t\t\t\toverscanCount={12}\r\n\t\t\t\t\t\tclassName=\"admin-components-font-picker__fonts-list\"\r\n\t\t\t\t\t\theight={filteredFontsKeys.length > 0 ? 250 : 20}\r\n\t\t\t\t\t\titemCount={filteredFontsKeys.length}\r\n\t\t\t\t\t\titemSize={35}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{({ index, style }) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\trole=\"presentation\"\r\n\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t'admin-components-font-picker__fonts-list-item' +\r\n\t\t\t\t\t\t\t\t\t\t(filteredFontsKeys[index] ===\r\n\t\t\t\t\t\t\t\t\t\t\tselectedFont\r\n\t\t\t\t\t\t\t\t\t\t\t? ' selected'\r\n\t\t\t\t\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tstyle={style}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetFont(filteredFontsKeys[index]);\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowList(false);\r\n\t\t\t\t\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FontItem\r\n\t\t\t\t\t\t\t\t\t\tfont={filteredFontsKeys[index]}\r\n\t\t\t\t\t\t\t\t\t\tfontType={\r\n\t\t\t\t\t\t\t\t\t\t\tfilteredFonts[\r\n\t\t\t\t\t\t\t\t\t\t\tfilteredFontsKeys[index]\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default FontPicker;\r\n"],"mappings":"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"}