{"version":3,"names":["_blocks","require","_react","_components","_icons","_data","_classnames","_interopRequireDefault","_emotion","_tinycolor","areEqual","prevProps","nextProps","disabled","BlockTypesListItem","memo","_ref","blockName","index","disableAnimation","destinationIndex","parent","isMounted","setIsMounted","useState","useEffect","setTimeout","blockType","useSelect","select","getBlockType","icon","src","blockDefault","plus","renderedIcon","_element","createElement","Icon","insertEmptyFieldAnswer","useDispatch","__experimentalInsertBlock","setCurrentBlock","generateBlockId","Math","random","toString","substr","createBlock","name","attributes","arguments","length","undefined","id","sanitizeBlockAttributes","onClick","e","stopPropagation","blockToInsert","supports","editable","document","querySelector","getElementById","scrollIntoView","behavior","className","classNames","css","tinycolor","color","setAlpha","mounted","style","backgroundColor","title","_default","exports","default"],"sources":["@quillforms/admin-components/src/block-types-list-item/index.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\r\n/* eslint-disable jsx-a11y/click-events-have-key-events */\r\n/**\r\n * QuillForms Dependencies\r\n */\r\nimport type {\r\n\tIconDescriptor,\r\n\tFormBlock,\r\n\tIcon as IconType,\r\n} from '@quillforms/types';\r\nimport { sanitizeBlockAttributes } from '@quillforms/blocks';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { memo, useState, useEffect } from 'react';\r\n// @ts-expect-error\r\nimport { Icon, Dashicon } from '@wordpress/components';\r\nimport { blockDefault, plus } from '@wordpress/icons';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { FC } from 'react';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport classNames from 'classnames';\r\nimport { css } from 'emotion';\r\nimport tinycolor from 'tinycolor2';\r\n\r\nconst areEqual = (prevProps: Props, nextProps: Props): boolean => {\r\n\tif (prevProps.disabled === nextProps.disabled) return true;\r\n\treturn false;\r\n};\r\ninterface Props {\r\n\tdisabled: boolean;\r\n\tblockName: string;\r\n\tindex: number;\r\n\tdisableAnimation?: boolean;\r\n\tdestinationIndex: number;\r\n\tparent?: string;\r\n}\r\nconst BlockTypesListItem: FC<Props> = memo(\r\n\t({\r\n\t\tdisabled,\r\n\t\tblockName,\r\n\t\tindex,\r\n\t\tdisableAnimation,\r\n\t\tdestinationIndex,\r\n\t\tparent,\r\n\t}) => {\r\n\t\tconst [isMounted, setIsMounted] = useState(false);\r\n\r\n\t\tuseEffect(() => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetIsMounted(true);\r\n\t\t\t}, 50);\r\n\t\t}, []);\r\n\t\tconst { blockType } = useSelect((select) => {\r\n\t\t\treturn {\r\n\t\t\t\tblockType:\r\n\t\t\t\t\tselect('quillForms/blocks').getBlockType(blockName),\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tif (!blockType) return null;\r\n\t\tlet { icon } = blockType;\r\n\t\tif ((icon as IconDescriptor)?.src === 'block-default') {\r\n\t\t\ticon = {\r\n\t\t\t\tsrc: blockDefault,\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (!icon) icon = plus;\r\n\t\tconst renderedIcon = (\r\n\t\t\t<Icon\r\n\t\t\t\ticon={\r\n\t\t\t\t\t((icon as IconDescriptor).src as IconType)\r\n\t\t\t\t\t\t? ((icon as IconDescriptor).src as IconType)\r\n\t\t\t\t\t\t// @ts-expect-error\r\n\t\t\t\t\t\t: (icon as Dashicon.Icon)\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tconst { insertEmptyFieldAnswer } = useDispatch(\r\n\t\t\t'quillForms/renderer-core'\r\n\t\t);\r\n\t\tconst { __experimentalInsertBlock, setCurrentBlock } = useDispatch(\r\n\t\t\t'quillForms/block-editor'\r\n\t\t);\r\n\t\tconst generateBlockId = (): string => {\r\n\t\t\treturn Math.random().toString(36).substr(2, 9);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Returns a block object given its type and attributes.\r\n\t\t *\r\n\t\t * @param {string} name       Block name.\r\n\t\t * @param {Object} attributes Block attributes.\r\n\t\t *\r\n\t\t * @throws {Error} If the block type isn't registered.\r\n\t\t * @return {Object?} Block object.\r\n\t\t */\r\n\t\tconst createBlock = (\r\n\t\t\tname: string,\r\n\t\t\tattributes: Record<string, unknown> = {}\r\n\t\t): FormBlock | void => {\r\n\t\t\t// Blocks are stored with a unique ID, the assigned type name, the block\r\n\t\t\t// attributes.\r\n\t\t\treturn {\r\n\t\t\t\tid: generateBlockId(),\r\n\t\t\t\tname,\r\n\t\t\t\tattributes: sanitizeBlockAttributes(name, attributes),\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\tif (disabled) return;\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tconst blockToInsert = createBlock(blockName);\r\n\t\t\t\t\tif (blockToInsert) {\r\n\t\t\t\t\t\t// blockToInsert.id = generateBlockId();\r\n\t\t\t\t\t\tif (blockType.supports.editable)\r\n\t\t\t\t\t\t\tinsertEmptyFieldAnswer(\r\n\t\t\t\t\t\t\t\tblockToInsert.id,\r\n\t\t\t\t\t\t\t\tblockName\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t__experimentalInsertBlock(\r\n\t\t\t\t\t\t\tblockToInsert,\r\n\t\t\t\t\t\t\tdestinationIndex,\r\n\t\t\t\t\t\t\tparent\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t!document.querySelector(\r\n\t\t\t\t\t\t\t\t\t`#block-editor-box-wrapper-${blockToInsert.id} .block-editor-block-edit`\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tsetCurrentBlock(blockToInsert.id);\r\n\t\t\t\t\t\t\t\tdocument\r\n\t\t\t\t\t\t\t\t\t?.getElementById(\r\n\t\t\t\t\t\t\t\t\t\t`block-editor-box-wrapper-${blockToInsert.id}`\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t?.scrollIntoView({ behavior: 'smooth' });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 80);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t'admin-components-blocks-list-item',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\t&:not( .animation-disabled ) {\r\n\t\t\t\t\t\t\topacity: 0;\r\n\t\t\t\t\t\t\ttransform: translateX( -15px );\r\n\t\t\t\t\t\t\ttransition: transform 0.3s ease ${index * 0.1}s,\r\n\t\t\t\t\t\t\t\topacity 0.3s ease ${index * 0.1}s;\r\n\r\n\t\t\t\t\t\t\t&.mounted {\r\n\t\t\t\t\t\t\t\topacity: 1;\r\n\t\t\t\t\t\t\t\ttransform: scale( 1 );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\t\tbackground: ${tinycolor(blockType?.color)\r\n\t\t\t\t\t\t\t.setAlpha(0.1)\r\n\t\t\t\t\t\t\t.toString()};\r\n\t\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t`,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdisabled: disabled ? true : false,\r\n\t\t\t\t\t\tmounted: isMounted,\r\n\t\t\t\t\t\t'animation-disabled': disableAnimation,\r\n\t\t\t\t\t}\r\n\t\t\t\t)}\r\n\t\t\t>\r\n\t\t\t\t<span\r\n\t\t\t\t\tclassName=\"admin-components-blocks-list-item__icon-wrapper\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackgroundColor: blockType?.color\r\n\t\t\t\t\t\t\t? blockType.color\r\n\t\t\t\t\t\t\t: '#bb426f',\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"admin-components-blocks-list-item__icon\">\r\n\t\t\t\t\t\t{renderedIcon}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className=\"admin-components-blocks-list-item__block-name\">\r\n\t\t\t\t\t{blockType?.title}\r\n\t\t\t\t</span>\r\n\t\t\t\t{(blockType?.name === 'group' || blockType?.name === 'slider') && (\r\n\t\t\t\t\t<div className=\"admin-components-control-label__new-feature\">\r\n\t\t\t\t\t\tNEW\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t},\r\n\tareEqual\r\n);\r\n\r\nexport default BlockTypesListItem;\r\n"],"mappings":";;;;;;;;AAUA,IAAAA,OAAA,GAAAC,OAAA;AAKA,IAAAC,MAAA,GAAAD,OAAA;AAEA,IAAAE,WAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AAMA,IAAAK,WAAA,GAAAC,sBAAA,CAAAN,OAAA;AACA,IAAAO,QAAA,GAAAP,OAAA;AACA,IAAAQ,UAAA,GAAAF,sBAAA,CAAAN,OAAA;AA3BA;AACA;AACA;AACA;AACA;;AAQA;AACA;AACA;;AAEA;;AAMA;AACA;AACA;;AAKA,MAAMS,QAAQ,GAAGA,CAACC,SAAgB,EAAEC,SAAgB,KAAc;EACjE,IAAID,SAAS,CAACE,QAAQ,KAAKD,SAAS,CAACC,QAAQ,EAAE,OAAO,IAAI;EAC1D,OAAO,KAAK;AACb,CAAC;AASD,MAAMC,kBAA6B,GAAG,IAAAC,WAAI,EACzCC,IAAA,IAOM;EAAA,IAPL;IACAH,QAAQ;IACRI,SAAS;IACTC,KAAK;IACLC,gBAAgB;IAChBC,gBAAgB;IAChBC;EACD,CAAC,GAAAL,IAAA;EACA,MAAM,CAACM,SAAS,EAAEC,YAAY,CAAC,GAAG,IAAAC,eAAQ,EAAC,KAAK,CAAC;EAEjD,IAAAC,gBAAS,EAAC,MAAM;IACfC,UAAU,CAAC,MAAM;MAChBH,YAAY,CAAC,IAAI,CAAC;IACnB,CAAC,EAAE,EAAE,CAAC;EACP,CAAC,EAAE,EAAE,CAAC;EACN,MAAM;IAAEI;EAAU,CAAC,GAAG,IAAAC,eAAS,EAAEC,MAAM,IAAK;IAC3C,OAAO;MACNF,SAAS,EACRE,MAAM,CAAC,mBAAmB,CAAC,CAACC,YAAY,CAACb,SAAS;IACpD,CAAC;EACF,CAAC,CAAC;EAEF,IAAI,CAACU,SAAS,EAAE,OAAO,IAAI;EAC3B,IAAI;IAAEI;EAAK,CAAC,GAAGJ,SAAS;EACxB,IAAKI,IAAI,EAAqBC,GAAG,KAAK,eAAe,EAAE;IACtDD,IAAI,GAAG;MACNC,GAAG,EAAEC;IACN,CAAC;EACF;EACA,IAAI,CAACF,IAAI,EAAEA,IAAI,GAAGG,WAAI;EACtB,MAAMC,YAAY,GACjB,IAAAC,QAAA,CAAAC,aAAA,EAAClC,WAAA,CAAAmC,IAAI;IACJP,IAAI,EACDA,IAAI,CAAoBC,GAAG,GACxBD,IAAI,CAAoBC;IAC5B;IAAA,EACGD;EACJ,EAEF;EACD,MAAM;IAAEQ;EAAuB,CAAC,GAAG,IAAAC,iBAAW,EAC7C,0BAA0B,CAC1B;EACD,MAAM;IAAEC,yBAAyB;IAAEC;EAAgB,CAAC,GAAG,IAAAF,iBAAW,EACjE,yBAAyB,CACzB;EACD,MAAMG,eAAe,GAAGA,CAAA,KAAc;IACrC,OAAOC,IAAI,CAACC,MAAM,EAAE,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;EAC/C,CAAC;;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,MAAMC,WAAW,GAAG,SAAAA,CACnBC,IAAY,EAEU;IAAA,IADtBC,UAAmC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IAExC;IACA;IACA,OAAO;MACNG,EAAE,EAAEX,eAAe,EAAE;MACrBM,IAAI;MACJC,UAAU,EAAE,IAAAK,+BAAuB,EAACN,IAAI,EAAEC,UAAU;IACrD,CAAC;EACF,CAAC;EAED,OACC,IAAAd,QAAA,CAAAC,aAAA;IACCmB,OAAO,EAAGC,CAAC,IAAK;MACf,IAAI5C,QAAQ,EAAE;MACd4C,CAAC,CAACC,eAAe,EAAE;MACnB,MAAMC,aAAa,GAAGX,WAAW,CAAC/B,SAAS,CAAC;MAC5C,IAAI0C,aAAa,EAAE;QAClB;QACA,IAAIhC,SAAS,CAACiC,QAAQ,CAACC,QAAQ,EAC9BtB,sBAAsB,CACrBoB,aAAa,CAACL,EAAE,EAChBrC,SAAS,CACT;QACFwB,yBAAyB,CACxBkB,aAAa,EACbvC,gBAAgB,EAChBC,MAAM,CACN;QACDK,UAAU,CAAC,MAAM;UAChB,IACC,CAACoC,QAAQ,CAACC,aAAa,CACrB,6BAA4BJ,aAAa,CAACL,EAAG,2BAA0B,CACxE,EACA;YACDZ,eAAe,CAACiB,aAAa,CAACL,EAAE,CAAC;YACjCQ,QAAQ,EACLE,cAAc,CACd,4BAA2BL,aAAa,CAACL,EAAG,EAAC,CAC9C,EACCW,cAAc,CAAC;cAAEC,QAAQ,EAAE;YAAS,CAAC,CAAC;UAC1C;QACD,CAAC,EAAE,EAAE,CAAC;MACP;IACD,CAAE;IACFC,SAAS,EAAE,IAAAC,mBAAU,EACpB,mCAAmC,EACnC,IAAAC,YAAG,CAAC;AACT;AACA;AACA;AACA,yCAAyCnD,KAAK,GAAG,GAAI;AACrD,4BAA4BA,KAAK,GAAG,GAAI;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,IAAAoD,kBAAS,EAAC3C,SAAS,EAAE4C,KAAK,CAAC,CACxCC,QAAQ,CAAC,GAAG,CAAC,CACb1B,QAAQ,EAAG;AACnB;AACA;AACA,MAAM,EACD;MACCjC,QAAQ,EAAEA,QAAQ,GAAG,IAAI,GAAG,KAAK;MACjC4D,OAAO,EAAEnD,SAAS;MAClB,oBAAoB,EAAEH;IACvB,CAAC;EACA,GAEF,IAAAiB,QAAA,CAAAC,aAAA;IACC8B,SAAS,EAAC,iDAAiD;IAC3DO,KAAK,EAAE;MACNC,eAAe,EAAEhD,SAAS,EAAE4C,KAAK,GAC9B5C,SAAS,CAAC4C,KAAK,GACf;IACJ;EAAE,GAEF,IAAAnC,QAAA,CAAAC,aAAA;IAAM8B,SAAS,EAAC;EAAyC,GACvDhC,YAAY,CACP,CACD,EACP,IAAAC,QAAA,CAAAC,aAAA;IAAM8B,SAAS,EAAC;EAA+C,GAC7DxC,SAAS,EAAEiD,KAAK,CACX,EACN,CAACjD,SAAS,EAAEsB,IAAI,KAAK,OAAO,IAAItB,SAAS,EAAEsB,IAAI,KAAK,QAAQ,KAC5D,IAAAb,QAAA,CAAAC,aAAA;IAAK8B,SAAS,EAAC;EAA6C,GAAC,KAE7D,CACA,CACI;AAER,CAAC,EACDzD,QAAQ,CACR;AAAC,IAAAmE,QAAA,GAEa/D,kBAAkB;AAAAgE,OAAA,CAAAC,OAAA,GAAAF,QAAA"}