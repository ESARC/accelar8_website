{"version":3,"names":["_react","require","_data","_apiFetch","_interopRequireDefault","_url","_components","_emotion","_classnames","_linkPlaceholder","ShareFormModal","_ref","formId","closeModal","isFetching","setIsFetching","useState","permalink","setPermalink","hiddenFields","useSelect","select","_select$getHiddenFiel","getHiddenFields","useEffect","apiFetch","path","addQueryArgs","_fields","then","res","link","length","query","hash","field","includes","name","Object","keys","buildQueryString","_element","createElement","Modal","className","classnames","css","title","onRequestClose","default","href","target","rel","_default","exports"],"sources":["@quillforms/admin-components/src/share-form-modal/index.tsx"],"sourcesContent":["/**\r\n * WordPress Dependencies\r\n */\r\nimport { useEffect, useState } from 'react';\r\nimport { useSelect } from '@wordpress/data';\r\nimport apiFetch from '@wordpress/api-fetch';\r\nimport { addQueryArgs, buildQueryString } from '@wordpress/url';\r\nimport { Modal } from '@wordpress/components';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\n\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport LinkPlaceholder from './link-placeholder';\r\n\r\ninterface Props {\r\n\tformId: number;\r\n\tcloseModal: () => void;\r\n}\r\nconst ShareFormModal: React.FC< Props > = ( { formId, closeModal } ) => {\r\n\tconst [ isFetching, setIsFetching ] = useState( true );\r\n\tconst [ permalink, setPermalink ] = useState( '' );\r\n\tconst { hiddenFields } = useSelect( ( select ) => {\r\n\t\treturn {\r\n\t\t\thiddenFields:\r\n\t\t\t\tselect(\r\n\t\t\t\t\t'quillForms/hidden-fields-editor'\r\n\t\t\t\t\t//@ts-expect-error\r\n\t\t\t\t)?.getHiddenFields() ?? [],\r\n\t\t};\r\n\t} );\r\n\r\n\t// Invalidate resolution for entity record on unmount\r\n\tuseEffect( () => {\r\n\t\tapiFetch( {\r\n\t\t\tpath: addQueryArgs( `/wp/v2/quill_forms/${ formId }`, {\r\n\t\t\t\t_fields: [ 'link' ],\r\n\t\t\t} ),\r\n\t\t} ).then( ( res ) => {\r\n\t\t\tsetIsFetching( false );\r\n\t\t\t//@ts-expect-error\r\n\t\t\tsetPermalink( res.link );\r\n\t\t} );\r\n\t}, [] );\r\n\r\n\tlet link = permalink;\r\n\tif ( hiddenFields.length > 0 ) {\r\n\t\tconst query = {};\r\n\t\tconst hash = {};\r\n\t\tfor ( const field of hiddenFields ) {\r\n\t\t\tif (\r\n\t\t\t\t[\r\n\t\t\t\t\t'utm_source',\r\n\t\t\t\t\t'utm_medium',\r\n\t\t\t\t\t'utm_campaign',\r\n\t\t\t\t\t'utm_term',\r\n\t\t\t\t\t'utm_content',\r\n\t\t\t\t].includes( field.name )\r\n\t\t\t) {\r\n\t\t\t\tquery[ field.name ] = 'xxxxx';\r\n\t\t\t} else {\r\n\t\t\t\thash[ field.name ] = 'xxxxx';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ( Object.keys( query ).length ) {\r\n\t\t\tlink += '?' + buildQueryString( query );\r\n\t\t}\r\n\t\tif ( Object.keys( hash ).length ) {\r\n\t\t\tlink += '#' + buildQueryString( hash );\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\tcss`\r\n\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\tmin-width: 420px !important;\r\n\t\t\t\t\tmax-width: 470px !important;\r\n\t\t\t\t\tborder-radius: 10px;\r\n\t\t\t\t\tz-index: 1111111;\r\n\t\t\t\t`\r\n\t\t\t) }\r\n\t\t\ttitle=\"Share form\"\r\n\t\t\tonRequestClose={ closeModal }\r\n\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'admin-components-share-form-modal__link',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\tmargin-bottom: 6px;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t` }\r\n\t\t\t\t>\r\n\t\t\t\t\tLink\r\n\t\t\t\t</div>\r\n\t\t\t\t{ isFetching ? (\r\n\t\t\t\t\t<LinkPlaceholder />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\tpadding: 8px;\r\n\t\t\t\t\t\t\tbackground: #eeeeee;\r\n\t\t\t\t\t\t` }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<a href={ link } target=\"_blank\" rel=\"noreferrer\">\r\n\t\t\t\t\t\t\t{ link }\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'admin-components-share-form-modal__shortcode',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\tmargin-bottom: 6px;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t` }\r\n\t\t\t\t>\r\n\t\t\t\t\tShortcode\r\n\t\t\t\t</div>\r\n\t\t\t\t{ isFetching ? (\r\n\t\t\t\t\t<LinkPlaceholder />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\tpadding: 8px;\r\n\t\t\t\t\t\t\tbackground: #eeeeee;\r\n\t\t\t\t\t\t` }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ `[quillforms id=\"${ formId }\" width=\"100%\"]` }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'admin-components-share-form-modal__embed',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\tmargin-bottom: 6px;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t` }\r\n\t\t\t\t>\r\n\t\t\t\t\tEmbed\r\n\t\t\t\t</div>\r\n\t\t\t\t{ isFetching ? (\r\n\t\t\t\t\t<LinkPlaceholder />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={ css`\r\n\t\t\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\t\t\tpadding: 8px;\r\n\t\t\t\t\t\t\tbackground: #eeeeee;\r\n\t\t\t\t\t\t` }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ `<iframe src=\"${ link }\" width=\"100%\" height=\"600\" style=\"border:0;\"></iframe>` }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default ShareFormModal;\r\n"],"mappings":"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"}