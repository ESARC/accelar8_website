{"version":3,"names":["_selectControl","_interopRequireDefault","require","_i18n","_context","_option","_richText","Select","_ref","_SelectOptions$find","hideChooseOption","sections","options","value","onChange","isToggleEnabled","placeholder","excerptLength","useComboboxControlContext","SelectOptions","key","name","_element","createElement","default","label","__","style","display","section","push","onClick","ev","stopPropagation","className","forEach","option","index","getPlainExcerpt","order","iconBox","hasSection","undefined","find","Number","isInteger","type","_ref2","selectedItem","_default","exports"],"sources":["@quillforms/admin-components/src/combobox-control/select/index.tsx"],"sourcesContent":["/**\r\n * QuillForms Dependencies\r\n */\r\nimport SelectControl from '../../select-control';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\n// @ts-expect-error\r\nimport type { CustomSelectControl } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport { useComboboxControlContext } from '../context';\r\nimport Option from './option';\r\nimport { getPlainExcerpt } from '../../rich-text';\r\n\r\ninterface Props {\r\n\thideChooseOption?: boolean;\r\n}\r\n\r\nconst Select: React.FC< Props > = ( { hideChooseOption } ) => {\r\n\tconst {\r\n\t\tsections,\r\n\t\toptions,\r\n\t\tvalue,\r\n\t\tonChange,\r\n\t\tisToggleEnabled,\r\n\t\tplaceholder,\r\n\t\texcerptLength,\r\n\t} = useComboboxControlContext();\r\n\r\n\t// @ts-expect-error\r\n\tconst SelectOptions: CustomSelectControl.Option[] = [\r\n\t\t{\r\n\t\t\tkey: 'select',\r\n\t\t\tname: (\r\n\t\t\t\t<Option\r\n\t\t\t\t\tlabel={\r\n\t\t\t\t\t\tplaceholder ?? __( 'Choose an option', 'quillforms' )\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t\tstyle: hideChooseOption ? { display: 'none' } : {},\r\n\t\t},\r\n\t];\r\n\t// add each section with related options.\r\n\tfor ( const section of sections ) {\r\n\t\tSelectOptions.push( {\r\n\t\t\tkey: section.key,\r\n\t\t\tname: (\r\n\t\t\t\t<div onClick={ ( ev ) => ev.stopPropagation() }>\r\n\t\t\t\t\t{ section.label }\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t\tclassName: 'combobox-control-select-section',\r\n\t\t} );\r\n\t\toptions.forEach( ( option, index ) => {\r\n\t\t\tif ( option.section === section.key ) {\r\n\t\t\t\tSelectOptions.push( {\r\n\t\t\t\t\tkey: index,\r\n\t\t\t\t\tname: (\r\n\t\t\t\t\t\t<Option\r\n\t\t\t\t\t\t\tlabel={ getPlainExcerpt(\r\n\t\t\t\t\t\t\t\toption.label,\r\n\t\t\t\t\t\t\t\texcerptLength\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\torder={ option?.order }\r\n\t\t\t\t\t\t\ticonBox={ option.iconBox }\r\n\t\t\t\t\t\t\thasSection\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t),\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\t// add options of undefined section.\r\n\toptions.forEach( ( option, index ) => {\r\n\t\tif ( option.section === undefined ) {\r\n\t\t\tSelectOptions.push( {\r\n\t\t\t\tkey: index,\r\n\t\t\t\tname: (\r\n\t\t\t\t\t<Option label={ option.label } iconBox={ option.iconBox } />\r\n\t\t\t\t),\r\n\t\t\t} );\r\n\t\t}\r\n\t} );\r\n\t// add custom value option.\r\n\tif ( isToggleEnabled ) {\r\n\t\tSelectOptions.push( {\r\n\t\t\tkey: 'toggle',\r\n\t\t\tname: <Option label={ __( 'Custom Value', 'quillforms' ) } />,\r\n\t\t} );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"combobox-control-select\">\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel=\"\"\r\n\t\t\t\tvalue={\r\n\t\t\t\t\tSelectOptions.find(\r\n\t\t\t\t\t\t( option ) =>\r\n\t\t\t\t\t\t\tNumber.isInteger( option.key ) &&\r\n\t\t\t\t\t\t\toptions[ option.key ].type === value.type &&\r\n\t\t\t\t\t\t\toptions[ option.key ].value === value.value\r\n\t\t\t\t\t) ?? SelectOptions[ 0 ]\r\n\t\t\t\t}\r\n\t\t\t\tonChange={ ( { selectedItem } ) => {\r\n\t\t\t\t\tif ( selectedItem ) {\r\n\t\t\t\t\t\tif ( selectedItem.key === 'select' ) {\r\n\t\t\t\t\t\t\t// clear selection\r\n\t\t\t\t\t\t\tonChange( {} );\r\n\t\t\t\t\t\t} else if ( selectedItem.key === 'toggle' ) {\r\n\t\t\t\t\t\t\t// toggle to rich text editor\r\n\t\t\t\t\t\t\tonChange( { type: 'text' } );\r\n\t\t\t\t\t\t} else if ( Number.isInteger( selectedItem.key ) ) {\r\n\t\t\t\t\t\t\t// update selected value\r\n\t\t\t\t\t\t\tconst option = options[ selectedItem.key ];\r\n\t\t\t\t\t\t\tonChange( {\r\n\t\t\t\t\t\t\t\ttype: option.type,\r\n\t\t\t\t\t\t\t\tvalue: option.value,\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} }\r\n\t\t\t\toptions={ SelectOptions }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Select;\r\n"],"mappings":"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"}