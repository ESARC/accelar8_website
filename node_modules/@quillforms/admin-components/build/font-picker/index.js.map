{"version":3,"names":["_react","require","_icons","_components","_reactWindow","_lodash","_classnames","_interopRequireDefault","_fontItem","FontPicker","_ref","fonts","selectedFont","setFont","showList","setShowList","useState","searchKeyword","setSearchKeyword","filteredFonts","pick","Object","keys","filter","key","toLowerCase","includes","selectedFontIndex","findIndex","fontKey","filteredFontsKeys","wrapperRef","useRef","searchRef","listRef","handleClickOutside","e","target","current","contains","useEffect","document","addEventListener","removeEventListener","focus","scrollToItem","_element","createElement","className","role","classNames","hidden","onClick","Icon","icon","chevronDown","ref","search","type","value","onChange","FixedSizeList","width","overscanCount","height","length","itemCount","itemSize","_ref2","index","style","setTimeout","default","font","fontType","_default","exports"],"sources":["@quillforms/admin-components/src/font-picker/index.tsx"],"sourcesContent":["/**\r\n * WordPress Dependencies\r\n */\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { search, chevronDown } from '@wordpress/icons';\r\nimport { Icon } from '@wordpress/components';\r\n/**\r\n * External Dependencies\r\n */\r\nimport { FixedSizeList as List } from 'react-window';\r\nimport { pick } from 'lodash';\r\nimport classNames from 'classnames';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport FontItem from './font-item';\r\n\r\ninterface Props {\r\n\tfonts: Record<string, string>;\r\n\tselectedFont: string;\r\n\tsetFont: (font: string) => void;\r\n}\r\nconst FontPicker: React.FC<Props> = ({ fonts, selectedFont, setFont }) => {\r\n\tconst [showList, setShowList] = useState<boolean>(false);\r\n\tconst [searchKeyword, setSearchKeyword] = useState<string>('');\r\n\tconst filteredFonts = pick(\r\n\t\tfonts,\r\n\t\tObject.keys(fonts).filter((key) =>\r\n\t\t\tkey.toLowerCase().includes(searchKeyword.toLowerCase())\r\n\t\t)\r\n\t);\r\n\tconst selectedFontIndex = Object.keys(fonts).findIndex(\r\n\t\t(fontKey) => fontKey === selectedFont\r\n\t);\r\n\tconst filteredFontsKeys = Object.keys(filteredFonts);\r\n\tconst wrapperRef = useRef<HTMLDivElement | null>(null);\r\n\tconst searchRef = useRef<HTMLInputElement | null>(null);\r\n\tconst listRef = useRef<List | null>(null);\r\n\r\n\tconst handleClickOutside = (e: MouseEvent) => {\r\n\t\tif (\r\n\t\t\te.target &&\r\n\t\t\twrapperRef.current &&\r\n\t\t\t!wrapperRef.current.contains(e.target as Node)\r\n\t\t) {\r\n\t\t\tsetShowList(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Attaching the previous event with UseEffect hook\r\n\tuseEffect(() => {\r\n\t\t// Bind the event listener\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\t// Unbind the event listener on clean up\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showList) {\r\n\t\t\tsearchRef?.current?.focus();\r\n\t\t\tsetSearchKeyword('');\r\n\t\t\tif (selectedFontIndex > -1)\r\n\t\t\t\tlistRef?.current?.scrollToItem(selectedFontIndex, 'center');\r\n\t\t} else {\r\n\t\t\tsetSearchKeyword('');\r\n\t\t}\r\n\t}, [showList]);\r\n\r\n\treturn (\r\n\t\t<div className=\"admin-components-font-picker\">\r\n\t\t\t<div\r\n\t\t\t\trole=\"presentation\"\r\n\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t'admin-components-font-picker__select',\r\n\t\t\t\t\t{ hidden: showList }\r\n\t\t\t\t)}\r\n\t\t\t\tonClick={() => setShowList(true)}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"admin-components-font-picker__selected-font\">\r\n\t\t\t\t\t{selectedFont}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Icon icon={chevronDown} />\r\n\t\t\t</div>\r\n\t\t\t{showList && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"admin-components-font-picker__fonts-search-wrapper\"\r\n\t\t\t\t\tref={wrapperRef}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"admin-components-font-picker__search\">\r\n\t\t\t\t\t\t<Icon icon={search} />\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tref={searchRef}\r\n\t\t\t\t\t\t\tclassName=\"admin-components-font-picker__input\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tvalue={searchKeyword}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetSearchKeyword(e.target.value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<List\r\n\t\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\t\tref={listRef}\r\n\t\t\t\t\t\toverscanCount={12}\r\n\t\t\t\t\t\tclassName=\"admin-components-font-picker__fonts-list\"\r\n\t\t\t\t\t\theight={filteredFontsKeys.length > 0 ? 250 : 20}\r\n\t\t\t\t\t\titemCount={filteredFontsKeys.length}\r\n\t\t\t\t\t\titemSize={35}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{({ index, style }) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\trole=\"presentation\"\r\n\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t'admin-components-font-picker__fonts-list-item' +\r\n\t\t\t\t\t\t\t\t\t\t(filteredFontsKeys[index] ===\r\n\t\t\t\t\t\t\t\t\t\t\tselectedFont\r\n\t\t\t\t\t\t\t\t\t\t\t? ' selected'\r\n\t\t\t\t\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tstyle={style}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetFont(filteredFontsKeys[index]);\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowList(false);\r\n\t\t\t\t\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FontItem\r\n\t\t\t\t\t\t\t\t\t\tfont={filteredFontsKeys[index]}\r\n\t\t\t\t\t\t\t\t\t\tfontType={\r\n\t\t\t\t\t\t\t\t\t\t\tfilteredFonts[\r\n\t\t\t\t\t\t\t\t\t\t\tfilteredFontsKeys[index]\r\n\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default FontPicker;\r\n"],"mappings":";;;;;;;;AAGA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AACA,IAAAE,WAAA,GAAAF,OAAA;AAIA,IAAAG,YAAA,GAAAH,OAAA;AACA,IAAAI,OAAA,GAAAJ,OAAA;AACA,IAAAK,WAAA,GAAAC,sBAAA,CAAAN,OAAA;AAKA,IAAAO,SAAA,GAAAD,sBAAA,CAAAN,OAAA;AAhBA;AACA;AACA;;AAIA;AACA;AACA;;AAKA;AACA;AACA;;AAQA,MAAMQ,UAA2B,GAAGC,IAAA,IAAsC;EAAA,IAArC;IAAEC,KAAK;IAAEC,YAAY;IAAEC;EAAQ,CAAC,GAAAH,IAAA;EACpE,MAAM,CAACI,QAAQ,EAAEC,WAAW,CAAC,GAAG,IAAAC,eAAQ,EAAU,KAAK,CAAC;EACxD,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAG,IAAAF,eAAQ,EAAS,EAAE,CAAC;EAC9D,MAAMG,aAAa,GAAG,IAAAC,YAAI,EACzBT,KAAK,EACLU,MAAM,CAACC,IAAI,CAACX,KAAK,CAAC,CAACY,MAAM,CAAEC,GAAG,IAC7BA,GAAG,CAACC,WAAW,EAAE,CAACC,QAAQ,CAACT,aAAa,CAACQ,WAAW,EAAE,CAAC,CACvD,CACD;EACD,MAAME,iBAAiB,GAAGN,MAAM,CAACC,IAAI,CAACX,KAAK,CAAC,CAACiB,SAAS,CACpDC,OAAO,IAAKA,OAAO,KAAKjB,YAAY,CACrC;EACD,MAAMkB,iBAAiB,GAAGT,MAAM,CAACC,IAAI,CAACH,aAAa,CAAC;EACpD,MAAMY,UAAU,GAAG,IAAAC,aAAM,EAAwB,IAAI,CAAC;EACtD,MAAMC,SAAS,GAAG,IAAAD,aAAM,EAA0B,IAAI,CAAC;EACvD,MAAME,OAAO,GAAG,IAAAF,aAAM,EAAc,IAAI,CAAC;EAEzC,MAAMG,kBAAkB,GAAIC,CAAa,IAAK;IAC7C,IACCA,CAAC,CAACC,MAAM,IACRN,UAAU,CAACO,OAAO,IAClB,CAACP,UAAU,CAACO,OAAO,CAACC,QAAQ,CAACH,CAAC,CAACC,MAAM,CAAS,EAC7C;MACDtB,WAAW,CAAC,KAAK,CAAC;IACnB;EACD,CAAC;;EAED;EACA,IAAAyB,gBAAS,EAAC,MAAM;IACf;IACAC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEP,kBAAkB,CAAC;IAC1D,OAAO,MAAM;MACZ;MACAM,QAAQ,CAACE,mBAAmB,CAAC,WAAW,EAAER,kBAAkB,CAAC;IAC9D,CAAC;EACF,CAAC,CAAC;EAEF,IAAAK,gBAAS,EAAC,MAAM;IACf,IAAI1B,QAAQ,EAAE;MACbmB,SAAS,EAAEK,OAAO,EAAEM,KAAK,EAAE;MAC3B1B,gBAAgB,CAAC,EAAE,CAAC;MACpB,IAAIS,iBAAiB,GAAG,CAAC,CAAC,EACzBO,OAAO,EAAEI,OAAO,EAAEO,YAAY,CAAClB,iBAAiB,EAAE,QAAQ,CAAC;IAC7D,CAAC,MAAM;MACNT,gBAAgB,CAAC,EAAE,CAAC;IACrB;EACD,CAAC,EAAE,CAACJ,QAAQ,CAAC,CAAC;EAEd,OACC,IAAAgC,QAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC;EAA8B,GAC5C,IAAAF,QAAA,CAAAC,aAAA;IACCE,IAAI,EAAC,cAAc;IACnBD,SAAS,EAAE,IAAAE,mBAAU,EACpB,sCAAsC,EACtC;MAAEC,MAAM,EAAErC;IAAS,CAAC,CACnB;IACFsC,OAAO,EAAEA,CAAA,KAAMrC,WAAW,CAAC,IAAI;EAAE,GAEjC,IAAA+B,QAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC;EAA6C,GAC1DpC,YAAY,CACR,EACN,IAAAkC,QAAA,CAAAC,aAAA,EAAC5C,WAAA,CAAAkD,IAAI;IAACC,IAAI,EAAEC;EAAY,EAAG,CACtB,EACLzC,QAAQ,IACR,IAAAgC,QAAA,CAAAC,aAAA;IACCC,SAAS,EAAC,oDAAoD;IAC9DQ,GAAG,EAAEzB;EAAW,GAEhB,IAAAe,QAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC;EAAsC,GACpD,IAAAF,QAAA,CAAAC,aAAA,EAAC5C,WAAA,CAAAkD,IAAI;IAACC,IAAI,EAAEG;EAAO,EAAG,EACtB,IAAAX,QAAA,CAAAC,aAAA;IACCS,GAAG,EAAEvB,SAAU;IACfe,SAAS,EAAC,qCAAqC;IAC/CU,IAAI,EAAC,MAAM;IACXC,KAAK,EAAE1C,aAAc;IACrB2C,QAAQ,EAAGxB,CAAC,IACXlB,gBAAgB,CAACkB,CAAC,CAACC,MAAM,CAACsB,KAAK;EAC/B,EACA,CACG,EACN,IAAAb,QAAA,CAAAC,aAAA,EAAC3C,YAAA,CAAAyD,aAAI;IACJC,KAAK,EAAE,MAAO;IACdN,GAAG,EAAEtB,OAAQ;IACb6B,aAAa,EAAE,EAAG;IAClBf,SAAS,EAAC,0CAA0C;IACpDgB,MAAM,EAAElC,iBAAiB,CAACmC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAG;IAChDC,SAAS,EAAEpC,iBAAiB,CAACmC,MAAO;IACpCE,QAAQ,EAAE;EAAG,GAEZC,KAAA,IAAsB;IAAA,IAArB;MAAEC,KAAK;MAAEC;IAAM,CAAC,GAAAF,KAAA;IACjB,OACC,IAAAtB,QAAA,CAAAC,aAAA;MACCE,IAAI,EAAC,cAAc;MACnBD,SAAS,EACR,+CAA+C,IAC9ClB,iBAAiB,CAACuC,KAAK,CAAC,KACxBzD,YAAY,GACV,WAAW,GACX,EAAE,CACL;MACD0D,KAAK,EAAEA,KAAM;MACblB,OAAO,EAAEA,CAAA,KAAM;QACdvC,OAAO,CAACiB,iBAAiB,CAACuC,KAAK,CAAC,CAAC;QACjCE,UAAU,CAAC,MAAM;UAChBxD,WAAW,CAAC,KAAK,CAAC;QACnB,CAAC,EAAE,GAAG,CAAC;MACR;IAAE,GAEF,IAAA+B,QAAA,CAAAC,aAAA,EAACvC,SAAA,CAAAgE,OAAQ;MACRC,IAAI,EAAE3C,iBAAiB,CAACuC,KAAK,CAAE;MAC/BK,QAAQ,EACPvD,aAAa,CACbW,iBAAiB,CAACuC,KAAK,CAAC;IAExB,EACA,CACG;EAER,CAAC,CACK,CAER,CACI;AAER,CAAC;AAAC,IAAAM,QAAA,GACalE,UAAU;AAAAmE,OAAA,CAAAJ,OAAA,GAAAG,QAAA"}