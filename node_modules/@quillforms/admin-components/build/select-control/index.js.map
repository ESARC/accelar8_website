{"version":3,"names":["_downshift","require","_classnames","_interopRequireDefault","_icons","_i18n","_react","_reactDom","_components","itemToString","item","name","span","document","createElement","render","tmp","appendChild","children","innerText","undefined","stateReducer","_ref","_ref2","selectedItem","type","changes","props","items","useSelect","stateChangeTypes","ToggleButtonKeyDownArrowDown","Math","min","indexOf","length","ToggleButtonKeyDownArrowUp","max","SelectControl","_ref3","__next36pxDefaultSize","className","hideLabelFromVision","label","describedBy","options","onChange","onSelectedItemChange","value","_selectedItem","getLabelProps","getToggleButtonProps","getMenuProps","getItemProps","isOpen","highlightedIndex","initialSelectedItem","getDescribedBy","__","sprintf","menuProps","onKeyDownHandler","useCallback","e","stopPropagation","onKeyDown","startsWith","_element","classnames","VisuallyHidden","_extends2","default","as","Button","Icon","icon","chevronDown","size","map","index","key","__experimentalHint","style","check","_default","exports"],"sources":["@quillforms/admin-components/src/select-control/index.tsx"],"sourcesContent":["// Forked from @WordPress/components and added a feature of supporting item labels as React components.\r\n/**\r\n * External dependencies\r\n */\r\nimport { useSelect } from 'downshift';\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Icon, check, chevronDown } from '@wordpress/icons';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useCallback } from 'react';\r\nimport { render } from 'react-dom';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tVisuallyHidden,\r\n} from '@wordpress/components';\r\n\r\nconst itemToString = ( item ) => {\r\n\tif ( item?.name ) {\r\n\t\tif ( typeof item.name === 'string' ) {\r\n\t\t\treturn item.name;\r\n\t\t}\r\n\t\tconst span = document.createElement( 'span' );\r\n\t\trender( item.name, span );\r\n\t\tconst tmp = document.createElement( 'div' );\r\n\t\ttmp.appendChild( span );\r\n\t\t// @ts-expect-error\r\n\t\treturn tmp.children[ 0 ]?.innerText;\r\n\t\t// var div = document.createElement( 'div' );\r\n\t\t// div.innerHTML = reactToHtmlString;\r\n\t\t// return div.textContent || div.innerText || '';\r\n\t}\r\n\treturn undefined;\r\n};\r\n// This is needed so that in Windows, where\r\n// the menu does not necessarily open on\r\n// key up/down, you can still switch between\r\n// options with the menu closed.\r\nconst stateReducer = (\r\n\t{ selectedItem },\r\n\t{ type, changes, props: { items } }\r\n) => {\r\n\tswitch ( type ) {\r\n\t\tcase useSelect.stateChangeTypes.ToggleButtonKeyDownArrowDown:\r\n\t\t\t// If we already have a selected item, try to select the next one,\r\n\t\t\t// without circular navigation. Otherwise, select the first item.\r\n\t\t\treturn {\r\n\t\t\t\tselectedItem:\r\n\t\t\t\t\titems[\r\n\t\t\t\t\t\tselectedItem\r\n\t\t\t\t\t\t\t? Math.min(\r\n\t\t\t\t\t\t\t\t\titems.indexOf( selectedItem ) + 1,\r\n\t\t\t\t\t\t\t\t\titems.length - 1\r\n\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t: 0\r\n\t\t\t\t\t],\r\n\t\t\t};\r\n\t\tcase useSelect.stateChangeTypes.ToggleButtonKeyDownArrowUp:\r\n\t\t\t// If we already have a selected item, try to select the previous one,\r\n\t\t\t// without circular navigation. Otherwise, select the last item.\r\n\t\t\treturn {\r\n\t\t\t\tselectedItem:\r\n\t\t\t\t\titems[\r\n\t\t\t\t\t\tselectedItem\r\n\t\t\t\t\t\t\t? Math.max( items.indexOf( selectedItem ) - 1, 0 )\r\n\t\t\t\t\t\t\t: items.length - 1\r\n\t\t\t\t\t],\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn changes;\r\n\t}\r\n};\r\n\r\ninterface Props {\r\n\tclassName?: string;\r\n\tlabel?: string;\r\n\toptions?: object;\r\n\tonChange: (item: any) => void;\r\n\tvalue: any;\r\n}\r\nconst SelectControl:React.FC<Props> = ( {\r\n\t/** Start opting into the larger default height that will become the default size in a future version. */\r\n\t// @ts-expect-error\r\n\t__next36pxDefaultSize = false,\r\n\tclassName,\r\n\t// @ts-expect-error\r\n\thideLabelFromVision,\r\n\tlabel,\r\n\t// @ts-expect-error\r\n\tdescribedBy,\r\n\toptions: items,\r\n\tonChange: onSelectedItemChange,\r\n\tvalue: _selectedItem,\r\n} ) => {\r\n\tconst {\r\n\t\tgetLabelProps,\r\n\t\tgetToggleButtonProps,\r\n\t\tgetMenuProps,\r\n\t\tgetItemProps,\r\n\t\tisOpen,\r\n\t\thighlightedIndex,\r\n\t\tselectedItem,\r\n\t} = useSelect( {\r\n\t\t// @ts-expect-error\r\n\t\tinitialSelectedItem: items[ 0 ],\r\n\t\t// @ts-expect-error\r\n\t\titems,\r\n\t\titemToString,\r\n\t\tonSelectedItemChange,\r\n\t\t...( typeof _selectedItem !== 'undefined' && _selectedItem !== null\r\n\t\t\t? { selectedItem: _selectedItem }\r\n\t\t\t: undefined ),\r\n\r\n\t\t// @ts-ignore\r\n\t\tstateReducer,\r\n\t} );\r\n\r\n\tfunction getDescribedBy() {\r\n\t\tif ( describedBy ) {\r\n\t\t\treturn describedBy;\r\n\t\t}\r\n\r\n\t\tif ( ! selectedItem ) {\r\n\t\t\treturn __( 'No selection' );\r\n\t\t}\r\n\r\n\t\t// translators: %s: The selected option.\r\n\t\treturn sprintf( __( 'Currently selected: %s' ), selectedItem.name );\r\n\t}\r\n\r\n\tconst menuProps = getMenuProps( {\r\n\t\tclassName: 'components-custom-select-control__menu',\r\n\t\t'aria-hidden': ! isOpen,\r\n\t} );\r\n\r\n\tconst onKeyDownHandler = useCallback(\r\n\t\t( e ) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\tmenuProps?.onKeyDown?.( e );\r\n\t\t},\r\n\t\t[ menuProps ]\r\n\t);\r\n\r\n\t// We need this here, because the null active descendant is not fully ARIA compliant.\r\n\tif (\r\n\t\tmenuProps[ 'aria-activedescendant' ]?.startsWith( 'downshift-null' )\r\n\t) {\r\n\t\tdelete menuProps[ 'aria-activedescendant' ];\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"admin-components-select-control\">\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'components-custom-select-control',\r\n\t\t\t\t\tclassName\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t{ hideLabelFromVision ? (\r\n\t\t\t\t\t<VisuallyHidden as=\"label\" { ...getLabelProps() }>\r\n\t\t\t\t\t\t{ label }\r\n\t\t\t\t\t</VisuallyHidden>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t/* eslint-disable-next-line jsx-a11y/label-has-associated-control, jsx-a11y/label-has-for */\r\n\t\t\t\t\t<label\r\n\t\t\t\t\t\t{ ...getLabelProps( {\r\n\t\t\t\t\t\t\tclassName:\r\n\t\t\t\t\t\t\t\t'components-custom-select-control__label',\r\n\t\t\t\t\t\t} ) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ label }\r\n\t\t\t\t\t</label>\r\n\t\t\t\t) }\r\n\t\t\t\t<Button\r\n\t\t\t\t\t{ ...getToggleButtonProps( {\r\n\t\t\t\t\t\t// This is needed because some speech recognition software don't support `aria-labelledby`.\r\n\t\t\t\t\t\t'aria-label': label,\r\n\t\t\t\t\t\t'aria-labelledby': undefined,\r\n\t\t\t\t\t\tclassName: classnames(\r\n\t\t\t\t\t\t\t'components-custom-select-control__button',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'is-next-36px-default-size':\r\n\t\t\t\t\t\t\t\t\t__next36pxDefaultSize,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t// @ts-expect-error\r\n\t\t\t\t\t\tdescribedBy: getDescribedBy(),\r\n\t\t\t\t\t} ) }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ selectedItem?.name }\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={ chevronDown }\r\n\t\t\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t\t\t'components-custom-select-control__button-icon',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'is-next-36px-default-size':\r\n\t\t\t\t\t\t\t\t\t__next36pxDefaultSize,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tsize={ 18 }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Button>\r\n\t\t\t\t{ /* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */ }\r\n\t\t\t\t<ul { ...menuProps } onKeyDown={ onKeyDownHandler }>\r\n\t\t\t\t\t{ isOpen &&\r\n\t\t\t\t\t    // @ts-expect-error\r\n\t\t\t\t\t\titems.map( ( item, index ) => {\r\n\t\t\t\t\t\t\t//console.log( item );\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t// eslint-disable-next-line react/jsx-key\r\n\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t{ ...getItemProps( {\r\n\t\t\t\t\t\t\t\t\t\titem,\r\n\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\tkey: item.key,\r\n\t\t\t\t\t\t\t\t\t\tclassName: classnames(\r\n\t\t\t\t\t\t\t\t\t\t\titem.className,\r\n\t\t\t\t\t\t\t\t\t\t\t'components-custom-select-control__item',\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t'is-highlighted':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex === highlightedIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t'has-hint':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t!! item.__experimentalHint,\r\n\t\t\t\t\t\t\t\t\t\t\t\t'is-next-36px-default-size':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t__next36pxDefaultSize,\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\tstyle: item.style,\r\n\t\t\t\t\t\t\t\t\t} ) }\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{ item.name }\r\n\t\t\t\t\t\t\t\t\t{ item.__experimentalHint && (\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"components-custom-select-control__item-hint\">\r\n\t\t\t\t\t\t\t\t\t\t\t{ item.__experimentalHint }\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t{ item === selectedItem && (\r\n\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\ticon={ check }\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"components-custom-select-control__item-icon\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} ) }\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default SelectControl;\r\n"],"mappings":"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"}