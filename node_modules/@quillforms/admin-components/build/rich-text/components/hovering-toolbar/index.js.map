{"version":3,"names":["_react","require","_reactDom","_emotion","_slateReact","_slate","_link","_interopRequireDefault","_formatButton","_boldIcon","_italicIcon","Menu","forwardRef","_ref","ref","className","props","_element","createElement","_extends2","default","cx","css","HoveringToolbar","_ref2","toggleFormat","isFormatActive","formattingControls","useRef","editor","useSlate","inFocus","useFocused","useEffect","el","current","selection","Range","isCollapsed","Editor","string","removeAttribute","domSelection","window","getSelection","domRange","getRangeAt","rect","getBoundingClientRect","style","opacity","top","pageYOffset","offsetHeight","left","pageXOffset","offsetWidth","width","createPortal","includes","format","document","body","_default","exports"],"sources":["@quillforms/admin-components/src/rich-text/components/hovering-toolbar/index.tsx"],"sourcesContent":["/**\r\n * WordPress Dependencies\r\n */\r\nimport { useRef, useEffect, forwardRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport { cx, css } from 'emotion';\r\nimport { useSlate, useFocused } from 'slate-react';\r\nimport { Editor, Range } from 'slate';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport Link from '../link';\r\nimport FormatButton from '../format-button';\r\nimport FormatBoldIcon from './bold-icon';\r\nimport FormatItalicIcon from './italic-icon';\r\ninterface Props {\r\n\tclassName: string;\r\n\t[ key: string ]: unknown;\r\n}\r\n\r\nconst Menu = forwardRef< HTMLDivElement, React.PropsWithChildren< Props > >(\r\n\t( { className, ...props }, ref ) => (\r\n\t\t<div\r\n\t\t\t{ ...props }\r\n\t\t\tref={ ref }\r\n\t\t\tclassName={ cx(\r\n\t\t\t\tclassName,\r\n\t\t\t\tcss`\r\n\t\t\t\t\t& > * {\r\n\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t& > * + * {\r\n\t\t\t\t\t\tmargin-left: 15px;\r\n\t\t\t\t\t}\r\n\t\t\t\t`\r\n\t\t\t) }\r\n\t\t/>\r\n\t)\r\n);\r\n\r\nconst HoveringToolbar = ( {\r\n\ttoggleFormat,\r\n\tisFormatActive,\r\n\tformattingControls,\r\n} ) => {\r\n\tconst ref = useRef< HTMLDivElement | null >( null );\r\n\tconst editor = useSlate();\r\n\tconst inFocus = useFocused();\r\n\tuseEffect( () => {\r\n\t\tconst el = ref.current;\r\n\t\tconst { selection } = editor;\r\n\r\n\t\tif ( ! el ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\t! selection ||\r\n\t\t\t! inFocus ||\r\n\t\t\tRange.isCollapsed( selection ) ||\r\n\t\t\tEditor.string( editor, selection ) === ''\r\n\t\t) {\r\n\t\t\tel.removeAttribute( 'style' );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst domSelection = window.getSelection();\r\n\t\tconst domRange = domSelection?.getRangeAt( 0 );\r\n\t\tconst rect = domRange?.getBoundingClientRect();\r\n\t\tel.style.opacity = '1';\r\n\t\tif ( rect ) {\r\n\t\t\tel.style.top = `${\r\n\t\t\t\trect.top + window.pageYOffset - el.offsetHeight\r\n\t\t\t}px`;\r\n\t\t\tel.style.left = `${\r\n\t\t\t\trect.left +\r\n\t\t\t\twindow.pageXOffset -\r\n\t\t\t\tel.offsetWidth / 2 +\r\n\t\t\t\trect.width / 2\r\n\t\t\t}px`;\r\n\t\t}\r\n\t} );\r\n\r\n\treturn createPortal(\r\n\t\t<Menu\r\n\t\t\tref={ ref }\r\n\t\t\tclassName={ css`\r\n\t\t\t\tpadding: 8px 7px 6px;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tz-index: 1;\r\n\t\t\t\ttop: -10000px;\r\n\t\t\t\tleft: -10000px;\r\n\t\t\t\tmargin-top: -6px;\r\n\t\t\t\topacity: 0;\r\n\t\t\t\tbackground-color: #222;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\ttransition: opacity 0.75s;\r\n\r\n\t\t\t\tsvg {\r\n\t\t\t\t\twidth: 20px;\r\n\t\t\t\t}\r\n\t\t\t` }\r\n\t\t>\r\n\t\t\t{ !! formattingControls && formattingControls.includes( 'bold' ) && (\r\n\t\t\t\t<FormatButton\r\n\t\t\t\t\tformat=\"bold\"\r\n\t\t\t\t\ttoggleFormat={ () => toggleFormat( 'bold' ) }\r\n\t\t\t\t\tisFormatActive={ () => isFormatActive( 'bold' ) }\r\n\t\t\t\t>\r\n\t\t\t\t\t<FormatBoldIcon />\r\n\t\t\t\t</FormatButton>\r\n\t\t\t) }\r\n\t\t\t{ !! formattingControls &&\r\n\t\t\t\tformattingControls.includes( 'italic' ) && (\r\n\t\t\t\t\t<FormatButton\r\n\t\t\t\t\t\tformat=\"italic\"\r\n\t\t\t\t\t\ttoggleFormat={ () => toggleFormat( 'italic' ) }\r\n\t\t\t\t\t\tisFormatActive={ () => isFormatActive( 'italic' ) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FormatItalicIcon />\r\n\t\t\t\t\t</FormatButton>\r\n\t\t\t\t) }\r\n\t\t\t{ !! formattingControls &&\r\n\t\t\t\tformattingControls.includes( 'link' ) && (\r\n\t\t\t\t\t<Link editor={ editor } />\r\n\t\t\t\t) }\r\n\t\t</Menu>,\r\n\t\tdocument.body\r\n\t);\r\n};\r\nexport default HoveringToolbar;\r\n"],"mappings":"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"}