{"version":3,"names":["_slate","require","_button","_interopRequireDefault","_linkIcon","Link","_ref","editor","insertLink","url","selection","wrapLink","isLinkActive","link","Editor","nodes","match","n","type","unwrapLink","Transforms","unwrapNodes","isCollapsed","Range","children","text","insertNodes","wrapNodes","split","collapse","edge","_element","createElement","default","active","onMouseDown","event","preventDefault","window","prompt","_default","exports"],"sources":["@quillforms/admin-components/src/rich-text/components/link/index.tsx"],"sourcesContent":["/**\r\n * External Dependencies\r\n */\r\nimport { Transforms, Editor, Range } from 'slate';\r\nimport { CustomNode } from '../../types';\r\n\r\n/**\r\n * Inernal Dependencies\r\n */\r\nimport Button from '../button';\r\nimport LinkIcon from './link-icon';\r\n\r\ninterface Props {\r\n\teditor: Editor;\r\n}\r\nconst Link: React.FC< Props > = ( { editor } ) => {\r\n\tconst insertLink = ( url: string ) => {\r\n\t\tif ( editor.selection ) {\r\n\t\t\twrapLink( url );\r\n\t\t}\r\n\t};\r\n\tconst isLinkActive = () => {\r\n\t\tconst [ link ] = Editor.nodes( editor, {\r\n\t\t\tmatch: ( n: CustomNode ) => n.type === 'link',\r\n\t\t} );\r\n\t\treturn !! link;\r\n\t};\r\n\r\n\tconst unwrapLink = () => {\r\n\t\tTransforms.unwrapNodes( editor, {\r\n\t\t\tmatch: ( n: CustomNode ) => n.type === 'link',\r\n\t\t} );\r\n\t};\r\n\r\n\tconst wrapLink = ( url ) => {\r\n\t\tif ( isLinkActive() ) {\r\n\t\t\tunwrapLink();\r\n\t\t}\r\n\r\n\t\tconst { selection } = editor;\r\n\t\tconst isCollapsed = selection && Range.isCollapsed( selection );\r\n\t\tconst link = {\r\n\t\t\ttype: 'link',\r\n\t\t\turl,\r\n\t\t\tchildren: isCollapsed ? [ { text: url } ] : [],\r\n\t\t};\r\n\r\n\t\tif ( isCollapsed ) {\r\n\t\t\tTransforms.insertNodes( editor, link );\r\n\t\t} else {\r\n\t\t\tTransforms.wrapNodes( editor, link, { split: true } );\r\n\t\t\tTransforms.collapse( editor, { edge: 'end' } );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tactive={ isLinkActive() }\r\n\t\t\tonMouseDown={ ( event ) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif ( isLinkActive() ) {\r\n\t\t\t\t\tunwrapLink();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// eslint-disable-next-line no-alert\r\n\t\t\t\tconst url = window.prompt( 'Enter the URL of the link:' );\r\n\t\t\t\tif ( ! url ) return;\r\n\t\t\t\tinsertLink( url );\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t<LinkIcon />\r\n\t\t</Button>\r\n\t);\r\n};\r\nexport default Link;\r\n"],"mappings":";;;;;;;;AAGA,IAAAA,MAAA,GAAAC,OAAA;AAMA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,SAAA,GAAAD,sBAAA,CAAAF,OAAA;AAVA;AACA;AACA;;AAIA;AACA;AACA;;AAOA,MAAMI,IAAuB,GAAGC,IAAA,IAAkB;EAAA,IAAhB;IAAEC;EAAO,CAAC,GAAAD,IAAA;EAC3C,MAAME,UAAU,GAAKC,GAAW,IAAM;IACrC,IAAKF,MAAM,CAACG,SAAS,EAAG;MACvBC,QAAQ,CAAEF,GAAG,CAAE;IAChB;EACD,CAAC;EACD,MAAMG,YAAY,GAAGA,CAAA,KAAM;IAC1B,MAAM,CAAEC,IAAI,CAAE,GAAGC,aAAM,CAACC,KAAK,CAAER,MAAM,EAAE;MACtCS,KAAK,EAAIC,CAAa,IAAMA,CAAC,CAACC,IAAI,KAAK;IACxC,CAAC,CAAE;IACH,OAAO,CAAC,CAAEL,IAAI;EACf,CAAC;EAED,MAAMM,UAAU,GAAGA,CAAA,KAAM;IACxBC,iBAAU,CAACC,WAAW,CAAEd,MAAM,EAAE;MAC/BS,KAAK,EAAIC,CAAa,IAAMA,CAAC,CAACC,IAAI,KAAK;IACxC,CAAC,CAAE;EACJ,CAAC;EAED,MAAMP,QAAQ,GAAKF,GAAG,IAAM;IAC3B,IAAKG,YAAY,EAAE,EAAG;MACrBO,UAAU,EAAE;IACb;IAEA,MAAM;MAAET;IAAU,CAAC,GAAGH,MAAM;IAC5B,MAAMe,WAAW,GAAGZ,SAAS,IAAIa,YAAK,CAACD,WAAW,CAAEZ,SAAS,CAAE;IAC/D,MAAMG,IAAI,GAAG;MACZK,IAAI,EAAE,MAAM;MACZT,GAAG;MACHe,QAAQ,EAAEF,WAAW,GAAG,CAAE;QAAEG,IAAI,EAAEhB;MAAI,CAAC,CAAE,GAAG;IAC7C,CAAC;IAED,IAAKa,WAAW,EAAG;MAClBF,iBAAU,CAACM,WAAW,CAAEnB,MAAM,EAAEM,IAAI,CAAE;IACvC,CAAC,MAAM;MACNO,iBAAU,CAACO,SAAS,CAAEpB,MAAM,EAAEM,IAAI,EAAE;QAAEe,KAAK,EAAE;MAAK,CAAC,CAAE;MACrDR,iBAAU,CAACS,QAAQ,CAAEtB,MAAM,EAAE;QAAEuB,IAAI,EAAE;MAAM,CAAC,CAAE;IAC/C;EACD,CAAC;EAED,OACC,IAAAC,QAAA,CAAAC,aAAA,EAAC9B,OAAA,CAAA+B,OAAM;IACNC,MAAM,EAAGtB,YAAY,EAAI;IACzBuB,WAAW,EAAKC,KAAK,IAAM;MAC1BA,KAAK,CAACC,cAAc,EAAE;MACtB,IAAKzB,YAAY,EAAE,EAAG;QACrBO,UAAU,EAAE;QACZ;MACD;MACA;MACA,MAAMV,GAAG,GAAG6B,MAAM,CAACC,MAAM,CAAE,4BAA4B,CAAE;MACzD,IAAK,CAAE9B,GAAG,EAAG;MACbD,UAAU,CAAEC,GAAG,CAAE;IAClB;EAAG,GAEH,IAAAsB,QAAA,CAAAC,aAAA,EAAC5B,SAAA,CAAA6B,OAAQ,OAAG,CACJ;AAEX,CAAC;AAAC,IAAAO,QAAA,GACanC,IAAI;AAAAoC,OAAA,CAAAR,OAAA,GAAAO,QAAA"}