{"version":3,"names":["_selectControl","_interopRequireDefault","require","_components","_i18n","_context","_option","Select","_ref","_SelectOptions$find","sections","options","value","onChange","disabled","useMappingKeyControlContext","SelectOptions","key","name","_element","createElement","default","label","__","section","push","onClick","ev","stopPropagation","className","forEach","option","index","isStarred","hasSection","undefined","component","find","Number","isInteger","_ref2","selectedItem","Disabled","_default","exports"],"sources":["@quillforms/admin-components/src/mapping-row/key-control/select/index.tsx"],"sourcesContent":["/**\r\n * QuillForms Dependencies\r\n */\r\nimport SelectControl from '../../../select-control';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\n// @ts-expect-error\r\nimport type { CustomSelectControl } from '@wordpress/components';\r\nimport { Disabled } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport { useMappingKeyControlContext } from '../context';\r\nimport Option from './option';\r\nimport type { Options, Sections } from '..';\r\n\r\ninterface Props {\r\n\tsections: Sections;\r\n\toptions: Options;\r\n}\r\n\r\nconst Select: React.FC< Props > = ( { sections, options } ) => {\r\n\tconst { value, onChange, disabled } = useMappingKeyControlContext();\r\n\r\n\t// @ts-expect-error\r\n\tconst SelectOptions: CustomSelectControl.Option[] = [\r\n\t\t{\r\n\t\t\tkey: 'select',\r\n\t\t\tname: <Option label={ __( 'Choose an option', 'quillforms' ) } />,\r\n\t\t},\r\n\t];\r\n\t// add each section with related options.\r\n\tfor ( const section of sections ) {\r\n\t\tSelectOptions.push( {\r\n\t\t\tkey: section.key,\r\n\t\t\tname: (\r\n\t\t\t\t<div onClick={ ( ev ) => ev.stopPropagation() }>\r\n\t\t\t\t\t{ section.label }\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t\tclassName: 'mapping-key-control-select-section',\r\n\t\t} );\r\n\t\toptions.forEach( ( option, index ) => {\r\n\t\t\tif ( option.section === section.key ) {\r\n\t\t\t\tSelectOptions.push( {\r\n\t\t\t\t\tkey: index,\r\n\t\t\t\t\tname: (\r\n\t\t\t\t\t\t<Option\r\n\t\t\t\t\t\t\tlabel={ option.label }\r\n\t\t\t\t\t\t\tisStarred={ option.isStarred }\r\n\t\t\t\t\t\t\thasSection\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t),\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\t// add options of undefined section.\r\n\toptions.forEach( ( option, index ) => {\r\n\t\tif ( option.section === undefined ) {\r\n\t\t\tSelectOptions.push( {\r\n\t\t\t\tkey: index,\r\n\t\t\t\tname: (\r\n\t\t\t\t\t<Option\r\n\t\t\t\t\t\tlabel={ option.label }\r\n\t\t\t\t\t\tisStarred={ option.isStarred }\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t} );\r\n\t\t}\r\n\t} );\r\n\r\n\tconst component = (\r\n\t\t<div className=\"mapping-key-control-select\">\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel=\"\"\r\n\t\t\t\tvalue={\r\n\t\t\t\t\tSelectOptions.find(\r\n\t\t\t\t\t\t( option ) =>\r\n\t\t\t\t\t\t\tNumber.isInteger( option.key ) &&\r\n\t\t\t\t\t\t\toptions[ option.key ].value === value\r\n\t\t\t\t\t) ?? SelectOptions[ 0 ]\r\n\t\t\t\t}\r\n\t\t\t\tonChange={ ( { selectedItem } ) => {\r\n\t\t\t\t\tif ( selectedItem ) {\r\n\t\t\t\t\t\tif ( selectedItem.key === 'select' ) {\r\n\t\t\t\t\t\t\t// clear\r\n\t\t\t\t\t\t\tonChange( '' );\r\n\t\t\t\t\t\t} else if ( Number.isInteger( selectedItem.key ) ) {\r\n\t\t\t\t\t\t\t// update selected value\r\n\t\t\t\t\t\t\tconst option = options[ selectedItem.key ];\r\n\t\t\t\t\t\t\tonChange( option.value );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} }\r\n\t\t\t\toptions={ SelectOptions }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn disabled ? <Disabled>{ component }</Disabled> : component;\r\n};\r\n\r\nexport default Select;\r\n"],"mappings":"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"}