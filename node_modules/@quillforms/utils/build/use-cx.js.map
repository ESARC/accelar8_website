{"version":3,"names":["_react","require","_utils","_css","_react2","isSerializedStyles","o","every","p","useCx","cache","useEmotionCache","cx","useCallback","Error","_len","arguments","length","classNames","Array","_key","innerCx","map","arg","insertStyles","key","name","exports"],"sources":["@quillforms/utils/src/use-cx.ts"],"sourcesContent":["/**\r\n * External dependencies\r\n */\r\n// @ts-expect-error\r\nimport { __unsafe_useEmotionCache as useEmotionCache } from '@emotion/react';\r\nimport type { SerializedStyles } from '@emotion/serialize';\r\nimport { insertStyles } from '@emotion/utils';\r\n// eslint-disable-next-line no-restricted-imports\r\nimport { cx as innerCx, ClassNamesArg } from '@emotion/css';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback } from 'react';\r\n\r\nconst isSerializedStyles = ( o: any ): o is SerializedStyles =>\r\n\ttypeof o !== 'undefined' &&\r\n\to !== null &&\r\n\t[ 'name', 'styles' ].every( ( p ) => typeof o[ p ] !== 'undefined' );\r\n\r\n/**\r\n * Retrieve a `cx` function that knows how to handle `SerializedStyles`\r\n * returned by the `@emotion/react` `css` function in addition to what\r\n * `cx` normally knows how to handle. It also hooks into the Emotion\r\n * Cache, allowing `css` calls to work inside iframes.\r\n *\r\n * @example\r\n * import { css } from '@emotion/react';\r\n *\r\n * const styles = css`\r\n * \tcolor: red\r\n * `;\r\n *\r\n * function RedText( { className, ...props } ) {\r\n * \tconst cx = useCx();\r\n *\r\n * \tconst classes = cx(styles, className);\r\n *\r\n * \treturn <span className={classes} {...props} />;\r\n * }\r\n */\r\nexport const useCx = () => {\r\n\tconst cache = useEmotionCache();\r\n\r\n\tconst cx = useCallback(\r\n\t\t( ...classNames: ( ClassNamesArg | SerializedStyles )[] ) => {\r\n\t\t\tif ( cache === null ) {\r\n\t\t\t\tthrow new Error(\r\n\t\t\t\t\t'The `useCx` hook should be only used within a valid Emotion Cache Context'\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn innerCx(\r\n\t\t\t\t...classNames.map( ( arg ) => {\r\n\t\t\t\t\tif ( isSerializedStyles( arg ) ) {\r\n\t\t\t\t\t\tinsertStyles( cache, arg, false );\r\n\t\t\t\t\t\treturn `${ cache.key }-${ arg.name }`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn arg;\r\n\t\t\t\t} )\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ cache ]\r\n\t);\r\n\r\n\treturn cx;\r\n};\r\n"],"mappings":";;;;;;AAIA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,MAAA,GAAAD,OAAA;AAEA,IAAAE,IAAA,GAAAF,OAAA;AAKA,IAAAG,OAAA,GAAAH,OAAA;AAbA;AACA;AACA;AACA;;AAIA;;AAGA;AACA;AACA;;AAGA,MAAMI,kBAAkB,GAAKC,CAAM,IAClC,OAAOA,CAAC,KAAK,WAAW,IACxBA,CAAC,KAAK,IAAI,IACV,CAAE,MAAM,EAAE,QAAQ,CAAE,CAACC,KAAK,CAAIC,CAAC,IAAM,OAAOF,CAAC,CAAEE,CAAC,CAAE,KAAK,WAAW,CAAE;;AAErE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAC1B,MAAMC,KAAK,GAAG,IAAAC,+BAAe,GAAE;EAE/B,MAAMC,EAAE,GAAG,IAAAC,mBAAW,EACrB,YAA6D;IAC5D,IAAKH,KAAK,KAAK,IAAI,EAAG;MACrB,MAAM,IAAII,KAAK,CACd,2EAA2E,CAC3E;IACF;IAAC,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EALGC,UAAU,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAVF,UAAU,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAOd,OAAO,IAAAC,OAAO,EACb,GAAGH,UAAU,CAACI,GAAG,CAAIC,GAAG,IAAM;MAC7B,IAAKlB,kBAAkB,CAAEkB,GAAG,CAAE,EAAG;QAChC,IAAAC,mBAAY,EAAEd,KAAK,EAAEa,GAAG,EAAE,KAAK,CAAE;QACjC,OAAQ,GAAGb,KAAK,CAACe,GAAK,IAAIF,GAAG,CAACG,IAAM,EAAC;MACtC;MACA,OAAOH,GAAG;IACX,CAAC,CAAE,CACH;EACF,CAAC,EACD,CAAEb,KAAK,CAAE,CACT;EAED,OAAOE,EAAE;AACV,CAAC;AAACe,OAAA,CAAAlB,KAAA,GAAAA,KAAA"}