{"version":3,"names":["useMessages","useBlockTheme","useState","useEffect","tinyColor","css","classnames","WebsiteOutput","props","id","attributes","setIsValid","setIsAnswered","setValidationErr","showNextBtn","val","setVal","showErrMsg","inputRef","isTouchScreen","setFooterDisplay","isPreview","isReviewing","messages","theme","themeId","answersColor","required","placeholder","validateUrl","url","pattern","RegExp","test","checkfieldValidation","value","changeHandler","e","target","createElement","ref","className","setAlpha","toString","onChange","length","onFocus","onBlur","autoComplete"],"sources":["@quillforms/blocklib-website-block/src/renderer/display.js"],"sourcesContent":["/**\r\n * QuillForms Depndencies\r\n */\r\nimport { useMessages, useBlockTheme } from '@quillforms/renderer-core';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { useState, useEffect } from 'react';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport tinyColor from 'tinycolor2';\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\n\r\nconst WebsiteOutput = ( props ) => {\r\n\tconst {\r\n\t\tid,\r\n\t\tattributes,\r\n\t\tsetIsValid,\r\n\t\tsetIsAnswered,\r\n\t\tsetValidationErr,\r\n\t\tshowNextBtn,\r\n\t\tval,\r\n\t\tsetVal,\r\n\t\tshowErrMsg,\r\n\t\tinputRef,\r\n\t\tisTouchScreen,\r\n\t\tsetFooterDisplay,\r\n\t\tisPreview,\r\n\t\tisReviewing,\r\n\t} = props;\r\n\tconst messages = useMessages();\r\n\tconst theme = useBlockTheme( attributes.themeId );\r\n\tconst answersColor = tinyColor( theme.answersColor );\r\n\tconst { required, placeholder } = attributes;\r\n\r\n\tconst validateUrl = ( url ) => {\r\n\t\tconst pattern = new RegExp(\r\n\t\t\t'^(https?:\\\\/\\\\/)?' + // protocol\r\n\t\t\t\t'((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\r\n\t\t\t\t'((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\r\n\t\t\t\t'(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\r\n\t\t\t\t'(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\r\n\t\t\t\t'(\\\\#[-a-z\\\\d_]*)?$',\r\n\t\t\t'i'\r\n\t\t); // fragment locator\r\n\t\treturn !! pattern.test( url );\r\n\t};\r\n\r\n\tconst checkfieldValidation = ( value ) => {\r\n\t\tif ( required === true && ( ! value || value === '' ) ) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.required' ] );\r\n\t\t} else if ( ! validateUrl( value ) && value ) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.url' ] );\r\n\t\t} else {\r\n\t\t\tsetIsValid( true );\r\n\t\t\tsetValidationErr( null );\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( isPreview || ! isReviewing ) checkfieldValidation( val );\r\n\t}, [ attributes ] );\r\n\r\n\tconst changeHandler = ( e ) => {\r\n\t\tconst value = e.target.value;\r\n\t\tcheckfieldValidation( value );\r\n\t\tsetVal( value );\r\n\t\tshowErrMsg( false );\r\n\t\tif ( value !== '' ) {\r\n\t\t\tshowNextBtn( true );\r\n\t\t\tsetIsAnswered( true );\r\n\t\t} else {\r\n\t\t\tsetIsAnswered( false );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<input\r\n\t\t\tref={ inputRef }\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\tcss`\r\n\t\t\t\t\t& {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\tpadding-bottom: 8px;\r\n\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\ttransition: box-shadow 0.1s ease-out 0s;\r\n\t\t\t\t\t\tbox-shadow: ${ answersColor.setAlpha( 0.3 ).toString() }\r\n\t\t\t\t\t\t\t0px 1px !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\tbox-shadow: ${ answersColor.setAlpha( 1 ).toString() }\r\n\t\t\t\t\t\t\t0px 2px !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t`\r\n\t\t\t) }\r\n\t\t\tid={ 'website-' + id }\r\n\t\t\tplaceholder={ placeholder === false ? 'https://' : placeholder }\r\n\t\t\tonChange={ changeHandler }\r\n\t\t\tvalue={ val && val.length > 0 ? val : '' }\r\n\t\t\tonFocus={ () => {\r\n\t\t\t\tif ( isTouchScreen ) {\r\n\t\t\t\t\tsetFooterDisplay( false );\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\tonBlur={ () => {\r\n\t\t\t\tif ( isTouchScreen ) {\r\n\t\t\t\t\tsetFooterDisplay( true );\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\tautoComplete=\"off\"\r\n\t\t/>\r\n\t);\r\n};\r\nexport default WebsiteOutput;\r\n"],"mappings":"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"}