{"version":3,"names":["_rendererCore","require","_react","_lodash","_choicesWrapper","_interopRequireDefault","multipleChoiceTimer","MultipleChoiceOutput","props","id","attributes","setIsValid","setIsAnswered","showNextBtn","setValidationErr","val","setVal","next","isActive","isAnimating","showErrMsg","isPreview","isReviewing","multiple","required","min","max","messages","useMessages","choiceClicked","setChoiceClicked","useState","checkfieldValidation","$val","length","size","useEffect","clearTimeout","setTimeout","_element","createElement","className","default","_default","exports"],"sources":["@quillforms/blocklib-multiple-choice-block/src/renderer/display.js"],"sourcesContent":["/**\r\n * QuillForms Depndencies\r\n */\r\nimport { useMessages } from '@quillforms/renderer-core';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { useEffect, useState } from 'react';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport { size } from 'lodash';\r\n\r\n/**\r\n * Internal Dependencies\r\n */\r\nimport ChoicesWrapper from './choices-wrapper';\r\n\r\nlet multipleChoiceTimer;\r\nconst MultipleChoiceOutput = (props) => {\r\n\tconst {\r\n\t\tid,\r\n\t\tattributes,\r\n\t\tsetIsValid,\r\n\t\tsetIsAnswered,\r\n\t\tshowNextBtn,\r\n\t\tsetValidationErr,\r\n\t\tval,\r\n\t\tsetVal,\r\n\t\tnext,\r\n\t\tisActive,\r\n\t\tisAnimating,\r\n\t\tshowErrMsg,\r\n\t\tisPreview,\r\n\t\tisReviewing,\r\n\t} = props;\r\n\tconst { multiple, required, min, max } = attributes;\r\n\tconst messages = useMessages();\r\n\tconst [choiceClicked, setChoiceClicked] = useState(null);\r\n\tconst checkfieldValidation = ($val) => {\r\n\t\tif (required === true && (!$val || $val.length === 0)) {\r\n\t\t\tsetIsValid(false);\r\n\t\t\tsetValidationErr(messages['label.errorAlert.required']);\r\n\t\t} else {\r\n\t\t\tif (multiple && min && size($val) < min) {\r\n\t\t\t\tsetIsValid(false);\r\n\t\t\t\tsetValidationErr(messages['label.errorAlert.minChoices']);\r\n\t\t\t}\r\n\t\t\telse if (multiple && max && size($val) > max) {\r\n\t\t\t\tsetIsValid(false);\r\n\t\t\t\tsetValidationErr(messages['label.errorAlert.maxChoices']);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetIsValid(true);\r\n\t\t\t\tsetValidationErr(null);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => clearTimeout(multipleChoiceTimer);\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isActive) {\r\n\t\t\tclearTimeout(multipleChoiceTimer);\r\n\t\t}\r\n\t\tif (!isActive && !isAnimating) {\r\n\t\t\tsetChoiceClicked(null);\r\n\t\t}\r\n\t}, [isActive, isAnimating]);\r\n\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(multipleChoiceTimer);\r\n\t\tif (choiceClicked && val?.length > 0 && !multiple) {\r\n\t\t\tmultipleChoiceTimer = setTimeout(() => {\r\n\t\t\t\tnext();\r\n\t\t\t}, 600);\r\n\t\t}\r\n\t}, [choiceClicked]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isPreview || !isReviewing) checkfieldValidation(val);\r\n\t}, [attributes]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (val?.length > 0) {\r\n\t\t\tsetIsAnswered(true);\r\n\t\t} else {\r\n\t\t\tsetIsAnswered(false);\r\n\t\t}\r\n\t\tif (multiple) {\r\n\t\t\tif (val?.length > 0) {\r\n\t\t\t\tshowNextBtn(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [val, attributes]);\r\n\r\n\treturn (\r\n\t\t<div className=\"qf-multiple-choice-block-renderer\">\r\n\t\t\t<ChoicesWrapper\r\n\t\t\t\tattributes={attributes}\r\n\t\t\t\tid={id}\r\n\t\t\t\tval={val}\r\n\t\t\t\tisActive={isActive}\r\n\t\t\t\tcheckfieldValidation={checkfieldValidation}\r\n\t\t\t\tsetVal={setVal}\r\n\t\t\t\tsetChoiceClicked={(val) => {\r\n\t\t\t\t\tshowErrMsg(false);\r\n\t\t\t\t\tsetChoiceClicked(val);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default MultipleChoiceOutput;\r\n"],"mappings":"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"}