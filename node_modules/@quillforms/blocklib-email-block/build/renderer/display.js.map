{"version":3,"names":["_rendererCore","require","_data","_react","_tinycolor","_interopRequireDefault","_emotion","_classnames","EmailValidator","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","EmailOutput","props","id","attributes","setIsValid","setIsAnswered","setValidationErr","showNextBtn","val","setVal","showErrMsg","next","inputRef","isTouchScreen","setFooterDisplay","isPreview","isReviewing","theme","useBlockTheme","themeId","messages","useMessages","answersColor","tinyColor","required","placeholder","checkFieldValidation","value","length","validate","useEffect","changeHandler","e","target","_element","createElement","ref","className","classnames","css","setAlpha","toString","type","onChange","onFocus","onBlur","autoComplete","_default","exports"],"sources":["@quillforms/blocklib-email-block/src/renderer/display.js"],"sourcesContent":["/**\r\n * QuillForms Dependencies\r\n */\r\nimport { useMessages, useBlockTheme } from '@quillforms/renderer-core';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useEffect } from 'react';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport tinyColor from 'tinycolor2';\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\nimport * as EmailValidator from 'email-validator';\r\n\r\nconst EmailOutput = ( props ) => {\r\n\tconst {\r\n\t\tid,\r\n\t\tattributes,\r\n\t\tsetIsValid,\r\n\t\tsetIsAnswered,\r\n\t\tsetValidationErr,\r\n\t\tshowNextBtn,\r\n\t\tval,\r\n\t\tsetVal,\r\n\t\tshowErrMsg,\r\n\t\tnext,\r\n\t\tinputRef,\r\n\t\tisTouchScreen,\r\n\t\tsetFooterDisplay,\r\n\t\tisPreview,\r\n\t\tisReviewing,\r\n\t} = props;\r\n\tconst theme = useBlockTheme( attributes.themeId );\r\n\tconst messages = useMessages();\r\n\tconst answersColor = tinyColor( theme.answersColor );\r\n\tconst { required, placeholder } = attributes;\r\n\r\n\tconst checkFieldValidation = ( value ) => {\r\n\t\tif (\r\n\t\t\trequired === true &&\r\n\t\t\t( ! value || value === '' || value.length === 0 )\r\n\t\t) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.required' ] );\r\n\t\t} else if (\r\n\t\t\tvalue &&\r\n\t\t\t! EmailValidator.validate( value ) &&\r\n\t\t\tvalue.length > 0\r\n\t\t) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.email' ] );\r\n\t\t} else {\r\n\t\t\tsetIsValid( true );\r\n\t\t\tsetValidationErr( null );\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( isPreview || ! isReviewing ) checkFieldValidation( val );\r\n\t}, [ required ] );\r\n\r\n\tconst changeHandler = ( e ) => {\r\n\t\tconst value = e.target.value;\r\n\t\tcheckFieldValidation( value );\r\n\t\tsetVal( value );\r\n\t\tshowErrMsg( false );\r\n\t\tif ( ! value ) {\r\n\t\t\tsetIsAnswered( false );\r\n\t\t} else {\r\n\t\t\tsetIsAnswered( true );\r\n\t\t\tshowNextBtn( true );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<input\r\n\t\t\tref={ inputRef }\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\tcss`\r\n\t\t\t\t\t& {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\tpadding-bottom: 8px !important;\r\n\t\t\t\t\t\tpadding-left: 0 !important;\r\n\t\t\t\t\t\tpadding-right: 0 !important;\r\n\t\t\t\t\t\tborder-radius: 0 !important;\r\n\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\tbackground-color: transparent !important;\r\n\t\t\t\t\t\ttransition: box-shadow 0.1s ease-out 0s;\r\n\t\t\t\t\t\tbox-shadow: ${ answersColor.setAlpha( 0.3 ).toString() }\r\n\t\t\t\t\t\t\t0px 1px !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\tbox-shadow: ${ answersColor.setAlpha( 1 ).toString() }\r\n\t\t\t\t\t\t\t0px 2px !important;\r\n\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\toutline: none !important;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcolor: ${ theme.answersColor } !important;\r\n\t\t\t\t`\r\n\t\t\t) }\r\n\t\t\tid={ 'email-' + id }\r\n\t\t\ttype=\"email\"\r\n\t\t\tplaceholder={\r\n\t\t\t\tplaceholder === false\r\n\t\t\t\t\t? messages[ 'block.email.placeholder' ]\r\n\t\t\t\t\t: placeholder\r\n\t\t\t}\r\n\t\t\tonChange={ changeHandler }\r\n\t\t\tvalue={ val && val.length > 0 ? val : '' }\r\n\t\t\tonFocus={ () => {\r\n\t\t\t\tif ( isTouchScreen ) {\r\n\t\t\t\t\tsetFooterDisplay( false );\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\tonBlur={ () => {\r\n\t\t\t\tif ( isTouchScreen ) {\r\n\t\t\t\t\tsetFooterDisplay( true );\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\tautoComplete=\"off\"\r\n\t\t/>\r\n\t);\r\n};\r\nexport default EmailOutput;\r\n"],"mappings":"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"}