{"version":3,"names":["_rendererCore","require","_react","_tinycolor","_interopRequireDefault","_reactAutosizeTextarea","_emotion","_classnames","LongTextOutput","props","id","attributes","setIsValid","setIsAnswered","setValidationErr","showNextBtn","blockWithError","val","setVal","showErrMsg","next","inputRef","isTouchScreen","setFooterDisplay","isReviewing","isPreview","minCharacters","setMaxCharacters","maxCharacters","required","placeholder","theme","useBlockTheme","themeId","messages","useMessages","answersColor","tinyColor","checkfieldValidation","value","length","useEffect","keyDownHandler","e","keyCode","shiftKey","stopPropagation","preventDefault","changeHandler","target","_element","createElement","Fragment","default","ref","onKeyDown","className","classnames","css","setAlpha","toString","onChange","onFocus","onBlur","autoComplete","questionsColor","HTMLParser","_default","exports"],"sources":["@quillforms/blocklib-long-text-block/src/renderer/display.js"],"sourcesContent":["/**\r\n * QuillForms Depndencies\r\n */\r\nimport {\r\n\tuseMessages,\r\n\tHTMLParser,\r\n\tuseBlockTheme,\r\n} from '@quillforms/renderer-core';\r\n\r\n/**\r\n * WordPress Dependencies\r\n */\r\nimport { useState, useEffect } from 'react';\r\n\r\n/**\r\n * External Dependencies\r\n */\r\nimport tinyColor from 'tinycolor2';\r\nimport TextareaAutosize from 'react-autosize-textarea';\r\nimport { css } from 'emotion';\r\nimport classnames from 'classnames';\r\n\r\nconst LongTextOutput = ( props ) => {\r\n\tconst {\r\n\t\tid,\r\n\t\tattributes,\r\n\t\tsetIsValid,\r\n\t\tsetIsAnswered,\r\n\t\tsetValidationErr,\r\n\t\tshowNextBtn,\r\n\t\tblockWithError,\r\n\t\tval,\r\n\t\tsetVal,\r\n\t\tshowErrMsg,\r\n\t\tnext,\r\n\t\tinputRef,\r\n\t\tisTouchScreen,\r\n\t\tsetFooterDisplay,\r\n\t\tisReviewing,\r\n\t\tisPreview,\r\n\t} = props;\r\n\tconst {\r\n\t\tminCharacters,\r\n\t\tsetMaxCharacters,\r\n\t\tmaxCharacters,\r\n\t\trequired,\r\n\t\tplaceholder,\r\n\t} = attributes;\r\n\tconst theme = useBlockTheme( attributes.themeId );\r\n\tconst messages = useMessages();\r\n\tconst answersColor = tinyColor( theme.answersColor );\r\n\r\n\tconst checkfieldValidation = ( value ) => {\r\n\t\tif ( required === true && ( ! value || value === '' ) ) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.required' ] );\r\n\t\t} else if (\r\n\t\t\tsetMaxCharacters &&\r\n\t\t\tmaxCharacters > 0 &&\r\n\t\t\tvalue?.length > maxCharacters\r\n\t\t) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.maxCharacters' ] );\r\n\t\t} else if (\r\n\t\t\tminCharacters !== false &&\r\n\t\t\tminCharacters > 0 &&\r\n\t\t\tvalue?.length < minCharacters\r\n\t\t) {\r\n\t\t\tsetIsValid( false );\r\n\t\t\tsetValidationErr( messages[ 'label.errorAlert.minCharacters' ] );\r\n\t\t} else {\r\n\t\t\tsetIsValid( true );\r\n\t\t\tsetValidationErr( null );\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( isPreview || ! isReviewing ) checkfieldValidation( val );\r\n\t}, [ attributes ] );\r\n\r\n\tconst keyDownHandler = ( e ) => {\r\n\t\t// Enter was pressed with shift key or not\r\n\t\tif ( e.keyCode === 13 ) {\r\n\t\t\tif ( e.shiftKey ) {\r\n\t\t\t\t// prevent default behavior\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t} else {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst changeHandler = ( e ) => {\r\n\t\tconst value = e.target.value;\r\n\t\tif (\r\n\t\t\tsetMaxCharacters &&\r\n\t\t\tmaxCharacters > 0 &&\r\n\t\t\tvalue.length > maxCharacters\r\n\t\t) {\r\n\t\t\tblockWithError( messages[ 'label.errorAlert.maxCharacters' ] );\r\n\t\t} else {\r\n\t\t\tsetVal( value );\r\n\t\t\tshowErrMsg( false );\r\n\t\t\tcheckfieldValidation( value );\r\n\t\t}\r\n\t\tif ( value !== '' ) {\r\n\t\t\tsetIsAnswered( true );\r\n\t\t\tshowNextBtn( true );\r\n\t\t} else {\r\n\t\t\tsetIsAnswered( false );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<TextareaAutosize\r\n\t\t\t\tref={ inputRef }\r\n\t\t\t\tonKeyDown={ keyDownHandler }\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\t& {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\tpadding: 0;\r\n\t\t\t\t\t\t\tborder: none !important;\r\n\t\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t\t\tborder-radius: 0 !important;\r\n\t\t\t\t\t\t\tpadding-bottom: 8px;\r\n\t\t\t\t\t\t\tbackground: transparent;\r\n\t\t\t\t\t\t\ttransition: box-shadow 0.1s ease-out 0s;\r\n\t\t\t\t\t\t\tresize: none;\r\n\t\t\t\t\t\t\tbox-shadow: ${ answersColor\r\n\t\t\t\t\t\t\t\t\t.setAlpha( 0.3 )\r\n\t\t\t\t\t\t\t\t\t.toString() }\r\n\t\t\t\t\t\t\t\t0px 1px !important;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&::placeholder {\r\n\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t/* Chrome, Firefox, Opera, Safari 10.1+ */\r\n\t\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&:-ms-input-placeholder {\r\n\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t/* Internet Explorer 10-11 */\r\n\t\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&::-ms-input-placeholder {\r\n\t\t\t\t\t\t\topacity: 0.3;\r\n\t\t\t\t\t\t\t/* Microsoft Edge */\r\n\t\t\t\t\t\t\tcolor: ${ theme.answersColor };\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&:focus {\r\n\t\t\t\t\t\t\tbox-shadow: ${ answersColor\r\n\t\t\t\t\t\t\t\t\t.setAlpha( 1 )\r\n\t\t\t\t\t\t\t\t\t.toString() }\r\n\t\t\t\t\t\t\t\t0px 2px !important;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolor: ${ theme.answersColor } !important;\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t\tid={ 'longText-' + id }\r\n\t\t\t\tplaceholder={\r\n\t\t\t\t\tplaceholder === false\r\n\t\t\t\t\t\t? messages[ 'block.longText.placeholder' ]\r\n\t\t\t\t\t\t: placeholder\r\n\t\t\t\t}\r\n\t\t\t\tonChange={ changeHandler }\r\n\t\t\t\tvalue={ val && val.length > 0 ? val : '' }\r\n\t\t\t\tonFocus={ () => {\r\n\t\t\t\t\tif ( isTouchScreen ) {\r\n\t\t\t\t\t\tsetFooterDisplay( false );\r\n\t\t\t\t\t}\r\n\t\t\t\t} }\r\n\t\t\t\tonBlur={ () => {\r\n\t\t\t\t\tif ( isTouchScreen ) {\r\n\t\t\t\t\t\tsetFooterDisplay( true );\r\n\t\t\t\t\t}\r\n\t\t\t\t} }\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t/>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'qf-blocklib-long-text-block-renderer__hint-text',\r\n\t\t\t\t\tcss`\r\n\t\t\t\t\t\tmargin-top: 12px;\r\n\t\t\t\t\t\tcolor: ${ theme.questionsColor };\r\n\t\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\t`\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t<HTMLParser\r\n\t\t\t\t\tvalue={\r\n\t\t\t\t\t\tisTouchScreen\r\n\t\t\t\t\t\t\t? messages[ 'block.longText.touchHint' ]\r\n\t\t\t\t\t\t\t: messages[ 'block.longText.hint' ]\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\nexport default LongTextOutput;\r\n"],"mappings":"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"}